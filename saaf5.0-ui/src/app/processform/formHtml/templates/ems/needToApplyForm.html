<div ng-controller="needToApplyFormCtrl" class="gridtable">
    <div class="data-table" id="processForm" data-api-post="commitCuxBcReimburse"
         data-api-get="findReimburseDetails" data-api-update="commitCuxBcReimburse" data-api-del="">
        <!--↓↓↓↓↓↓↓↓需申请↓↓↓↓↓↓↓↓-->
        <div class="col-md-12 pb10 oh" ng-if="urlParams.applyType=='Y'">
            <h5 class="hook-normal fontwB">
                <span class="fa fa-cog mr5"></span>录入报销头
                <button type="button" class="btn btn-xs btn-primary fa fa-print pull-right" ng-if="action!='new'" ng-click="print()">打印</button>
            </h5>

            <div resp-change="" class="col-xs-6 col-md-4 col-lg-3" style="display: none"></div>
            <div class="row">
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销编号</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.bcReimburseHId">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">状态</span></label>
                        <div lookup-code="BATCH_STATUS" class="form-control radius3" required="true" disabled
                             ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'"
                             ng-model="formParams.reimburseStatus"></div>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.statusName"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">渠道</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.channelName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">部门</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.departmentName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="userType!=30">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">人员</span></label>
                        <input type="text" readonly class="form-control radius3" id="person1"
                               ng-model="formParams.applyPersonName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="userType!=30">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">职位</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.applyPositionName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">经销商</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.custAccountName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">当前权限人</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.substitutePersonName " readonly>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>申请编号</span></label>
                        <input type="text" readonly class="form-control radius3 readonly-white" name="bcEncumbranceHId" required
                               ng-model="formParams.bcEncumbranceHId">
                        <span class="input-group-btn ng-scope">
                        <button type="button" data-toggle="modal" data-target="#applyNumber"
                                class="btn btn-default"><i class="fa fa-search"></i></button>
                    </span>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">费用期间</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.expensePeriod">
                    </div>
                </div>

                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">费用科目</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.expenseAccountName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">申请金额</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.encumbranceAmount">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-show="action!='new'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销金额</span></label>
                        <input type="text" readonly class="form-control radius3" id="reimburseAmount"
                               ng-model="formParams.reimburseAmount">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">提交金额</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.commitAmount">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">申请费用类型</span></label>
                        <div lookup-code="EXPENSE_TYPE" ng-model="formParams.encumbranceExpenseType" disabled
                             ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'"></div>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.encumbranceExpenseName"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-class="{'hook-normal':action=='approval'}">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>报销费用类型</span></label>
                        <div lookup-code="EXPENSE_TYPE" ng-model="formParams.expenseType" name="expenseType" required
                             ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'"></div>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.expenseName"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-show="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">单据来源</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.sourceType">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-show="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">来源单据编号</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.sourceCode " readonly>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-show="orgId==82">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销内容</span></label>
                        <textarea style="height: 50px" class="form-control radius3" ng-model="formParams.bcReimburseHMemo" max-textarea-cn="4000"
                                  ng-readonly="editDisabled"></textarea>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130"><i class="red">*</i>需要邮寄纸质单据</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="isPostPaperReceipts" required value="Y" ng-model="formParams.isPostPaperReceipts"
                                   ng-checked="formParams.isPostPaperReceipts=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="isPostPaperReceipts" required value="N" ng-model="formParams.isPostPaperReceipts"
                                   ng-checked="formParams.isPostPaperReceipts=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}" ng-hide="action!='approval'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130">汇总方式传送应付</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="transferApSum" value="Y" ng-model="formParams.transferApSum"
                                   ng-checked="formParams.transferApSum=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="transferApSum" value="N" ng-model="formParams.transferApSum"
                                   ng-checked="formParams.transferApSum=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}" ng-hide="action!='approval'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130">汇总方式传送往来账</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="transferCaSum" value="Y" ng-model="formParams.transferCaSum"
                                   ng-checked="formParams.transferCaSum=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="transferCaSum" value="N" ng-model="formParams.transferCaSum"
                                   ng-checked="formParams.transferCaSum=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>备注</span></label>
                        <textarea style="height: 50px" class="form-control radius3" ng-model="formParams.eventDesc" name="eventDesc" required
                                  max-textarea-cn="210" ng-readonly="editDisabled"></textarea>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-show="action=='new'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">会签意见</span></label>
                        <textarea style="height: 50px" max-textarea-cn="210" class="form-control radius3" ng-model="params.properties.opinion"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-12 pb10 oh" ng-if="urlParams.applyType=='Y' && formParams.bcEncumbranceHId && historyFlag">
            <h5 class="hook-normal fontwB">
                <span class="fa fa-cog mr5"></span>费用申请【{{formParams.bcEncumbranceHId}}】审批内容、审批意见
            </h5>
            <div class="row">
                <div class="form-group col-xs-12 col-md-6">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn" ><span class="w100">开始日期</span></label>
                        <div class=" input-group input-group-xs col col-md-12">
                            <span style="font-size: 12px;line-height: 1.5;">{{applyItem.startDate}}</span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-6">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn" ><span class="w100">结束日期</span></label>
                        <div class=" input-group input-group-xs col col-md-12">
                            <span style="font-size: 12px;line-height: 1.5;">{{applyItem.endDate}}</span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn" ><span class="w100">申请内容</span></label>
                        <div class=" input-group input-group-xs col col-md-12">
                            <span style="font-size: 12px;line-height: 1.5;">{{applyItem.eventDesc}}</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="data-table">
                        <table class="nicescroll-height report-data ">
                            <thead class="bg-gray-white">
                            <tr class="text-center">
                                <th class="w20p">提交人/审批人</th>
                                <th class="w80p">审批意见</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="text-center" ng-repeat="row in newProcessFindHistoricActivitiesList">
                                <td>{{row.userFullName}}</td>
                                <td>{{row.his_detail_opinion}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!--↑↑↑↑↑↑↑↑需申请↑↑↑↑↑↑↑↑-->


        <!--↓↓↓↓↓↓↓↓不需申请↓↓↓↓↓↓↓↓-->
        <div class="col-md-12" ng-if="urlParams.applyType=='N'">
            <h5 class="hook-normal fontwB">
                <span class="fa fa-cog mr5"></span>录入报销头
                <button type="button" class="btn btn-xs btn-primary fa fa-print pull-right" ng-if="action!='new'" ng-click="print()">打印</button>
            </h5>
            <div resp-change="" class="col-xs-6 col-md-4 col-lg-3" style="display: none"></div>
            <div class="row">
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销编号</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.bcReimburseHId">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">状态</span></label>
                        <div lookup-code="BATCH_STATUS" class="form-control radius3" required="true" disabled
                             ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'"
                             ng-model="formParams.reimburseStatus"></div>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.statusName"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">渠道</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.channelName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">部门</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="formParams.departmentName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="userType!=30">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">人员</span></label>
                        <!--ng-class="urlParams.action=='new'?'ifNoNeed':''"-->
                        <input type="text" readonly class="form-control radius3 readonly-white"
                               ng-model="formParams.applyPersonName">
                        <span class="input-group-btn ng-scope">
                            <button type="button" data-toggle="modal" data-target="#userInfo_h"
                                    class="btn btn-default"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="userType!=30">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">职位</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.applyPositionName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">经销商</span></label>
                        <input type="text" readonly class="form-control radius3 readonly-white" ng-class="urlParams.action=='new'?'ifNoNeed':''"
                               ng-model="formParams.custAccountName">
                        <span class="input-group-btn ng-scope">
                            <button type="button" data-toggle="modal" data-target="#dealerInfo_h"
                                    class="btn btn-default"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-if="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">当前权限人</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.substitutePersonName " readonly>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>费用期间</span></label>
                        <select class="form-control input-xs radius3-4" ng-model="formParams.expensePeriod" name="expensePeriod" required
                                ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'">
                            <option value="">请选择</option>
                            <option ng-value="expensePeriod.expensePeriod" ng-repeat="expensePeriod in expensePeriodList">{{expensePeriod.expensePeriod}}</option>
                        </select>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.expensePeriod"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>

                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>费用科目</span></label>
                        <input type="text" readonly class="form-control radius3 readonly-white" name="expenseAccountName" required
                               ng-model="formParams.expenseAccountName">
                        <span class="input-group-btn ng-scope">
                            <button type="button" data-toggle="modal" data-target="#expInfo"
                                    class="btn btn-default"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-class="{'hook-normal':action=='approval'}">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>报销费用类型</span></label>
                        <div lookup-code="EXPENSE_TYPE" ng-model="formParams.expenseType" name="expenseType" required
                             ng-if="action=='new'||action=='edit'||action=='draft'||action=='refusal'"></div>
                        <input type="text" class="form-control radius3" readonly ng-model="formParams.expenseName"
                               ng-if="action!='new'&&action!='edit'&&action!='draft'&&action!='refusal'">
                    </div>
                </div>
                <!--<div class="form-group col-xs-4 col-md-4" ng-if="!formParams.bcReimburseHId&&action=='approval'">-->
                    <!--<div class="input-group input-group-xs">-->
                        <!--<label class="input-group-addon bn"><span class="w100">申请金额</span></label>-->
                        <!--<input type="text" readonly class="form-control radius3"-->
                               <!--ng-model="formParams.commitAmount">-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="form-group col-xs-4 col-md-4" ng-if="!formParams.bcReimburseHId&&action=='approval'">-->
                    <!--<div class="input-group input-group-xs">-->
                        <!--<label class="input-group-addon bn"><span class="w100">申请金额</span></label>-->
                        <!--<input type="text" readonly class="form-control radius3"-->
                               <!--ng-model="formParams.encumbranceAmount">-->
                    <!--</div>-->
                <!--</div>-->
                <div class="form-group col-xs-4 col-md-4" ng-show="action!='new'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销金额</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.reimburseAmount">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">提交金额</span></label>
                        <input type="text" readonly class="form-control radius3"
                               ng-model="formParams.commitAmount">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-show="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">单据来源</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.sourceType">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4" ng-show="action=='detail'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">来源单据编号</span></label>
                        <input class="form-control input-xs radius3-4" ng-model="formParams.sourceId" readonly>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-if="orgId=='82'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">报销内容</span></label>
                        <textarea style="height: 50px" class="form-control radius3" ng-model="formParams.bcReimburseHMemo" max-textarea-cn="4000"
                                  ng-readonly="editDisabled"></textarea>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130"><i class="red">*</i>需要邮寄纸质单据</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="isPostPaperReceipts" required value="Y" ng-model="formParams.isPostPaperReceipts"
                                   ng-disabled="action!='new'&&action!='draft'&&action!='refusal'" ng-checked="formParams.isPostPaperReceipts=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="isPostPaperReceipts" required value="N" ng-model="formParams.isPostPaperReceipts"
                                   ng-disabled="action!='new'&&action!='draft'&&action!='refusal'" ng-checked="formParams.isPostPaperReceipts=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}" ng-hide="action!='approval'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130">汇总方式传送应付</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="transferApSum" value="Y" ng-model="formParams.transferApSum"
                                   ng-checked="formParams.transferApSum=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="transferApSum" value="N" ng-model="formParams.transferApSum"
                                   ng-checked="formParams.transferApSum=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}" ng-hide="action!='approval'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w130">汇总方式传送往来账</span></label>
                        <label class="radio-inline">
                            <input type="radio" name="transferCaSum" value="Y" ng-model="formParams.transferCaSum"
                                   ng-checked="formParams.transferCaSum=='Y'">是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="transferCaSum" value="N" ng-model="formParams.transferCaSum"
                                   ng-checked="formParams.transferCaSum=='N'">否
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-class="{'hook-normal':action=='approval'}">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100"><i class="red">*</i>备注</span></label>
                        <textarea style="height: 50px" class="form-control radius3" ng-model="formParams.eventDesc" name="eventDesc" required
                                  max-textarea-cn="210" ng-readonly="editDisabled"></textarea>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-md-12" ng-show="action=='new'||action=='draft'||action=='refusal'">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="w100">会签意见</span></label>
                        <textarea style="height: 50px" max-textarea-cn="210" class="form-control radius3" ng-model="formParams.opinion"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <!--↑↑↑↑↑↑↑↑不需申请↑↑↑↑↑↑↑↑-->

        <div class="col-md-12" id="applyFormRows">
            <h5 ng-class="{'hook-normal':action=='approval'}" class="pb5 fontwB">
                <span class="fa fa-cog mr5"></span>报销行信息
                <div class="pull-right" ng-hide="action == 'detail'">
                    <button type="button" class="btn-xs btn btn-primary" id="createRow" ng-click="createRow()">新增行</button>
                    <button style="margin: 0 3px" class="btn btn-primary btn-xs" type="button" ng-click="downloadTmp('BUDGET_REIMBURSE')">
                        下载报销行模版
                    </button>
                    <div class="btn btn-primary btn-xs fileDiv" ng-class="{'fileBtn_disable':action=='detail'}">导入报销行
                        <upload-file resp-id="respId" up-params="{bcReimburseHId:formParams.bcReimburseHId}" curobj="uploadObj" form-data="formParams" upload-url="bcUploadUrl" upcb="upCallBack"></upload-file>
                    </div>
                </div>
                <!--<button type="button" class="pull-right btn-xs btn btn-primary mr5" ng-click="importRows()">导入报销行</button>-->
            </h5>
            <div style="width: 100%;overflow-x: auto">
                <div class="data-table" ng-class="{'hook-normal':action=='approval'}">
                    <table class="nicescroll-height report-data" style="width: 3000px;">
                        <thead>
                        <tr>
                            <th class="w300">部门 <i class="red">*</i></th>
                            <th class="w180">报销项目 <i class="red">*</i></th>
                            <th class="" ng-show="userType!=30">人员</th>
                            <th class="w300">经销商</th>
                            <th class="">经销商子库编码</th>
                            <th class="w300">第三方</th>
                            <th class="">报销金额 <i class="red">*</i></th>
                            <th class="">开始日期 <i class="red">*</i></th>
                            <th class="">结束日期 <i class="red">*</i></th>
                            <th class="w300">活动内容</th>
                            <th class="w300">开户银行</th>
                            <th class="w300">银行分行</th>
                            <th class="w300">银行账号</th>
                            <th ng-if="action=='new'||action=='approval'||action=='draft'">操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in formParams.reimburseLineData" ng-click="formParams.selectRowIndex=$index">
                            <td>
                                <div class="input-group input-group-xs">
                                    <input type="text" class="form-control radius3 readonly-white" ng-model="item.departmentName" title="{{item.departmentName}}" name="departmentName" required readonly>
                                    <span class="input-group-btn input-xs" style="padding: 0;">
                                        <button type="button" class="btn btn-default deptInfoBtn" data-toggle="modal" data-target="#deptInfo"  ng-disabled="!formParams.departmentId">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group input-group-xs">
                                    <input type="text" class="form-control radius3 readonly-white" ng-model="item.expenseItemDesc" title="{{item.expenseItemDesc}}" name="expenseItemDesc" required readonly>
                                    <span class="input-group-btn input-xs" style="padding: 0;">
                                        <button type="button" class="btn btn-default expenseItemDescBtn" data-toggle="modal" data-target="#expenseInfo" ng-disabled="!formParams.expenseAccountName">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td ng-show="userType!=30">
                                <div class="input-group input-group-xs">
                                    <input type="text" class="form-control radius3 readonly-white" ng-model="item.personName" title="{{item.personName}}" readonly>
                                    <span class="input-group-btn input-xs" style="padding: 0;">
                                        <button type="button" class="btn btn-default personBtn" data-toggle="modal" data-target="#userInfo"
                                                ng-disabled="!formParams.applyPersonName">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group input-group-xs">
                                    <input type="text" class="form-control radius3 readonly-white" ng-model="item.accountName" title="{{item.accountName}}" readonly>
                                    <span class="input-group-btn input-xs" style="padding: 0;">
                                        <button type="button" class="btn btn-default accountBtn" data-toggle="modal" data-target="#dealerInfo" ng-disabled="!formParams.custAccountName&&!formParams.applyPersonName">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="text" class="form-control radius3 secondaryInventoryNameInput" ng-model="item.secondaryInventoryName"
                                           title="{{item.secondaryInventoryName}}" readonly>
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="text" class="form-control radius3 thirdPartyInput" ng-model="item.thirdParty" title="{{item.thirdParty}}"
                                           ng-readonly="formParams.expenseType!='10'||!formParams.applyPersonName" ng-change="thirdPartyFun()"
                                           max-input-cn="250">
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="number" class="form-control radius3" ng-model="item.reimburseAmount" title="{{item.reimburseAmount}}"
                                          min="0" ng-change="changeRowAmount(item,'reimburseAmount',2)" name="reimburseAmount" required>
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input class="form-control radius3" ng-model="item.startDate" date-time-picker title="{{item.startDate}}"
                                           name="startDate" required data-stratdate="{{item.endDate}}" data-min-view="2"
                                           autocomplete="off" data-date-format="yyyy-mm-dd">
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input class="form-control radius3" ng-model="item.endDate" date-time-picker title="{{item.endDate}}"
                                           name="endDate" required data-stratdate="{{item.startDate}}" data-min-view="2"
                                           autocomplete="off" data-date-format="yyyy-mm-dd">
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="text" class="form-control radius3" ng-model="item.eventDesc" title="{{item.eventDesc}}" max-input-cn="100">
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="text" class="form-control radius3" ng-model="item.bankName" title="{{item.bankName}}" max-input-cn="100">
                                </div>
                            </td>
                            <td>
                                <div class="input-group-xs">
                                    <input type="text" class="form-control radius3" ng-model="item.bankBranchName" title="{{item.bankBranchName}}" max-input-cn="100">
                                </div>
                            </td>
                            <td>
                                <div class="input-group input-group-xs">
                                    <input type="text" class="form-control radius3" ng-model="item.bankAccount" title="{{item.bankAccount}}" max-input-cn="30">
                                    <span class="input-group-btn input-xs" style="padding: 0;">
                                        <button type="button" class="btn btn-default bankAccount" ng-disabled="item.bankBool" data-toggle="modal" ng-click="addParams()">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td ng-if="action=='new'||action=='approval'||action=='draft'">
                                <a href="javascript:" ng-click="deleteRow(item,$index)"><i
                                        class="fa fa-trash-o fa-lg"></i></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <button class="btn btn-primary btn-xs mt15" ng-if="orgId==81" type="button" ng-click="downloadTmp('BUDGET_REIMBURSE_TEMPLATE')">
                下载费用单据模板
            </button>
        </div>
        <div class="col-xs-12 mt10">
            <!--<header class="" style="padding-top:15px">-->
                <!--<i class="fa fa-cog mr5" aria-hidden="true"></i>附件-->
                <!--<button style="margin: 0 3px" class="btn btn-primary btn-xs" ng-if="orgId==81" type="button" ng-if="orgId==81" ng-click="downloadTmp('BUDGET_REIMBURSE_TEMPLATE')">-->
                    <!--下载费用单据模板-->
                <!--</button>-->
            <!--</header>-->
            <div saaf-file data-file-data="fileData" data-lookupcode="fileFilter.code" data-lookupcode-key="fileFilter.key" data-file-filter='{{fileType}}' data-view-only="fileViewOnly"
                 data-label='<header class="fontwB"><i class="fa fa-cog" aria-hidden="true"></i>附件</header>'>
            </div>
        </div>
    </div>



    <!--部门控件-->
    <div ems-dept-select data-sel-params="{respId:urlParams.respId,orgId:orgId,departmentId:formParams.departmentId,sysFlag:flag}"
         id="deptInfo" ng-model="deptModel" class="hook-normal"
         data-keys="{key:'departmentId',value:'departmentName'}" dept-type="row" data-search-auto="true"
         callaction="selDeptFun()" emptyaction="empDeptFun()"></div>

    <!--人员-->
    <div e-user-line-select role="dialog" data-title="请选择行人员" id="userInfo" ng-model="userModel" data-search-auto="true" class="hook-normal"
         ng-params="{responsibilityId:respId,orgId:orgId,userType:userType,departmentId:formParams.departmentId,
         hpersonId:formParams.applyPersonId,expenseType:formParams.expenseType,sysFlag:flag}"
         return-fun="selUserFun">
    </div>

    <!--经销商-->
    <div ems-dealer-select data-sel-params="{responsibilityId:respId,orgId:orgId,departmentId:formParams.departmentId,
    hcustAccountId:formParams.custAccountId,hpersonId:formParams.applyPersonId,channelType:formParams.channelType,sysFlag:flag,menuCode:'EMS_FYBX',resourceCode:'20YHKYXZBMSYJXS'}"
         id="dealerInfo" ng-model="dealerItem" class="hook-normal"
         data-keys="{key:'customerId',value:'customerName'}" data-dir-type="row"
         data-search-auto="true"
         callaction="dealerSelectFun()" emptyaction="dealerEmptyFun()"></div>

    <!--费用申请-->
    <div e-apply-select="findApplyCost" role="dialog" data-title="请选择申请费用" id="applyNumber" ng-model="applyItem" class="hook-normal"
         data-search-auto="true"
         ng-params="{responsibilityId:urlParams.respId,orgId:urlParams.orgId,userType:urlParams.userType,channelType:urlParams.channelType,menuCode:'EMS_FYBX',resourceCode:'20YHKYXZBMSYJXS'}"  return-fun="feeApplySelectFun">
    </div>

    <!--费用项目-->
    <div ems-expense-select data-sel-params="{expenseAccountId:formParams.expenseAccount}"
         id="expenseInfo" ng-model="expenseItem" class="hook-normal"
         data-keys="{key:'expenseItemId',value:'expenseItemDesc'}"
         data-search-auto="true"
         callaction="expenseSelectFun()" emptyaction="expenseEmptyFun()"></div>

    <!--银行账号-->
    <div ems-bank-info-select data-sel-params="bankParams"
         id="bankInfo" ng-model="bankItem" data-search-auto="true"
         data-keys="{key:'bankAccount',value:'bankName'}" class="hook-normal"
         callaction="bankSelectFun()" emptyaction="bankEmptyFun()"></div>





    <!--头 人员-->
    <div e-user-select role="dialog" data-title="请选择头人员" id="userInfo_h" ng-model="userModel_h" class="hook-normal"
         ng-params="{responsibilityId:urlParams.respId,orgId:urlParams.orgId,userType:urlParams.userType,userAuth:'maintain'}" return-fun="selUserHeaderFun">
    </div>

    <!--头 经销商-->
    <div ems-dealer-select data-sel-params="{responsibilityId:respId,orgId:orgId,userAuth:'maintain',menuCode:'EMS_FYBX',resourceCode:'20YHKYXZBMSYJXS',channelType:ctrlChannelType}"
         id="dealerInfo_h" ng-model="dealerModel_h" class="hook-normal"
         data-keys="{key:'customerId',value:'customerName'}" data-dir-type="header"
         data-search-auto="false"
         callaction="dealerHeaderSelectFun()" emptyaction="dealerHeaderEmptyFun()"></div>

    <!--头 费用科目-->
    <div ems-exp-subject-select data-sel-params="{responsibilityId:respId,orgId:orgId,userType:userType,
        channelType:channelType,isReimburseAuth:'M',needEncumbrance:'N',isLeafFlag:'Y',userAuth:'maintain'}" id="expInfo" ng-model="expModel"
         data-keys="{key:'expenseAccountId',value:'expenseAccountName'}" class="hook-normal" data-search-auto="true"
         callaction="expSelectFun()" emptyaction="expEmptyFun()"></div>


</div>

<style type="text/css">
    .fileBtn{    opacity: 0;
        position: absolute;
        top: -2px;
        left: -8px;
        height: 34px;
        width: 80px;
        padding: 5px 0;
        overflow: hidden;}
    .fileDiv{
        cursor: pointer; position: relative;border-radius: 3px;
        overflow: hidden;display: inline-table;
    }

    .fileBtn_disable,.fileBtn_disable:hover{
        background-color: #85b4dd;
        border-color: #7cacd4;
    }
    .ifNoNeed{
        background-color: white!important;
    }
</style>
