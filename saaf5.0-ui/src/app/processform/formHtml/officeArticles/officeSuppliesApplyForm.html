<div ng-controller="officeSuppliesApplyFormCtrl" class="gridtable">
    <div class="data-table" id="processForm" data-api-post="saveUpdateOffice"
         data-api-get="findOfficeDetail" data-api-del="" data-api-update="updateOfficeSplH">
        <div class="col-md-12 pt15">
            <h5 class='fontwB'><span class="fa fa-cog mr15"></span>申请信息</h5>
            <div resp-change="" class="col-xs-6 col-md-4 col-lg-3" style="display: none"></div>
            <div class="row">
                <div search-form
                     data-col="4"
                     data-legend="[
                        {key:'deptName',label:'申请部门',readonly:true,required:true},
                        {key:'personName',label:'申请人',readonly:true,required:true},
                        {key:'positionName',label:'职位',readonly:true,type:'lov',target:'#positionByPersonModel',required:true,css:'readonly-white'},
                        {key:'billNo',label:'申请单号',readonly:true},
                        {key:'requestTime',label:'申请时间',type:'time',disabled:true},
                        {key:'statusStr',label:'状态',readonly:true},
                      ]"
                     ng-model="formParams"
                ></div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span
                                class="w100">合计金额</span></label>
                        <input type="text" class="form-control radius3" name="interfaceName"
                               ng-model="formParams.splSum" readonly>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6 col-md-12">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span
                                class="w100"><i class="red">*</i>申请原因</span></label>
                        <textarea class="form-control" rows="1" auto-textarea="" ng-model="formParams.splReason" max-length="200" placeholder="字数限制200" title="字数限制200" required name="splReason" style="height: auto"></textarea>
                        <!-- <input class="form-control" ng-model="formParams.splReason" required name="splReason"/> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-12" >
            <h5 class='fontwB'><span class="fa fa-cog mr15"></span>办公用品
                <div class="btn-group btn-group-xs ml5 pull-right">
                    <button type="button" class="btn btn-default btn-xs"
                            data-toggle="modal" data-target="#findOfficeAdmGiftPagination"
                            ng-show="childData.isEdit"
                             ><i class="fa fa-plus">增加</i></button>
                </div>
            </h5>


        </div>

        <div class="col-md-12" >
            <table class="table table-bordered table-hover table-condensed">
                <thead class="bg-gray-white">
                <tr class="text-center">
                    <th ><span class="pl10"> 序号</span></th>
                    <th >办公用品名称</span></th>
                    <th>单价</th>
                    <th><i class="red">*</i>数量</th>
                    <th>小计</th>
                    <th>备注</th>
                    <th ng-hide="action=='detail'">操作</th>
                    <th ng-if="action=='detail'">领用状态</th>
                </tr>
                </thead>
                <tbody>
                <tr class="text-center" ng-repeat="row in formParams.items">
                    <td>{{$index+1}}</td>
                    <td>
                        <div class="input-group input-group-xs ng-scope">
                            <input type="text" class="form-control radius3 input-xs" ng-model="row.splName" disabled >
                            <span class="input-group-btn" ng-disabled="isEdit" data-toggle="modal" data-target="#findOfficePop" ng-click="setRowIndex($index)">
                                <a class="btn btn-default" ng-disabled="isEdit"><i class="fa fa-search"></i></a>
                            </span>
                        </div>
                    </span>
                    </td>
                    <td data="单价">
                        <input type="text" class="form-control radius3 input-xs" ng-model="row.splPrice" ng-disabled="true">
                    </td>
                    <td data="数量"><input type="text"  class="form-control radius3 input-xs" ng-model="row.splNum" number="2" name="splNum" ng-keyup="subTotal($index,row)" max-length="11" required placeholder="请输入正整数"/></td>
                    <td data="小计">
                        <input type="text" class="form-control radius3 input-xs" ng-model="row.subTotal" ng-disabled="true">
                    </td>
                    <td>
                        <input type="text"  class="form-control radius3 input-xs" ng-model="row.splMemo" max-length="200" placeholder=" " />
                    </td>
                    <td ng-hide="action=='detail'">
                        <button type="button" class="btn btn-default btn-xs " ng-hide="formParams.items.length==1  " ng-click="deleteRow('items',$index,row)"><i class="fa fa-trash-o fa-lg"></i>删除</button>
                    </td>
                    <td ng-if="action=='detail'"  >
                        <div  lookup-code="OA_SPL_STATUS" ng-model="row.splStatus" class="input-xs"  ></div>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
        <div class="col-md-12 hook-normal">
            <div saaf-file="" data-label="<h5 class='fontwB'><span class='fa fa-cog mr15'></span>附件列表</h5>"
                 data-file-data="fileData.file"
                 data-file-filter='{{fileType}}'
                 data-view-only="fileViewOnly"
            ></div>
        </div>

    </div>
    <div lov-list="findOfficeAdmGiftPagination" role="dialog" data-title="请选择办公用品" id="findOfficeAdmGiftPagination" ng-model="code1"
             data-url="findOfficeAdmGiftPagination"
             data-params="{'admGiftType':1,'admGiftStatus':0}"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-checked-type="checkbox"
             data-keys="{'key':'admGiftId','value':'skuName',name:'办公用品名称'}"
             data-show-index="false"
             data-other-column="[
                  {'name':'图片','key':'admGiftImgurl',image:[50,50]},
                  {'name':'单价','key':'admGiftPrice'},
                  {'name':'规格/型号','key':'admGiftTypeName'},
                 ]"
             data-search-key="[{'key':'skuName','placeholder':'请输入办公用品名称'}]"
             data-callback="setRowInput"
        >
        </div>
        <div lov-list="findOfficePop" role="dialog" data-title="请选择办公用品" id="findOfficePop" ng-model="code1"
             data-url="findOfficeAdmGiftPagination"
             data-params="{'admGiftType':'1','admGiftStatus':0}"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-keys="{'key':'admGiftId','value':'skuName',name:'办公用品名称'}"
             data-show-index="false"
             data-other-column="[
                  {'name':'图片','key':'admGiftImgurl',image:[50,50]},
                  {'name':'单价','key':'admGiftPrice'},
                  {'name':'规格/型号','key':'admGiftTypeName'},
                 ]"
             data-search-key="[{'key':'skuName','placeholder':'请输入办公用品名称'}]"
             data-callback="setRowName"
        >
        </div>
</div>