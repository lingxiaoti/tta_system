<div ng-controller="messageMaintenanceCtrl">

    <div class="form bg-white" inner-frame data-des="此节点必需－内框页面的指令">
        <!--------------------- 按钮--->
        <div class="bg-gray-white bt">
            <div class="bg-gray-white p5">
                <div class="btn-group btn-group-xs pull-right ml10" id="outputButton">
                    <button class="btn btn-default " ng-click="cancel()"><i class="fa fa-undo"></i>取消</button>
                    <button class="btn btn-default " ng-click="send()"><i class="fa fa-paper-plane"></i>发送</button>
                    <button class="btn btn-default " ng-click="add()"><i class="fa fa-plus"></i>新增</button>
                    <button class="btn btn-default " ng-disabled="messageMaintenanceTable.selectRow==null"
                            ng-click="edit()"><i class="fa fa-edit UpdateBtn"></i>修改
                    </button>
                    <button class="btn btn-default" ng-click="messageMaintenanceTable.getData()"><i class="fa fa-search"
                                                                                                    aria-hidden="true"></i>搜索
                    </button>
                    <button class="btn btn-default ng-scope" ng-click="reset()"><i class="fa fa-rotate-right"></i>重置
                    </button>
                    <button class="btn btn-default"  ng-if="saafPageButtons.export" ng-click="messageMaintenanceTable.xlsExport()"><i class="fa fa-download"></i>导出</button>
                </div>
                <div class="btn-group btn-group-xs ">
                    <button class="btn  btn-warning" ng-click="moreInput($event)"><i
                            class="fa fa-chevron-circle-down"></i>高级查询
                    </button>
                    <button class="btn btn-primary" ng-click="fullWindow($event)"><i class="fa fa-square-o"></i>数据全屏
                    </button>
                </div>
            </div>
        </div>
        <!---------------------  / .按钮  --->

        <div main-scroll-style data-des="此节点必需－用户计算滚动区域高度">
            <div class="nicescroll-height  bg-white " ng-nicescroll
                 nice-option="{cursorcolor: '#1e90c2'}" data-des="此节点必需-滚动内容及指令">

                <!--------------------- 输入表单  --->
                <div class=" mt10 pb5 input-form bb oh" input-form data-des="此节点必需－用于识别输入表单的指令">
                    <form ng-submit="messageMaintenanceTable.getData()">
                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="pl10">消息主题：</span></label>
                                <input type="text" class="form-control radius3"
                                       name="varUserFullName" ng-model="params.messageContent"
                                       placeholder="">
                            </div>
                        </div>
                        <input type="submit" hidden>
                    </form>
                </div>
                <!--------------------- ./  输入表单  --->

                <!--------------------- ./  数据　　  --->
                <div class="data-table">
                    <div hidden ng-init="params={}" data-des="初始化表格参数"></div>
                    <table saaf-table="messageMaintenanceTable"
                           data-url="CmsPushMessageFind"
                           data-params="params"
                           class="table table-bordered table-hover table-condensed">
                        <thead class="bg-gray-white">
                        <tr class="text-center">
                            <th>序号</th>
                            <th style="width: 180px">消息主题</th>
                            <th>推送目标</th>
                            <!--<th>短信平台</th>-->
                            <th>信息类型</th>
                            <th>信息模板</th>
                            <th>推送人</th>
                            <th>计划推送时间</th>
                            <th>编辑人</th>
                            <th>编辑时间</th>
                            <th>状态</th>
                        </tr>
                        </thead>
                        <tbody ng-show="!messageMaintenanceTable.data">
                        <tr>
                            <td style="height: 200px" colspan="100"></td>
                        </tr>
                        </tbody>
                        <tbody ng-show="messageMaintenanceTable.data">
                        <tr ng-repeat="row in messageMaintenanceTable.data"
                            ng-class="{'active':messageMaintenanceTable.selectRow==$index}"
                            ng-click="messageMaintenanceTable.selectRow=$index">
                            <td ng-bind="(messageMaintenanceTable.curIndex-1)*messageMaintenanceTable.pageSize+$index+1"
                                style="width: 50px">1
                            </td>
                            <td>
                                <div class="ellipsis w180">{{row.messageContent}}</div>
                            </td>
                            <td>{{row.messageTo}}</td>
                            <!--<td>{{row.messageTemplateType}}</td>-->
                            <td>{{row.meaning}}</td>
                            <td>{{row.title}}</td>
                            <td>{{row.messageFrom}}</td>
                            <td>{{row.pushScheduleDate}}</td>
                            <td>
                                <div class="ellipsis w80">{{row.editName}}</div>
                            </td>
                            <td>{{row.editDate}}</td>
                            <td>{{row.pushStatus}}</td>
                        </tr>
                        </tbody>
                    </table>
                    <div saaf-table-tfoot="messageMaintenanceTable"></div>
                </div>
                <!--------------------- ./  数据　　  --->
            </div>
        </div>
    </div>
    <!--    **********************     弹出框  start   *******************      -->

    <form class="" name="editForm"  >
        <div class="modal fade" id="myModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
             role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">
                            消息推送
                        </h4>
                    </div>
                    <div class="modal-body ">
                        <div class="pl30 pr30">
                            <div class="row">


                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block"><i class="red">*</i>消息主题：</span></label>
                                        <input type="text" class="form-control radius3" name="messageContent"
                                               ng-model="current.messageContent" required>
                                    </div>
                                </div>
                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block"><i class="red">*</i>推送目标：</span></label>
                                        <input type="text" class="form-control radius3" name="messageTo"
                                               ng-model="current.messageTo" required>
                                        <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" data-toggle="modal"
                                                        data-target="#lovOrderModal_2">
                                                    <i class="fa fa-search" aria-hidden="true"></i>
                                                </button>
                                            </span>

                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block"><i class="red">*</i>信息类型：</span></label>
                                        <select class="form-control  radius3" ng-model="current.messageTemplateType" name="messageTemplateType"
                                                id="QueryModelmessageTemplateType" ng-click="check()" required>
                                            <option></option>
                                            <option saaf-select-lookupcode="MESSAGE_TEMPLATE_TYPE"></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block"><i class="red">*</i>信息模板：</span></label>
                                        <input type="text" class="form-control radius3" name="currentTitle"
                                               ng-model="current.title" required>
                                        <span class="input-group-btn" saaf-lov=""
                                              data-return-value1="current.title"
                                              data-return-value2="current.messageTemplateId"
                                              data-return-value3="current.meaning"

                                              saaf-lov-option="{
                                            dataUrl:'TemplateLovFind',
                                            params:{messageTemplateType:'{{current.messageTemplateType}}'},
                                            css:'modal-dialog-lg',
                                            searchLabel1:'模板类型',
                                            searchColName1:'title',
                                            label1:'标题',label2:'模板类型',label3:'内容',
                                            colName1:'title',colName2:'meaning',colName3:'content',
                                            returnColName1:'title' , returnColName2:'messageTemplateId',returnColName3:'meaning',
                                             titleName:'信息模板选择'
                                            }">

                                             </span>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block">编辑时间：</span></label>
                                        <!--<input type="text" id=" " class="form-control radius3" ng-model="current.editDate"-->
                                        <!--date-time-picker="" data-min-View="2" data-date-format="yyyy-mm-dd hh:mm:ss" />-->
                                        <input type="text" class="form-control radius3" id="editDate"
                                               date-time-picker
                                               data-date-format="yyyy-mm-dd hh:ii:ss"
                                               ng-model="current.editDate">
                                        <a class="input-group-btn" data-link-field="orderTimeFrom" date-time-picker
                                           data-link-format="yyyy-mm-dd hh:ii:ss"
                                           data-min-View="2"></a>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block">计划推送时间：</span></label>
                                        <!--<input type="text" id="currentData_endDateActive" class="form-control radius3"-->
                                        <!--ng-model="current.pushScheduleDate" date-time-picker="" data-min-View="2"-->
                                        <!--data-date-format="yyyy-mm-dd hh:mm:ss" />-->
                                        <input type="text" class="form-control radius3"
                                               id="currentData_endDateActive" date-time-picker
                                               data-date-format="yyyy-mm-dd hh:ii:ss"
                                               ng-model="current.pushScheduleDate">
                                        <a class="input-group-btn" data-link-field="currentData_endDateActive"
                                           date-time-picker
                                           data-link-format="yyyy-mm-dd hh:ii:ss"
                                           data-min-View="2"></a>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block">状态：</span></label>
                                        <select class="form-control  radius3" ng-model="current.status"
                                                id="QueryModel.stauts" ng-disabled="status_falg">
                                            <option></option>
                                            <option saaf-select-lookupcode="PUSH_STATUS"></option>
                                        </select>
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-4">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span
                                                class="w80 tr inline-block">编辑人：</span></label>
                                        <input type="text" class="form-control radius3" name="memberLevel"
                                               ng-model="current.editName" ng-disabled="status_falg">
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <div style="text-align: center">
                            <button type="reset" class="btn btn-default btn-sm" data-dismiss="modal"
                                    aria-label="Close" ng-click="messageMaintenanceTable.getData()"><span
                                    class="fa ">取消</span>
                            </button>
                            <button validate-form-btn="editForm" ng-click="save()" class="btn btn-primary btn-sm">
                                <span>保存</span></button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </form>
    <!--    **********************     弹出框  end   *******************      -->

    <!--    **********************     弹出框  start   *******************      -->
    <div class="modal fade" id="lovOrderModal_2" tabindex="-1" role="dialog" aria-labelledby="lovOrderModal"
         aria-hidden="true">
        <div class="modal-dialog" style="margin-top: 30px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel1">会员等级</h4>
                </div>
                <div class="modal-body" id="memberLov">
                    <!--------------------- ./  数据　　  --->
                    <div class="data-table">
                        <div hidden ng-init="params={ 'lookupType': 'MEMBER_CARD_TYPE'}" data-des="初始化表格参数"></div>
                        <table saaf-table="dataTable"
                               data-url="queryLookupCode"
                               data-params="params" data-page-rows="20"
                               class="table table-bordered table-hover table-condensed">
                            <thead class="bg-gray-white">
                            <tr class="text-center">
                                <th class="w30"></th>
                                <th class="w50">序号</th>
                                <!--<th>会员卡类型编码</th>-->
                                <th>会员卡等级</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="row in dataTable.data" ng-click="showRadio($index+1);row.enableFlag=(row.enableFlag=='Y')?'N':'Y'">
                                <td><input type="checkbox" name="saaflovradio_2"
                                           ng-false-value="'N'" ng-true-value="'Y'"
                                           ng-model="row.enableFlag"
                                           ng-click="showRadio($index+1);row.enableFlag=(row.enableFlag=='Y')?'N':'Y'"
                                           value="{{row.meaning}}"></td>
                                <td ng-bind="$index+1" style="width: 50px">1</td>
                                <!--<td>{{row.lookupCode}}</td>-->
                                <td>{{row.meaning}}</td>
                            </tr>
                            </tbody>
                        </table>

                        <div class="modal-footer ">
                            <div style="text-align:center">
                                <button type="button" class="btn btn-default " data-dismiss="modal">取消</button>
                                <button type="button" class="btn btn-primary " ng-click="returnData()">保存</button>
                            </div>
                        </div>

                    </div>
                </div>
                <!--------------------- ./  数据　end　  --->
            </div>
        </div>
    </div>
    <!--    **********************     弹出框  end   *******************      -->
</div>