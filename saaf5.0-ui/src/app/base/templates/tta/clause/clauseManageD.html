<div ng-controller="clauseManageDCtrl" ng-init="init()" class="bigdata">
    <div id="processForm"
         data-api-post="saveOrUpdateTraermsAll"
         data-api-get="findTtaTermsFrameHeaderPagination"
         data-api-update="saveOrUpdateTraermsAll">
    </div>
    <div class="form bg-white"
         data-des="此节点必需－内框页面的指令">
        <!--------------------- 按钮--->
        <div ng-if="!urlParams.businessKey" class="bg-gray-white bt">
            <div class="bg-gray-white p5">


                <div class="btn-group btn-group-xs pull-right ml10">
                    <button type="button" permission-btn="btnChange" ng-click="btnChange()"
                            class="btn btn-default" data-validate-form="clauseForm" id="btnChangeBt">
                    </button>
                </div>
                <div class="btn-group btn-group-xs pull-right ml10" ng-if="true">
                    <button type="button" ng-click="btnSave()" ng-show="true" permission-btn="btnSave"
                            class="btn btn-default" data-validate-form="clauseForm" id="btnSave">
                    </button>
                    <button type="button" ng-click="submitApproval(clause)" ng-show="true"
                            permission-btn="submitApproval"
                            class="btn btn-default" data-validate-form="clauseForm" id="submitApprovala">
                    </button>
                </div>
                <div class="btn-group btn-group-xs ">
                    <button type="button" class="btn btn-primary" ng-click="fullWindow($event)">
                        <i class="fa fa-square-o"></i> <span ng-bind="$l('数据全屏')"></span>
                    </button>
                </div>
            </div>
        </div>
        <!---------------------  / .按钮  --->
        <div data-des="此节点必需－用户计算滚动区域高度" main-scroll-style>
            <div class="nicescroll-height  bg-white "
                 nice-option="{{niceOpction}}"
                 data-des="此节点必需-滚动内容及指令">
                <ul ng-if="!urlParams.businessKey" class="nav nav-tabs mt10">
                    <li role="presentation" class="active" ng-click="tabChange('clauseManageDBusiness')">
                        <a href="#clauseManageDBusiness" aria-controls="clauseManageDBusiness" role="tab"
                           data-toggle="tab">业务表单</a>
                    </li>
                    <li role="presentation" ng-click="tabChange('opinion')">
                        <a href="#opinion" aria-controls="opinion" role="tab" data-toggle="tab">流程图</a>
                    </li>
                    <li ng-show="tabAction=='opinion'">
                        <ul>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #cc0033;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">未接收</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #ff6600;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">办理中</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #339933;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">已办结</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #666666;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">预设步骤</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!--------------------- 输入表单  --->
                <div ng-show="tabAction== 'clauseManageDBusiness'" role="tabpanel" class="tab-pane active"
                     id="clauseManageDBusiness"
                     style="border: 0;width:100%;height: 100%;overflow-y: auto;">

                    <form class=" mt10 pb5  " name="clauseForm" id="clauseForm"
                          data-des="此节点必需－用于识别输入表单的指令">

                        <header class="col-xs-12 mb10">
                            <i class="fa fa-cog" aria-hidden="true"></i>
                            <label>{{$l('条款信息')}}</label>
                        </header>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>年度</span></label>
                                <input type="text" class="form-control radius3"
                                       date-time-picker="" data-date-format="yyyy"
                                       data-start-view="4" data-min-view="4" data-max-view="4" required
                                       ng-model="clause.year">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>创建人</span></label>
                                <input type="text" required class="form-control radius3" name="createdByName"
                                       ng-readonly="true"
                                       ng-model="clause.createdByName">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>创建日期</span></label>
                                <input type="text" disabled class="form-control radius3 input-xs"
                                       date-time-picker data-is-today="true" name="creationDate"
                                       data-date-format="yyyy-mm-dd"
                                       data-min-View="2" ng-model="clause.creationDate">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>审批通过时间</span></label>
                                <input type="text" class="form-control radius3" name="passDate" disabled
                                       ng-model="clause.passDate">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>版本号</span></label>
                                <input type="text" class="form-control radius3" name="businessVersion" disabled
                                       ng-model="clause.businessVersion">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>单据状态</span></label>
                                <div lookup-code="DS_STATUS" required="true" name="billStatus" disabled
                                     ng-model="clause.billStatus" ng-value="DS01"></div>

                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>版本生效时间</span></label>
                                <input type="text" required class="form-control radius3 input-xs"
                                       date-time-picker data-is-today="true" name="effectiveDate"
                                       data-date-format="yyyy-mm-dd"
                                       data-enddate="{{clause.expirationDat}}"
                                       data-min-View="2" ng-model="clause.effectiveDate"
                                       autocomplete="off">
                            </div>
                        </div>

                        <div class="form-group col-xs-6 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn"><span
                                        class="w100"><i class="red">*</i>版本失效时间</span></label>
                                <input type="text" required class="form-control radius3 input-xs"
                                       date-time-picker data-is-today="false" name="expirationDate"
                                       data-date-format="yyyy-mm-dd"
                                       data-stratdate="{{clause.effectiveDate}}"
                                       data-min-View="2" ng-model="clause.expirationDate"
                                       autocomplete="off">
                            </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>部门编码</span></label>
                                <input class="form-control radius3" ng-model="clause.deptCode" name="deptCode"
                                       readonly required type="text"/>
                                <span class="input-group-btn ng-scope">
                                    <button class="btn btn-default" ng-click="getDeptCode()" type="button">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>部门名称</span></label>
                                <input data-required-msg="部门名称" type="text" ng-model="clause.deptName"
                                       readonly class="form-control radius3">
                            </div>
                        </div>
                        <!--------------------- ./  输入表单  --->
                        <hr width="100%">
                        <!---------------------  / .按钮  --->
                        <div main-scroll-style id="clauseLeftId" class="col col-md-3 col-xs-3 p0 br"
                             data-des="此节点必需－用户计算滚动区域高度">
                            <div class="nicescroll-height  bg-white " ng-nicescroll
                                 nice-option="{cursorcolor: '#1e90c2',cursorwidth:5}" data-des="此节点必需-滚动内容及指令">
                                <ul sie-ztree="clauseTree" style="margin-bottom: 10px;" class="ztree pt10 pb10"
                                    id="clauseTree"
                                    data-url="{{treeUrl}}"
                                    data-params="{{treeParams}}"
                                    data-simpledata='{"enable":"false","idKey":"code","pIdKey":"pCode","rootPId":"0"}'
                                    data-keys='{"name":"clauseCn"}'
                                    data-page-rows="10000"
                                    data-expand-node="true"
                                    data-edit="false"
                                    data-node-click="clickNode"
                                    data-onload="SaveTree"
                                    data-callback-beforedrop="updateLevel"
                                >
                                </ul>
                            </div>
                        </div>

                        <div main-scroll-style id="clauseRightId" data-des="此节点必需－用户计算滚动区域高度">
                            <div class="nicescroll-height  bg-white " ng-nicescroll
                                 nice-option="{{niceOpction}}"
                                 data-des="此节点必需-滚动内容及指令">
                                <div style="height: 100%;">
                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>父名称</span></label>
                                            <input class="form-control radius3" name="clauseCnP" ng-model="clauseT.clauseCnP"
                                                   ng-readonly="true" type="text" ng-required="clauseT.orderNo.indexOf('.') != -1">
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" ng-click="selectPCode()"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>业务类型</span></label>
                                            <div lookup-code="CLAUSE_B_TYPE" ng-disabled="clause.flag" required="true"
                                                 data-callback="clauseBT" name="businessType"
                                                 ng-model="clauseT.businessType"></div>
                                        </div>
                                    </div>

                                    <div class="form-group  col-xs-4 col-md-4" style="    padding-bottom: 2px;">
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnDelClauseT()"><i class="fa fa-trash-o fa-lg"></i>删除
                                        </button>
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnNewClauseT()"
                                        ><i class="fa fa-plus">增加</i></button>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>收入方式</span></label>
                                            <div lookup-code="CLAUSE_INP" ng-disabled="clause.flag || clause.required "
                                                 ng-required="clause.disRequired" name="paymentMethod"
                                                 ng-model="clauseT.paymentMethod"></div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>是否生效</span></label>
                                            <div lookup-code="YN" required="true" ng-disabled="clause.flag"
                                                 name="status" ng-model="clauseT.status"></div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>排版序号</span></label>
                                            <input type="text" required class="form-control radius3" name="orderNo"
                                                   ng-model="clauseT.orderNo">
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100">条款编号</span></label>
                                            <input type="text" ng-disabled="clauseT.businessType==01"
                                                   class="form-control radius3" ng-model="clauseT.clauseCode"
                                                   name="clauseCode">
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>条款英文名</span></label>
                                            <input type="text" class="form-control radius3" ng-model="clauseT.clauseEn"
                                                   name="clauseEn" required>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>条款中文名</span></label>
                                            <input type="text" class="form-control radius3" ng-model="clauseT.clauseCn"
                                                   name="clauseCn" required>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100">是否底层</span></label>
                                            <div lookup-code="YN" name="isLeaf" ng-model="clauseT.isLeaf"
                                                 ng-disabled="clause.flag"></div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span
                                                    class="w100"><i class="red">*</i>是否同层显示</span></label>
                                            <div lookup-code="YN" required="true" ng-disabled="clause.flag"
                                                 name="isHierarchyShow" ng-model="clauseT.isHierarchyShow"></div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">对应历史序号</span>
                                            </label>
                                            <input type="text" ng-disabled="clause.flag" class="form-control radius3" name="oldOrderNo"
                                                   ng-model="clauseT.oldOrderNo">
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">类别</span>
                                            </label>
                                            <div lookup-code="TERM_CATEGORY" ng-disabled="clause.flag" required="true"
                                                 name="termCategory" ng-model="clauseT.termCategory">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">是否全局</span>
                                            </label>
                                            <div lookup-code="YN" ng-disabled="clause.flag || clause.disRequired"
                                                 name="isGlobalVariable" data-callback="isGlobalVariable"
                                                 ng-model="clauseT.isGlobalVariable">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">全局值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="globalValue" ng-model="clauseT.globalValue" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" data-toggle="modal" data-target="#globalValue"
                                                        ng-disabled="clause.flag || clauseT.isGlobalVariable !='1' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">局部值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="clauseIdj" ng-model="clauseTX.clauseIdj" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" ng-click="xClauseCall('expressionValue')"
                                                        ng-disabled="clause.flag || clauseT.isGlobalVariable !='0' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>


                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">符号</span>
                                            </label>
                                            <div lookup-code="CLAUSE_SIGN1"
                                                 ng-disabled="clause.flag || clauseT.isGlobalVariable !='0'" name="sign"
                                                 ng-model="clauseT.sign" data-callback="clauseSignGet" ng-trim="true">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnClauseClear()">
                                            <i class="fa fa-adjust">清除</i>
                                        </button>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12" ng-show="clauseT.isGlobalVariable =='0'">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">解析</span>
                                            </label>
                                            <textarea  disabled
                                                      class="form-control radius3" ng-model="clauseT.expressionValueText"
                                                      name="expressionValueText"
                                                      style="height:60px;">
                                        </textarea>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">参考表达式</span>
                                            </label>
                                            <textarea  disabled ng-required="clauseT.isGlobalVariable"
                                                      class="form-control radius3" ng-model="clauseT.expressionValue"
                                                      name="expressionValue" ng-trim="true"
                                                      style="height:60px;">
                                        </textarea>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">是否全局</span>
                                            </label>
                                            <div lookup-code="YN" ng-disabled="clause.flag || clause.disRequired"
                                                 name="isGlobalTta" data-callback="isGlobalVariableTta"
                                                 ng-model="clauseT.isGlobalTta">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">全局值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="globalValueTta" ng-model="clauseT.globalValueTta" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" data-toggle="modal" data-target="#globalValueTta"
                                                        ng-disabled="clause.flag || clauseT.isGlobalTta !='1' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">局部值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="clauseIdj" ng-model="clauseTX.clauseIdj" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" ng-click="xClauseCall('expressionValueTta')"
                                                        ng-disabled="clause.flag || clauseT.isGlobalTta !='0' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">符号</span>
                                            </label>
                                            <div lookup-code="CLAUSE_SIGN1"
                                                 ng-disabled="clause.flag || clauseT.isGlobalTta !='0'|| clause.disRequired"
                                                 name="sign" ng-model="clauseT.sign" data-callback="clauseSignGetTta"
                                                 ng-trim="true">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnClauseClearTta()">
                                            <i class="fa fa-adjust">清除</i>
                                        </button>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12" ng-show="clauseT.isGlobalTta =='0'">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">解析</span>
                                            </label>
                                            <textarea  disabled
                                                      class="form-control radius3" ng-model="clauseT.expressionValueTtaText"
                                                      name="expressionValueTtaText"
                                                      style="height:60px;">
                                        </textarea>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">TTA表达式</span>
                                            </label>
                                            <textarea  disabled ng-required="clauseT.isGlobalTta"
                                                      class="form-control radius3" ng-model="clauseT.expressionValueTta"
                                                      name="expressionValueTta" ng-trim="true"
                                                      style="height:60px;">
                                            </textarea>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">是否全局</span>
                                            </label>
                                            <div lookup-code="YN" ng-disabled="clause.flag || clause.disRequired"
                                                 name="isGlobalFee" data-callback="isGlobalVariableFee"
                                                 ng-model="clauseT.isGlobalFee">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4" style="margin-right: 25%;">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">全局值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="globalValueFee" ng-model="clauseT.globalValueFee" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" data-toggle="modal" data-target="#globalValueFee"
                                                        ng-disabled="clause.flag || clauseT.isGlobalFee !='1' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>


                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">局部值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="clauseIdj" ng-model="clauseTX.clauseIdj" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" ng-click="xClauseCall('expressionValueFee')"
                                                        ng-disabled="clause.flag || clauseT.isGlobalFee !='0' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                                </span>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">符号</span>
                                            </label>
                                            <div lookup-code="CLAUSE_SIGN1"
                                                 ng-disabled="clause.flag || clauseT.isGlobalFee !='0'" name="sign"
                                                 ng-model="clauseT.sign" data-callback="clauseSignGetFee"
                                                 ng-trim="true">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnClauseClearFee()">
                                            <i class="fa fa-adjust">清除</i>
                                        </button>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12" ng-show="clauseT.isGlobalFee =='0'">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">解析</span>
                                            </label>
                                            <textarea  disabled
                                                      class="form-control radius3" ng-model="clauseT.expressionValueFeeText"
                                                      name="expressionValueFeeText"
                                                      style="height:60px;">
                                        </textarea>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12 col-md-12">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">费用条件表达式</span>
                                            </label>
                                            <textarea  disabled ng-required="clauseT.isGlobalFee"
                                                      class="form-control radius3" ng-model="clauseT.expressionValueFee"
                                                      name="expressionValueFee" ng-trim="true"
                                                      style="height:60px;">
                                                </textarea>
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-4 col-md-4">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">是否默认</span>
                                            </label>
                                            <div lookup-code="TERMS_OUTPUT_MODEL" ng-disabled="clause.flag || clause.disRequired"
                                                 name="isDefault"  ng-required="clauseT.businessType==02"  data-callback="isDefaultFun"
                                                 ng-model="clauseT.isDefault">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-4 col-md-4" >
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn"><span class="w100">全局值</span></label>
                                            <input type="text" class="form-control radius3 readonly-white"
                                                   name="globalValueCon" ng-model="clauseT.globalValueCon" readonly>
                                            <span class="input-group-btn ng-scope">
                                                <button type="button" data-toggle="modal" data-target="#globalValueCon"
                                                        ng-disabled="clause.flag || clauseT.isDefault !='3' || clause.disRequired"
                                                        class="btn btn-default"><i class="fa fa-search"></i></button>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                ng-click="btnClauseClearCon()">
                                            <i class="fa fa-adjust">清除</i>
                                        </button>
                                    </div>

                                    <div class="form-group col-xs-12 col-md-12">
                                        <div class="input-group input-group-xs">
                                            <label class="input-group-addon bn">
                                                <span class="w100">条款表达式</span>
                                            </label>
                                            <textarea  disabled ng-required="clauseT.isDefault == '3'"
                                                      class="form-control radius3" ng-model="clauseT.expressionValueCon"
                                                      name="expressionValueCon" ng-trim="true"
                                                      style="height:60px;">
                                                </textarea>
                                        </div>
                                    </div>

                                    <div class=" col-xs-12 col-md-12">
                                        <div>
                                            <label style="margin-left: 10px"><i class="fa fa-list-alt"></i>收取方式</label>
                                            <div permission-buttons="btnNew,btnDel"
                                                 class="btn-group btn-group-xs ml5 pull-right">
                                                <button type="button" class="btn btn-default btn-xs "
                                                        ng-disabled="dataTableCo.selectRow==undefined || clause.flag"
                                                        ng-click="btnDel('L')"><i class="fa fa-trash-o fa-lg"></i>删除
                                                </button>
                                                <button type="button" class="btn btn-default btn-xs"
                                                        ng-disabled="clause.flag" ng-click="btnNew()"><i
                                                        class="fa fa-plus">增加</i></button>
                                            </div>
                                        </div>

                                        <div class="data-table">
                                            <table
                                                    class="table table-bordered table-hover table-condensed"
                                                    id="dataTableCoId">
                                                <thead class="bg-gray-white">
                                                <tr class="text-center">
                                                    <th width="12%">单位</th>
                                                    <th width="10%">标准值</th>
                                                    <th width="10%">主从</th>
                                                    <th width="12%">父级</th>
                                                    <th width="46%">规则</th>
                                                    <th width="10%">是否启用</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr class="text-center" ng-repeat="row in dataTableCo"
                                                    ng-class="{'active':dataTableCo.selectRow==$index}"
                                                    ng-click="dataTableCo.selectRow=$index">
                                                    <td><input class="form-control input-xs" ng-disabled="clause.flag"
                                                               required ng-model="row.unitValue"
                                                               ng-change="unitValueChange(row)"
                                                               name="{{'unitValue'+$index}}"></td>
                                                    <td><input type="text" ng-disabled="clause.flag"
                                                               class="form-control input-xs" placeholder="不超过两位小数"
                                                               name="{{'standardValue'+$index}}"
                                                               ng-model="row.standardValue" numberd>
                                                    </td>
                                                    <td>
                                                        <div class="input-group input-group-xs">
                                                            <div lookup-code="YES_OR_NO" ng-disabled="clause.flag"
                                                                 required name="{{'isMajor'+$index}}"
                                                                 data-paramcallback="dataTableCoIsMajor"
                                                                 data-row="{{dataTableCo.indexOf(row)}}"
                                                                 ng-model="row.isMajor"></div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group input-group-xs"
                                                             style="    width: 100%;">
                                                            <select class="form-control radius3" id="{{'dataTableCo_'+row.$$hashKey}}"
                                                                     ng-model="row.parentValue" name="{{'parentValue'+$index}}"
                                                                     ng-change="unitListChange(row,unitList)"
                                                                     ng-required="row.isMajor == 'N'"
                                                                     ng-disabled="row.isMajor == 'Y' || clause.flag">
                                                                <option value="">{{firstText}}</option>
                                                                <option
                                                                        ng-repeat="iterm in unitList"
                                                                        value="{{iterm.unitValue}}">{{iterm.unitValue}}</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group input-group-xs">
                                                            <div lookup-code="TTA_TERMS_VALUE_CONTROL" ng-disabled="clause.flag"
                                                                 name="{{'rule'+$index}}" title="{{row.rule}}"
                                                                 ng-model="row.rule"></div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group input-group-xs">
                                                            <div lookup-code="YES_OR_NO" ng-disabled="clause.flag"
                                                                 required name="{{'isEnable'+$index}}"
                                                                 ng-model="row.isEnable"></div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </form>
                </div>


                <div ng-if="!urlParams.businessKey" ng-show="tabAction== 'opinion'" role="tabpanel" class="tab-pane "
                     id="opinion"
                     style="border: 0;width:100%;height: 100%; overflow: hidden;position: relative;">
                    <div id="processImg" style="width: 100%;height:100%; overflow: auto;">流程图加载中，请稍候...</div>
                </div>
            </div>
        </div>


        <div lov-list='clauseCopy' role="dialog" id="clauseOfOLd" ng-model="clauseT.clauseOldMpdel" class=""
             data-url="findTtaTermsFrameHeaderPagination"
             data-auto-request="false"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-callback="selectClauseOld"
             data-checked-type="radio"
             data-dynamic-params="{clauseCopy:'copy',billStatus:'DS03'}"
             data-keys="{'key':'teamFrameworkId','value':'year','name':'年份'}"
             data-other-column="[{'name':'状态',key:'billStatus'},{'name':'审批通过时间',key:'passDate'}]"
             data-show-index="true"
             data-search-key="[{'key':'year','placeholder':'请输入年份'}]"
        >
        </div>

        <div lov-list='globalValue' role="dialog" id="globalValue" ng-model="clauseT.globalValueA" class=""
             data-url="findQueryRulePag"
             data-auto-request="false"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-callback="selectClauseIsGlobal"
             data-checked-type="radio"
             data-dynamic-params="{businessType:'2'}"
             data-keys="{'key':'ruleId','value':'ruleName','name':'规则名称'}"
             data-other-column="[{'name':'规则SQL',key:'sqlValues'},{'name':'备注',key:'remarks'}]"
             data-show-index="true"
             data-search-key="[{'key':'ruleName','placeholder':'规则名称'}]"
        >
        </div>


        <div lov-list='globalValueTta' role="dialog" id="globalValueTta" ng-model="clauseT.globalValueTtaA" class=""
             data-url="findQueryRulePag"
             data-auto-request="false"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-callback="selectClauseIsGlobalTta"
             data-checked-type="radio"
             data-dynamic-params="{businessType:'2'}"
             data-keys="{'key':'ruleId','value':'ruleName','name':'规则名称'}"
             data-other-column="[{'name':'规则SQL',key:'sqlValues'},{'name':'备注',key:'remarks'}]"
             data-show-index="true"
             data-search-key="[{'key':'ruleName','placeholder':'规则名称'}]"
        >
        </div>

        <div lov-list='globalValueFee' role="dialog" id="globalValueFee" ng-model="clauseT.globalValueFeeA" class=""
             data-url="findQueryRulePag"
             data-auto-request="false"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-callback="selectClauseIsGlobalFee"
             data-checked-type="radio"
             data-dynamic-params="{businessType:'2'}"
             data-keys="{'key':'ruleId','value':'ruleName','name':'规则名称'}"
             data-other-column="[{'name':'规则SQL',key:'sqlValues'},{'name':'备注',key:'remarks'}]"
             data-show-index="true"
             data-search-key="[{'key':'ruleName','placeholder':'规则名称'}]"
        >
        </div>

        <div lov-list='globalValueCon' role="dialog" id="globalValueCon" ng-model="clauseT.globalValueConA" class=""
             data-url="findQueryRulePag"
             data-auto-request="false"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-callback="selectClauseIsGlobalCon"
             data-checked-type="radio"
             data-dynamic-params="{businessType:'3'}"
             data-keys="{'key':'ruleId','value':'ruleName','name':'规则名称'}"
             data-other-column="[{'name':'规则SQL',key:'sqlValues'},{'name':'备注',key:'remarks'}]"
             data-show-index="true"
             data-search-key="[{'key':'ruleName','placeholder':'规则名称'}]"
        >
        </div>

        <div lov-list="selectDept" role="dialog" data-title="选择部门信息" id="selectDeptId" ng-model="current.em"
             data-url="findDeptPagination"
             data-dynamic-params='{"flag": "findDept","departmentType":"20"}'
             data-callback="selectDeptReturn"
             data-auto-request="true"
             data-return-type="key"
             data-pagination="{'pageIndex':'1','pageRows':'5'}"
             data-checked-type="radio"
             data-keys="{'key':'departmentCode','value':'departmentCode','name':'部门编码'}"
             data-show-index="false"
             data-type="competitor"
             data-other-column="[{'name':'部门名称','key':'departmentName'}]"
             data-search-key="[{'key':'departmentCode','placeholder':'部门编码'},
                          {'key':'departmentName','placeholder':'部门名称'}]"
        >
        </div>


        <div class="modal fade" id="addClauseTreej" data-des="选择局部值" data-backdrop="static" tabindex="-1">
            <div class="modal-dialog " style="width: 600px">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close"
                                data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            选择局部值
                        </h4>
                    </div>
                    <form class="ngValid" name="funcMenuForm">
                        <div class="modal-body">
                            <div class="form-group col-xs-12 col-md-12">
                                <div style="height: 300px;overflow-y: auto;" class="">
                                    <ul class="ztree" id="clauseTreeZtree"></ul>
                                </div>
                            </div>
                            <div class="cb"></div>
                        </div>

                        <div class="modal-footer ">
                            <div style="text-align:center">
                                <button style="" type="button" class="btn btn-default" data-dismiss="modal">取消
                                </button>
                                <button ng-click="savePart()" validate-form-btn="" data-validate-form="funcMenuForm"
                                        id="saveButton" class="btn btn-primary mr10">确定
                                </button>
                            </div>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>


        <div class="modal fade" id="selectPcodeId" data-des="选择上级" data-backdrop="static" tabindex="-1">
            <div class="modal-dialog " style="width: 600px">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close"
                                data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            选择上级
                        </h4>
                    </div>
                    <form class="ngValid" name="funcMenuForm">
                        <div class="modal-body">
                            <div class="form-group col-xs-12 col-md-12">
                                <div style="height: 300px;overflow-y: auto;" class="">
                                    <ul class="ztree" id="clauseTreePCodeZtree"></ul>
                                </div>
                            </div>
                            <div class="cb"></div>
                        </div>

                        <div class="modal-footer ">
                            <div style="text-align:center">
                                <button style="" type="button" class="btn btn-default" data-dismiss="modal">取消
                                </button>
                                <button ng-click="savePCode()" validate-form-btn="" data-validate-form="funcMenuForm"
                                        id="saveButton" class="btn btn-primary mr10">确定
                                </button>
                            </div>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>


    </div>


</div>
