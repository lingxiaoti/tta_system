<div class="bigdata" ng-controller="ttaSaStdTplDefHeaderCtrl" >


    <!--------------------- 按钮--->
    <div class="bg-gray-white p5">
        <div class=" pull-right ml10" >
            <div class="btn-group btn-group-xs ml10" permission-buttons="btnNew,btnSave">
                <button class="btn btn-default" type="button" ng-click="btnNew()"  >
                    <i class="fa fa-plus">{{ $l('新增')}}</i>
                </button>
                <button class="btn btn-default" type="button" ng-click="btnSave(lineForm)">
                    <i class="fa fa-save" aria-hidden="true"></i>{{ $l('保存')}}
                </button>
            </div>
            <div class="btn-group btn-group-xs pull-right">
                <button class="btn btn-default" type="button" ng-click="btnDel()">
                    <i class="fa fa-trash-o">{{ $l('删除')}}</i>
                </button>
            </div>
        </div>
        <div class="btn-group btn-group-xs ">
            <button class="btn btn-primary" ng-click="fullWindow($event)"><i class="fa fa-square-o"></i>数据全屏
            </button>
        </div>
    </div>
    <!---------------------  / .按钮  --->
    <div data-des="此节点必需－用户计算滚动区域高度" main-scroll-style>
        <div class="nicescroll-height  bg-white " data-des="此节点必需-滚动内容及指令"
             ng-nicescroll
             nice-option="{{niceOpction}}">

            <!--------------------- 输入表单  --->

            <div class=" mt10 pb5  oh"
                 data-des="此节点必需－用于识别输入表单的指令">

                <form id="feedeptForm" name="feedeptForm">
                    <header class="col-xs-12 mb10">
                        <i aria-hidden="true" class="fa fa-cog"></i>
                        <span>标准信息</span>
                    </header>
                    <div class="row"></div>

                </form>
            </div>
            <div main-scroll-style id="ttaSaStdTplDefHeaderLeftId" class="col col-md-3 col-xs-3 p0 br"
                 data-des="此节点必需－用户计算滚动区域高度">
                <div class="nicescroll-height  bg-white " ng-nicescroll
                     nice-option="{cursorcolor: '#1e90c2',cursorwidth:5}" data-des="此节点必需-滚动内容及指令">
                    <ul class="ztree pt10 pb10" data-callback-beforedrop="updateLevel" data-edit="true" data-expand-node="true"
                        data-keys='{"name":"tplName"}'
                        data-node-click="treeClick"
                        data-page-rows="10000"
                        data-params="{{ treeParams }}"
                        data-simpledata='{"enable":"true","idKey":"saStdTplDefHeaderId","pIdKey":"parentId","rootPId":{{rootParentId}} }'
                        data-url="findTtaSaStdTplDefHeaderTree"
                        id="ttaSaStdTplDefHeaderTree"
                        sie-ztree="ttaSaStdTplDefHeaderTree"
                        style="margin-bottom: 10px;"
                    >
                    </ul>
                </div>
            </div>
            <div main-scroll-style id="ttaSaStdTplDefHeaderRightId" data-des="此节点必需－用户计算滚动区域高度">
                <div class="nicescroll-height  bg-white " ng-nicescroll
                     nice-option="{{niceOpction}}"
                     data-des="此节点必需-滚动内容及指令">
                    <div style="height: 100%;">
                        <form class=" " id="lineForm" name="lineForm">

                            <div class="form-group col-xs-6 col-md-6" style="margin-right: 40%;">
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn"><span class="w150"><i class="red">*</i>模板代号：</span></label>
                                    <input class="form-control radius3" ng-model="headerInfo.tplCode" name = "tplCode"
                                           required type="text" placeholder="请填写数字格式" to-change-number>
                                </div>
                            </div>

                            <div class="form-group col-xs-12 col-md-12" >
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn"><span class="w150"><i
                                            class="red">*</i>模板名称：</span></label>
                                    <input class="form-control radius3" ng-model="headerInfo.tplName" name = "tplName"
                                           required type="text">
                                </div>
                            </div>


                            <div class="form-group col-xs-6 col-md-6">

                                <div data-append-node='{"tplCode":"－－－顶层条款编号－－－","saStdTplDefHeaderId":"0"}'
                                     data-input-readonly="true"
                                     data-keys='{"name":"tplCode"}'
                                     data-label="父级："
                                     data-page-rows="10000"
                                     data-required="true"
                                     data-simpledata='{"enable":"true","idKey":"saStdTplDefHeaderId","pIdKey":"parentId"}'
                                     name="addNewTree"
                                     ng-key="headerInfo.parentId"
                                     ng-tree-data="zTreeData.treeData"
                                     ng-value="headerInfo.parentTplCode"
                                     data-label-css="w150"
                                     z-tree-select="addNewTree"
                                ></div>
                            </div>


                            <div class="form-group col-xs-6 col-md-6" style="margin-right: 45%;">
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn"><span class="w150"><i
                                            class="red">*</i>是否生效：</span></label>
                                    <div lookup-code="YES_OR_NO" name="isEnable" required
                                         ng-model="headerInfo.isEnable"></div>
                                </div>
                            </div>
                            <div class="form-group col-xs-12 col-md-12">
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn">
                                        <span class="w150">备注：</span>
                                    </label>
                                    <textarea class="form-control radius3" ng-model="headerInfo.remark" name="remark"  style="height:60px;">
                                    </textarea>
                                </div>
                            </div>
                            <div class="form-group col-xs-8 col-md-8">
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn"><span class="w150"><i
                                            class="red">*</i>word标准模板上传：</span></label>
                                    <input  ng-if="!headerInfo.sourceFileName" type="file" name="file" id="file" emms-file-upload="myFile">
                                    <span ng-if="headerInfo.sourceFileName">{{headerInfo.sourceFileName}}</span>
                                </div>
                            </div>
                            <div class="form-group  col-xs-4 col-md-4" style="    padding-bottom: 2px;">
                                <div class="btn-group btn-group-xs pull-right">
                                <button class="btn btn-primary pull-right" ng-click="upload($event,'sourceFileName','file','TTA_SA_STD_TPL_DEF_HEADER','fileId')">上传
                                </button>
                                <button class="btn btn-primary pull-right" ng-click="downFileEvent(headerInfo,'sourceFileName','file','TTA_SA_STD_TPL_DEF_HEADER','fileId')">下载查看
                                </button>
                                <button class="btn btn-primary pull-right" ng-click="delUploadFile(headerInfo,'sourceFileName','file','TTA_SA_STD_TPL_DEF_HEADER','fileId')">删除模板
                                </button>
                                </div>
                            </div>
                            <div class="form-group col-xs-8 col-md-8">
                                <div class="input-group input-group-xs">
                                    <label class="input-group-addon bn"><span class="w150"><i
                                            class="red">*</i>word参数模板上传：</span></label>
                                    <input  ng-if="!headerInfo.paramSourceFileName" type="file" name="fileValue" id="fileValue" emms-file-upload="myFileValue">
                                    <span ng-if="headerInfo.paramSourceFileName">{{headerInfo.paramSourceFileName}}</span>
                                </div>
                            </div>
                            <div class="form-group  col-xs-4 col-md-4" style="    padding-bottom: 2px;">
                                <div class="btn-group btn-group-xs pull-right">
                                    <button class="btn btn-primary pull-right" ng-click="upload($event,'paramSourceFileName','fileValue','TTA_SA_STD_TPL_DEF_HEADER_PARAM','paramFileId')">上传
                                    </button>
                                    <button class="btn btn-primary pull-right" ng-click="downFileEvent(headerInfo,'paramSourceFileName','fileValue','TTA_SA_STD_TPL_DEF_HEADER_PARAM','paramFileId')">下载查看
                                    </button>
                                    <button class="btn btn-primary pull-right" ng-click="delUploadFile(headerInfo,'paramSourceFileName','fileValue','TTA_SA_STD_TPL_DEF_HEADER_PARAM','paramFileId')">删除模板
                                    </button>
                                </div>
                            </div>
                            <div class=" col-xs-12 col-md-12">
                                <div>
                                    <label style="margin-left: 10px"><i class="fa fa-list-alt"></i> 字段信息：</label>
                                    <!--<button type="button" class="btn btn-default btn-xs pull-right" ng-click="btnSaveField()"><i class="fa fa-plus">保存</i></button>-->
                                    <button type="button" class="btn btn-default btn-xs pull-right"  ng-click="btnDelField()"><i class="fa fa-trash-o fa-lg"></i>删除</button>
                                    <button type="button" class="btn btn-default btn-xs pull-right"  ng-click="btnAdd()">引入字段</button>
                                </div>

                                <div base-data-table="ttaSaStdFieldCfgLineTable"
                                     data-auto-request='false'
                                     data-desc=""
                                     data-sort-all-result="true"
                                     data-checked-type="checkbox"
                                     data-keys="{'key':'saStdFieldCfgLineId','value':'saStdFieldCfgLineId'}"
                                     data-legend="[
                                    { 'value':'tplCode','name':'字段代号'},
						            {'value':'filedName','name':'字段中文名称'},
						            {'value':'isEnableName','name':'是否生效'}
						                ]"
                                     data-page-size="6"
                                     data-show-index="true"
                                     data-url="findTtaSaStdFieldCfgLinePagination"
                                     ng-params="ttaSaStdFieldCfgLineTableParams">
                                </div>
                            </div>
                            <div class=" col-xs-12 col-md-12">
                                <div>
                                    <label style="margin-left: 10px"><i class="fa fa-list-alt"></i>表格信息：</label>
                                </div>
                                <div class="form-group col-xs-3 col-md-3" >
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span class="w50">行数：</span></label>
                                        <input class="form-control radius3" ng-model="tableInfo.row" name = "row"
                                                type="text" ng-change="ttaSaTplTab()">
                                    </div>
                                </div>
                                <div class="form-group col-xs-3 col-md-3" >
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span class="w50">列数：</span></label>
                                        <input class="form-control radius3" ng-model="tableInfo.col" name = "col"
                                                type="text" ng-change="ttaSaTplTab()">
                                    </div>
                                </div>
                                <div class="form-group  col-xs-6 col-md-6" style="padding-right: 0px;">
                                    <div class="btn-group btn-group-xs pull-right">
                                        <button type="button" class="btn btn-default btn-xs pull-right" ng-click="btnSaveTable()"><i class="fa fa-plus">保存</i></button>
                                    </div>
                                </div>
                                <div class="form-group col-xs-12 col-md-12" >
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn"><span class="w50">当前单元格：</span></label>
                                        <input class="form-control radius3" ng-model="headerInfo.curentRow.pointValue"
                                                type="text">
                                    </div>
                                </div>
                                <div class="data-table" style="margin-top: 30px;">
                                    <table
                                            class="table table-bordered table-hover table-condensed"
                                            id="dataTableCoId">
                                        <thead class="bg-gray-white">
                                        <tr class="text-center">
                                            <th ng-repeat="row in ttaSaTplTabLineHeaderTable track by $index ">{{row}}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="text-center" ng-repeat="row in tableInfo.table track by $index"
                                            ng-class="{'active':dataTableCo.selectRow==$index}"
                                            ng-click="dataTableCo.selectRow=$index">
                                            <td ng-repeat="info in row track by $index" style="min-width:100px">
                                                <input type="text" class="form-control input-xs"
                                                       ng-model="info.pointValue" ng-click="rowClick(info)">
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
            <!------------------ 树状模式end --------------->


        </div>
    </div>
    <div lov-list="selectField" role="dialog" data-title="选择字段" id="selectFieldId" ng-model="current.em"
         data-url="findTtaSaStdTplFieldCfgPagination"
         data-dynamic-params='{"isEnable":"Y"}'
         data-callback="selectFieldReturn"
         data-auto-request="true"
         data-return-type="key"
         data-pagination="{'pageIndex':'1','pageRows':'5'}"
         data-checked-type="checkbox"
         data-keys="{'key':'saStdTplFieldCfgId','value':'saStdTplFieldCfgId',hide:'true'}"
         data-show-index="false"
         data-type="competitor"
         data-other-column="[

         {'name':'字段中文名称','key':'filedName'},
         {'name':'字段类型','key':'filedTypeName'},
         {'name':'数据字典','key':'dicCode'},
         {'name':'是否生效','key':'isEnableName'}]"
         data-search-key="[{'key':'filedName','placeholder':'字段中文名称'}]"
    >
    </div>
</div>