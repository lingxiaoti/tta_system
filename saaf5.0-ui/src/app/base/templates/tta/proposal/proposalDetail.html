<div class="bigdata" ng-controller="proposalDetailCtrl">
    <div data-api-get="proposalFindById"
         data-api-post="proposalSave"
         data-api-update="proposalSave"
         id="processForm">
    </div>
    <style type="text/css">
        th {
            text-align: center;
        }
        /*************anlysis模块 start**************/


        @media print {
            #dataTable input {
                height: 20px;
            }

            #dataTable {
                text-align: center;
                font: 21px Helvetica Neue,Helvetica,PingFang SC,Tahoma,Arial,sans-serif;
                border: 3px solid #000000 !important;
            }

            #dataTable > thead > tr > th,
            #dataTable > tbody > tr > th,
            #dataTable > tfoot > tr > th,
            #dataTable > thead > tr > td,
            #dataTable > tbody > tr > td,
            #dataTable > tfoot > tr > td {
                padding: 0px;
            }

            #analysisDataTableId {
                text-align: center;
                font: 15px Helvetica Neue,Helvetica,PingFang SC,Tahoma,Arial,sans-serif;
                border: 3px solid #000000 !important;
            }

            #analysisDataTableId > tbody > tr > td{
                text-align: center;
            }

            #anlysis_new_1 th {
                border: 0px solid white !important;
            }

            #anlysis_new_2 th {
                border: 0px solid white !important;
            }

            #analysisDataTableId input {
                height: 20px;
            }

            #analysisDataTableId th, #analysisDataTableId td {
                white-space: nowrap;
            }

            #analysisDataTableId > thead > tr > th,
            #analysisDataTableId > tbody > tr > th,
            #analysisDataTableId > tfoot > tr > th,
            #analysisDataTableId > thead > tr > td,
            #analysisDataTableId > tbody > tr > td,
            #analysisDataTableId > tfoot > tr > td {
                padding: 5px;
            }

        }
        /**************anlysis模块 end**********/


        /*@media print {
            @page {
                size: A4 portrait; //正向打印
                size: A4 landscape; //横向打印
            }
            #printTradeId {
                width: 188%;
                transform: scale(0.53);
                -webkit-transform-origin-x: 0;
                -webkit-transform-origin-y: 0;
                overflow-y: hidden;
                overflow-x: hidden;
            }
       }*/

        div {
            font-family: 微软雅黑;
        }

        .spanBold {
            font-weight: bold;
            margin: 5px;
        }

        .divTable {
            float: left;
            width: 49%;
            min-height: 1065px;
            border: 1px solid black;
        }

        .proposalReport {
            background-color: #1e90c2 !important;
        }

        .font {
            font-size: 12px;
        }
        .tdWidth {
            width: 115px;
        }
        .thWidthAndHeight{
            width:35%;
        }

        /* 如下为设置品牌计划颜色 start*/
        .brandHeadThColorAndActual {
            color: #fff;
            background-color: #808080;
        }

        .brandHeadThColorAndFuture {
            color: #fff;
            background-color: #4F6228;
        }

        .brandLineInfoColor {
            color: #fff;
            background-color:#919191;
        }

        .brandLineContentBrandInfo {
            background-color: #BFBFBF;
        }

        .brandLineContentActual {
            background-color: #EAEAEA;
        }
        .brandLineContentFuture {
            background-color: #D8E4BC;
        }
        /* 如下为设置品牌计划颜色 end*/

        .analysis-row-bg-1 {
            background-color: #F5FFFA !important;
        }

        .analysis-row-bg-2 {
            background-color: #D3FF93 !important
        }

        .analysis-row-bg-3 {
            background-color: #D8D8EB !important;
        }
        .analysis-row-font-weight {
            font-weight: bold !important;
        }

    </style>

    <div data-des="此节点必需－用户计算滚动区域高度" main-scroll-style>
        <div class="nicescroll-height  bg-white" data-des="此节点必需-滚动内容及指令"
             ng-nicescroll=""
             nice-option="{cursorcolor: '#009E96',cursorwidth:10,zindex:10,autohidemode:false}">
            <!--niceOpction  {{niceOpction}}-->

            <div class="col-xs-12 col-md-12 br p0">
                <ul class="nav nav-tabs" id="tab">
                    <li class="active" ng-click="tabChangeInfo('proposalHeader')">
                        <a data-toggle="tab" ng-href="#proposalHeader"><i class="fa fa-list-alt"></i>
                            <label>proposal信息</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('brandPln')">
                        <a data-toggle="tab" href="#brandPln"><i class="fa fa-list-alt"></i>
                            <label>品牌计划表</label></a>
                    </li>
                    <li ng-click="tabChangeInfo('ttaTerms')" ng-show="!controllTabShow.flag">
                        <a data-toggle="tab" href="#ttaTerms"><i class="fa fa-list-alt"></i>
                            <label>TTA TERMS</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('btnDeptFee')" ng-show="!controllTabShow.flag">
                        <a data-toggle="tab" href="#btnDeptFeeTarget"><i class="fa fa-list-alt"></i>
                            <label>部门协定标准</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('newbreedExtend')" ng-show="!controllTabShow.flag">
                        <a data-toggle="tab" href="#newbreedExtend"><i class="fa fa-list-alt"></i>
                            <label>NPP服务费</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('questionnaire')" ng-show="(contractParams.isTermsConfirm == 'Y' || params.isTermsConfirm == 'Y') && paramsA.isHiddenQuestion != 'Y'">
                        <a data-toggle="tab" href="#questionnaire"><i class="fa fa-list-alt"></i>
                            <label>问卷调查</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('ttaContractLine')"  ng-show="!controllTabShow.flag" >
                        <a data-toggle="tab" href="#ttaContractLine"><i class="fa fa-list-alt"></i>
                            <label> TTA Summary</label></a>
                    </li>

                   <!--<li ng-click="tabChangeInfo('termsAnalysis')">
                        <a data-toggle="tab" href="#termsAnalysis"><i class="fa fa-list-alt"></i>
                            <label> TermsAnalysis</label></a>
                    </li>-->

                    <!--hmb注释 测试环境可放开测试,正式环境需要注释-->
                    <li ng-click="tabChangeInfo('termsNewAnalysis')">
                        <a data-toggle="tab" href="#termsNewAnalysis"><i class="fa fa-list-alt"></i>
                            <label> TermsAnalysis</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('termsComparision')"  ng-show="contractParams.isTermsConfirm == 'Y' || params.isTermsConfirm == 'Y'">
                        <a data-toggle="tab" href="#termsComparision"><i class="fa fa-list-alt"></i>
                            <label>TTA Terms Comparision(TY vs LY)</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('tradeClause')"  ng-show="contractParams.isTermsConfirm == 'Y' || params.isTermsConfirm == 'Y'">
                        <a data-toggle="tab" href="#tradeClause"><i class="fa fa-list-alt"></i>
                            <label>贸易条款</label></a>
                    </li>

                    <li ng-click="tabChangeInfo('ttaDeptFeeReport')">
                        <a data-toggle="tab" href="#ttaDeptFeeReport"><i class="fa fa-list-alt"></i>
                            <label> 贸易协议</label></a>
                    </li>

                    <!-- <li  ng-if="!urlParams.businessKey" ng-show="tabAction== 'opnProcess'"  role="presentation" ng-click="tabChangeInfo('opnProcess')">
                         <a href="#opnProcess" aria-controls="opnProcess" role="tab" data-toggle="tab">流程图</a>
                     </li>-->
                    <li  ng-if="!urlParams.businessKey"  role="presentation" ng-click="tabChangeInfo('opnProcess')">
                        <a data-toggle="tab" href="#opnProcess"><i class="fa fa-list-alt"></i>
                            <label> 流程图</label></a>
                    </li>
                    <li  ng-if="!urlParams.businessKey" ng-show="tabAction=='opnProcess'" style=" width: 280px; margin-left: 30px; margin-top: 7px;">
                        <ul>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #cc0033;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">未接收</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #ff6600;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">办理中</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #339933;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">已办结</span>
                            </li>
                            <li style="list-style-type: square;float: left;font-size: 20px;color: #666666;margin-right: 30px;text-indent: -7px;">
                                <span style="font-size: 14px;">预设步骤</span>
                            </li>
                        </ul>
                    </li>

                </ul>
                <div class="tab-content" id="tabContent">


                    <div class="tab-pane fade in active col-md-12" id="proposalHeader">

                        <!--------------------- 按钮--->
                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10" id="buttonProposal">

                                <div class="btn-group btn-group-xs">
                                    <button class="btn btn-default" data-validate-form="proposalForm"
                                            permission-btn="btnSave"></button>
                                    <button class="btn btn-default" data-validate-form="proposalForm"
                                            ng-click="submitApproval(ttaContractLineForm.$invalid)"
                                            permission-btn="submitApproval"></button>
                                </div>
                                <div class="btn-group btn-group-xs " permission-buttons="btnChange,btnCutVersion">

                                </div>
                                <button class="btn btn-default btn-xs" name="proposalUpdateVendorName"
                                        permission-btn="GXGYSMC"></button>

                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                                <!--hmb注释,等上正式环境再放开-->
                               <!-- <button name="printButton" class="btn btn-xs btn-primary fa fa-download pull-right" ng-click="selectPdfAll()"
                                        type="button">成册PDF查看
                                </button>-->
                                <button name="printButton" class="btn btn-xs btn-primary fa fa-download pull-right" ng-click="printPdfAll()"
                                        type="button">成册PDF生成
                                </button>
                            </div>
                        </div>
                        <!---------------------  / .按钮  --->


                        <!--------------------- 输入表单  --->

                        <div class=" mt10 pb5  oh"
                             data-des="此节点必需－用于识别输入表单的指令">

                            <form id="proposalForm" name="proposalForm">

                                <!--待审批页面，流程参数需要用到该参数-->
                                <input class="form-control radius3" style="display: none;" name="propcessFcsPurchse" id="propcessFcsPurchse"
                                       ng-model="params.fcsPurchse" type="text">

                                <input class="form-control radius3"  name="startUserId" id="startUserId" style="display: none;"
                                       ng-model="params.startUserId" type="text">

                                <input class="form-control radius3"  name="majorDeptCode" id="majorDeptCode" style="display: none;"
                                       ng-model="params.majorDeptCode" type="text">


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">单据号：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="orderNbr"
                                               ng-model="params.orderNbr" type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">Proposal编号：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="proposalNbr"
                                               ng-model="params.proposalNbr" type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red">* </i>供应商编码：</span></label>
                                        <input class="form-control radius3" disabled name="vendorNbr"
                                               ng-model="params.vendorNbr" required type="text">
                                        <span class="input-group-btn ng-scope">
                                            <button class="btn btn-default" ng-click="getSupplierCode()" type="button">
                                                <i class="fa fa-search"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red">* </i>供应商名称：</span></label>
                                        <input class="form-control radius3" disabled
                                               name="vendorName" ng-model="params.vendorName" required type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red">* </i>Proposal年度：</span>
                                        </label>
                                        <input class="form-control radius3" data-date-format="yyyy"
                                               data-max-view="4" data-min-view="4" data-start-view="4"
                                               date-time-picker="" name="proposalYear" ng-model="params.proposalYear "
                                               required
                                               ng-blur = "paramsProposalYearFun()"
                                               type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">是否跨部门标识</span>
                                        </label>
                                        <input class=" radius3" disabled name="isTransdepart" ng-false-value="'N'"
                                               ng-model="params.isTransdepart" ng-true-value="'Y'"
                                               type="checkbox">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3"  ng-if="false">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">新品收款方式</span>
                                        </label>
                                        <div lookup-code="NEW_PAYMENT" name="newPaymentMethod"
                                             ng-model="params.newPaymentMethod"
                                        ></div>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red">* </i>销售方式：</span>
                                        </label>
                                        <div  lookup-code="SALE_WAY"
                                              name="paramsSaleType" required
                                              ng-model="params.saleType"
                                        ></div>
                                    </div>
                                </div>

                                <!--<div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">品牌计划调整比例</span>
                                        </label>
                                        <input class="form-control radius3" name="plnAdjustScale"
                                               ng-model="params.plnAdjustScale"
                                               type="text">
                                    </div>
                                </div>-->


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">Cross-year是否跨年</span>
                                        </label>
                                        <input class=" radius3" name="isCrossYear" ng-false-value="'N'"
                                               ng-model="params.isCrossYear"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red ">*</i>有效日期从</span></label>
                                        <input class="form-control radius3" data-date-format="yyyy-mm-dd"
                                               data-enddate="{{params.endDate}}" data-min-View="2" data-start-view="2"
                                               data-stratdate="{{params.proposalYear + '-01-01'}}"
                                               date-time-picker=""
                                               name="beginDate"
                                               ng-model="params.beginDate "
                                               required type="text">
                                    </div>
                                </div>
                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red ">*</i>到</span></label>
                                        <input class="form-control radius3" data-date-format="yyyy-mm-dd"
                                               data-min-View="2"
                                               data-stratdate="{{params.beginDate}}" date-time-picker=""
                                               disable-valid-styling="true"
                                               name="endDate"
                                               ng-model="params.endDate "
                                               required type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">制单人：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="createdName"
                                               ng-model="params.createdName" type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">制单日期：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="creationDate"
                                               ng-model="params.creationDate" type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">主部门：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="majorDeptDesc"
                                               ng-model="params.majorDeptDesc" type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">版本号：</span>
                                        </label>
                                        <input class="form-control radius3" disabled
                                               name="versionCode" ng-model="params.versionCode" type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"> <i class="red">*</i>单据状态：</span>
                                        </label>

                                        <div data-required="true" disabled lookup-code="PROPOSAL_STATUS"
                                             name="status"
                                             ng-model="params.status"
                                             required></div>
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">审批通过日期：</span>
                                        </label>
                                        <input class="form-control radius3" disabled name="approveDate"
                                               ng-model="params.approveDate" type="text">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150"><i class="red">*</i>New or Existing：</span>
                                        </label>
                                        <div lookup-code="NEW_OR_EXISTING"
                                             name="newOrExisting"  data-callback="newOrExistingFunc"
                                             ng-model="params.newOrExisting" required ></div>
                                    </div>
                                </div>
                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">历史单据号：</span></label>
                                        <input class="form-control radius3" disabled name="vendorNbr"
                                               ng-model="params.lastYearOrderNo"  type="text">
                                        <span class="input-group-btn ng-scope">
                                            <button class="btn btn-default" ng-click="getLastYearOderNo()" type="button">
                                                <i class="fa fa-search"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">历史供应商编码：</span></label>
                                        <input class="form-control radius3" disabled
                                               name="vendorName" ng-model="params.lastYearVendorCode"  type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">历史供应商名称：</span></label>
                                        <input class="form-control radius3" disabled
                                               name="vendorName" ng-model="params.lastYearVendorName"  type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3" id="isSkipApproveDiv" ng-show="isShowFlag">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">是否需要GM审批</span>
                                        </label>
                                        <input class=" radius3" name="isSkipApprove" ng-false-value="'N'" id="isSkipApprove"
                                               ng-model="params.isSkipApprove"
                                               ng-true-value="'Y'" type="checkbox" ng-change="isSkipApproveFun()">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">品牌计划是否确认</span>
                                        </label>
                                        <input class=" radius3" disabled name="isPlnConfirm" ng-false-value="'N'"
                                               ng-model="params.isPlnConfirm"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">TTA Terms是否确认</span>
                                        </label>
                                        <input class=" radius3" disabled name="isTermsConfirm" ng-false-value="'N'"
                                               ng-model="params.isTermsConfirm"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">部门协定标准</span>
                                        </label>
                                        <input class=" radius3" disabled name="isDepartConfirm" ng-false-value="'N'"
                                               ng-model="params.isDepartConfirm"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">新品种推广服务费</span>
                                        </label>
                                        <input class=" radius3" disabled name="isNewConfirm" ng-false-value="'N'"
                                               ng-model="params.isNewConfirm"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">问卷是否确认</span>
                                        </label>
                                        <input class=" radius3" disabled name="isQuestConfirm" ng-false-value="'N'"
                                               ng-model="params.isQuestConfirm"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w150">是否是补录单</span>
                                        </label>
                                        <input class=" radius3" name="isCollection" ng-false-value="'N'"
                                               ng-model="params.isCollection"
                                               ng-true-value="'Y'" type="checkbox">
                                    </div>
                                </div>

                               <div class="form-group col-xs-8 col-md-9">
                                     <div class="input-group input-group-xs">
                                         <label class="input-group-addon bn">
                                             <span class="w150">备注</span>
                                         </label>
                                         <textarea class="form-control radius3" name="remark" ng-disabled="userData.userType != '45'"
                                                   ng-model="params.remark"
                                                   style="height:60px;background-color:#fff;">
                                         </textarea>
                                     </div>
                                 </div>

                                <div class="row"></div>
                            </form>
                        </div>
                        <!--表单结束-->
                    </div>
                    <!--proposaltab结束 -->


                    <div class="tab-pane fade in col-md-12" id="brandPln">


                        <!--------------------- 按钮--->
                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10">
                                <button type="button" ng-click="brandBtnPrint()" class="btn btn-default btn-xs" ng-show="false">
                                    <i class="fa fa-pencil">打印</i>
                                </button>

                                <button  class="btn btn-default btn-xs"  ng-disabled="params.status == 'C'" ng-click="brandImportButton()" ><i class="fa fa-upload"></i>导入</button>

                                <button type="button" ng-click="brandBtnExport()" class="btn btn-default btn-xs" name="printButton" id="brandExportId">
                                    <i class="fa fa-pencil">导出</i>
                                </button>

                                <button class="btn btn-default btn-xs" id="saveBrandPlnL2" ng-click="saveBrandPlnL(brandPlnForm,brandPlnFormRow)"
                                        ng-show="!showinfoButton" type="button"
                                >
                                    <i class="fa fa-save">保存</i>
                                </button>

                                <button class="btn btn-default btn-xs" id="confirmBrandPlnH"
                                        ng-click="confirmBrandPlnH(brandPlnForm,brandPlnFormRow)"
                                        ng-show="!showinfoButton" type="button"
                                >
                                    <i class="fa fa-check">确认</i>
                                </button>
                                <!--ng-disabled = "!showinfo"-->
                                <button class="btn btn-default btn-xs" id="CancelConfirmBrandPlnH"
                                        ng-click="CancelConfirmBrandPlnH()"
                                        ng-show="showinfoButton" type="button"
                                >
                                    <i class="fa fa-arrows-h">取消确认</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="CountBrandPlnH" ng-click="runCountBrandPlnHFun()"
                                        ng-show="!showinfoButton" type="button"
                                >
                                    <i class="fa fa-exchange">计算</i>
                                </button>


                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>
                        <!---------------------  / .按钮  --->


                        <!--------------------- 输入表单  --->

                        <div class=" mt10 pb5  oh"
                             data-des="此节点必需－用于识别输入表单的指令">

                            <form id="brandPlnForm" name="brandPlnForm">


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100"><i class="red">* </i>年度：</span>
                                        </label>

                                        <input class="form-control radius3" data-date-format="yyyy"
                                               data-max-view="2" data-min-view="2" data-start-view="2"
                                               date-time-picker="" disabled ng-model="brandparams.yearCode " required
                                               type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100"> <i class="red">*</i>New or Existing：</span>
                                        </label>

                                        <div data-required="true" disabled
                                             lookup-code="NEW_OR_EXISTING"
                                             ng-model="brandparams.newOrExisting"
                                             required></div>
                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100"><i class="red">* </i>供应商编码：</span></label>
                                        <input class="form-control radius3" disabled
                                               ng-model="brandparams.vendorNbr" required type="text">

                                    </div>
                                </div>


                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100"><i class="red">* </i>供应商名称：</span></label>
                                        <input class="form-control radius3" disabled
                                               ng-model="brandparams.vendorName" required type="text">
                                    </div>
                                </div>

                                <div class="row"></div>


                                <div class="col-md-12">
                                    <div class="data-table">
                                        <div style="">
                                            <div class="" id="allTable" ng-nicescroll=""
                                                 nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                            >
                                                <table
                                                        class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                    <thead class="bg-gray-white">
                                                    <tr class="text-center">
                                                        <th colspan="3" ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">{{yearInfo.lastYear}} Actual</th>
                                                        <th colspan="5"  ng-if="brandparams.newOrExisting != 'New_Vendor' && userData.userType !='45'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                        <th colspan="3" ng-if="brandparams.newOrExisting == 'New_Vendor' && userData.userType !='45'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>

                                                        <th colspan="6"  ng-if="brandparams.newOrExisting != 'New_Vendor' && userData.userType =='45' && brandparams.isSplit != 'Y'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                        <th colspan="4" ng-if="brandparams.newOrExisting == 'New_Vendor' && userData.userType =='45'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                        <!--<th colspan="3">{{yearInfo.beforeYear}} Actual</th>-->
                                                        <th colspan="9"  ng-if="brandparams.newOrExisting != 'New_Vendor' && userData.userType =='45' && brandparams.isSplit == 'Y'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                    </tr>
                                                    <tr class="text-center">
                                                        <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Purchase <br>（PO Record）</th>
                                                        <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Sales</th>
                                                        <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Actual GP%</th>

                                                        <th ng-class="{'thWidthAndHeight':brandparams.newOrExisting == 'New_Vendor'}" class="brandHeadThColorAndFuture">F’cs Purchase <br>（PO Record）</th>
                                                        <th ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" ng-class="{'thWidthAndHeight':brandparams.newOrExisting == 'New_Vendor'}" class="brandHeadThColorAndFuture">拆后F’cs Purchase <br>（PO Record）</th>
                                                        <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndFuture">Purchase <br> Growth%</th>
                                                        <th ng-class="{'thWidthAndHeight':brandparams.newOrExisting == 'New_Vendor'}" class="brandHeadThColorAndFuture">F’cs Sales</th>
                                                        <th ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" ng-class="{'thWidthAndHeight':brandparams.newOrExisting == 'New_Vendor'}" class="brandHeadThColorAndFuture">拆后F’cs Sales</th>
                                                        <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndFuture">Sales <br> Growth%</th>
                                                        <th style="width: 100px" class="brandHeadThColorAndFuture">GP%</th>
                                                        <th ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" style="width: 100px" class="brandHeadThColorAndFuture">拆后GP%</th>
                                                        <th ng-if="userData.userType =='45'" style="width: 100px" class="brandHeadThColorAndFuture">Adjust_GP%</th>

                                                        <!--<th>Purchase（PO Record）</th>
                                                        <th>Sales</th>
                                                        <th>Actual GP%</th>-->
                                                    </tr>
                                                    </thead>

                                                    <tbody ng-nicescroll="" ng-style="tableStyle">
                                                    <tr class="text-center"
                                                        ng-class="{'active':rpTable.selectRow==$index}"
                                                        ng-click="rpTable.selectRow=$index"
                                                        ng-repeat="row in rpTable">

                                                        <td ng-show="brandparams.newOrExisting != 'New_Vendor'">{{row.poRecordSum | number:0}}</td>
                                                        <td ng-show="brandparams.newOrExisting != 'New_Vendor'">{{row.salesSum | number:0}}</td>
                                                        <td ng-show="brandparams.newOrExisting != 'New_Vendor'">{{row.actualGp | number:2}}</td>

                                                        <td>{{row.fcsPurchase | number:0}}</td>
                                                        <td ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'">{{row.fcsSplitPurchse | number:0}}</td>
                                                        <td ng-show="brandparams.newOrExisting != 'New_Vendor'">{{row.purchaseGrowth | number:2}}</td>
                                                        <td>{{row.fcsSales | number:0}}</td>
                                                        <td ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'">{{row.fcsSplitSales | number:0}}</td>
                                                        <td ng-show="brandparams.newOrExisting != 'New_Vendor'">{{row.salesGrowth | number:2}}</td>
                                                        <td>{{row.gp | number:2}}</td>
                                                        <td ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'">{{row.splitGp | number:2}}</td>
                                                        <td ng-if="userData.userType =='45'">
                                                            <div class="input-group input-group-xs" >
                                                                <input class="form-control radius3"
                                                                       name="AdjusetGp"
                                                                       ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y'"
                                                                       ng-model="brandparams.adjustGp"
                                                                       to-change-number
                                                                       reg = "/[%]/g"
                                                                       placeholder="不超过两位小数"
                                                                       name="{{'bhgp'+$index}}"
                                                                       type="text"/>
                                                            </div>
                                                        </td>

                                                        <!--<td>{{row.poRecordSum2}}</td>
                                                        <td>{{row.salesSum2}}</td>
                                                        <td>{{row.actualGp2}}</td>-->

                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </form>
                        </div>
                        <!--表单结束-->
                        <form id="brandPlnFormRow" name="brandPlnFormRow">
                            <div class="col-md-12">
                                <div style="line-height: 30px">
                                    <label style="margin-left: 10px"><i class="fa fa-list-alt"></i>品牌明细列表</label>

                                    <div class="btn-group btn-group-xs pull-right" ng-if="true">
                                        <div class="btn-group btn-group-xs" ng-if="true">
                                            <button class="btn btn-default btn-xs" id="addBrandPlnL"
                                                    ng-click="addBrandPlnL()"
                                                    ng-show="true" type="button"
                                                    ng-disabled="showinfoButton"
                                            >
                                                <i class="fa fa-plus">新增</i>
                                            </button>

                                            <button class="btn btn-default btn-xs" id="delBrandPlnL"
                                                    ng-click="delBrandPlnL()"
                                                    ng-disabled="brandPlnLDataTable.selectRow==undefined"
                                                    ng-show="true" type="button"
                                            >
                                                <i class="fa fa-trash">删除</i>
                                            </button>
                                            <button class="btn btn-default btn-xs" id="clearBrandPlnL"
                                                    ng-click="clearBrandPlnL()"
                                                    ng-show="true" type="button"
                                                    ng-disabled="showinfoButton"
                                            >
                                                <i class="fa fa-trash">清空</i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="data-table">
                                    <div style="">
                                        <div class="" id="nicescroll_rpTableBrandPlnLB" ng-nicescroll=""
                                             nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2',cursorwidth:'10px',autohidemode:false,zindex:10}"
                                        >
                                            <table
                                                    class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                <thead class="bg-gray-white">
                                                <tr class="text-center">
                                                    <th colspan="7" class="brandLineInfoColor"></th>

                                                    <th colspan="5" ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">{{yearInfo.lastYear}} Actual</th>

                                                    <th colspan="5" ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit != 'Y'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                    <th colspan="3" ng-if="brandparams.newOrExisting == 'New_Vendor'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                    <!-- <th colspan="3">{{yearInfo.beforeYear}} Actual</th>-->

                                                    <th colspan="7" ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" class="brandHeadThColorAndFuture">{{yearInfo.year}} Proposal</th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th class="brandLineInfoColor">Brand Details</th>
                                                    <th class="brandLineInfoColor">Group Code</th>
                                                    <th class="brandLineInfoColor">Group Desc</th>
                                                    <th class="brandLineInfoColor">Dept Code</th>
                                                    <th class="brandLineInfoColor">DEPT_DESC</th>
                                                    <th class="brandLineInfoColor">BRAND_CN</th>
                                                    <th class="brandLineInfoColor">BRAND_EN</th>

                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Purchase <br>（PO Record）</th>
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Sales</th>
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Actual GP%</th>
                                                    <!--<th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Brand Plan <br> Adjust%</th>-->
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Annual Purchase <br> (Annual PO Record)</th>
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndActual">Annual Sales</th>

                                                    <th class="brandHeadThColorAndFuture">F’cs Purchase <br>（PO Record）</th>
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" class="brandHeadThColorAndFuture">拆后F’cs Purchase <br>（PO Record）</th>
                                                    <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndFuture">Purchase <br>Growth%</th>
                                                    <th class="brandHeadThColorAndFuture">F’cs Sales</th>
                                                    <th ng-if="brandparams.newOrExisting != 'New_Vendor' && brandparams.isSplit == 'Y' && userData.userType =='45'" class="brandHeadThColorAndFuture">拆后F’cs Sales</th>
                                                    <th ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandHeadThColorAndFuture">Sales <br>Growth%</th>
                                                    <th class="brandHeadThColorAndFuture">GP%</th>

                                                    <!-- <th>Purchase（PO Record）</th>
                                                     <th>Sales</th>
                                                     <th>Actual GP%</th>-->


                                                </tr>
                                                </thead>
                                                <tbody ng-nicescroll="" ng-style="tableStyle">

                                                <tr class="text-center"
                                                    ng-class="{'active':brandPlnLDataTable.selectRow==$index}"
                                                    ng-click="brandPlnLDataTable.selectRow=$index"
                                                    ng-repeat="row in brandPlnLDataTable">

                                                    <td class="brandLineContentBrandInfo">{{row.brandDetails}}</td>
                                                    <td class="brandLineContentBrandInfo">{{row.groupCode}}</td>
                                                    <td class="brandLineContentBrandInfo">
                                                        <!--row.groupCode-->
                                                        <div class="input-group input-group-xs tdWidth"><input
                                                                class="form-control radius3"
                                                                disabled
                                                                ng-model="row.groupDesc"
                                                                name="{{'bgroupDesc'+$index}}"
                                                                required
                                                                type="text"/>
                                                            <span class="input-group-btn ng-scope">
                                <button class="btn btn-default" ng-click="getRelGroupCode()" type="button" ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span></div>
                                                    </td>
                                                    <td class="brandLineContentBrandInfo">
                                                        <div class="input-group input-group-xs tdWidth"><input
                                                                class="form-control radius3"
                                                                disabled
                                                                ng-model="row.deptCode"
                                                                name="{{'bdeptCode'+$index}}"
                                                                required
                                                                type="text"/>
                                                            <span class="input-group-btn ng-scope">
                                <button class="btn btn-default" ng-click="getRelDeptCode(row)" type="button" ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm ">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span></div>
                                                    </td>
                                                    <td class="brandLineContentBrandInfo">{{row.deptDesc}}</td>
                                                    <td class="brandLineContentBrandInfo">
                                                        <div class="input-group input-group-xs tdWidth"><input
                                                                class="form-control radius3"
                                                                ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm "
                                                                ng-model="row.brandCn"
                                                                name="{{'bbrandCn'+$index}}"
                                                                required
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td class="brandLineContentBrandInfo">
                                                        <div class="input-group input-group-xs tdWidth"><input
                                                                class="form-control radius3"
                                                                ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm"
                                                                ng-model="row.brandEn"
                                                                name="{{'bbrandEn'+$index}}"
                                                                required
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <!--------------------------------->

                                                    <!--暂时注释:2019.8.23 往年信息的标签-->
                                                    <!--<td>{{row.poRecord}}</td>-->
                                                    <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm"
                                                                ng-model="row.poRecord"
                                                                to-change-number
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm"
                                                                ng-model="row.sales"
                                                                to-change-number
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <!--<td>{{row.actualGp}}</td>-->
                                                    <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="'Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails || 'C' === params.status  || 'Y' === params.isPlnConfirm"
                                                                ng-model="row.actualGp"
                                                                to-change-number
                                                                reg = "/[%]/g"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <!-- <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                         <div class="input-group input-group-xs" style="width: 100px"><input
                                                                 class="form-control radius3"
                                                                 name="brandPlanAdjust"
                                                                 ng-disabled="'C' === params.status  || 'Y' === params.isPlnConfirm"
                                                                 ng-model="row.brandPlanAdjust"
                                                                 ng-change="brandPlanAdjustChange(row)"
                                                                 placeholder="不超过两位小数"
                                                                 to-change-number
                                                                 reg = "/[%]/g"
                                                                 type="text"/>
                                                         </div>
                                                     </td>-->
                                                    <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="('Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails) && userData.userType != '45'"
                                                                ng-model="row.annualPurchase"
                                                                to-change-number
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td ng-if="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentActual">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="('Existing_Brand' === row.brandDetails || 'Existing Brand' === row.brandDetails) && userData.userType != '45'"
                                                                ng-model="row.annualSales"
                                                                to-change-number
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <!--往年信息标签结束-->

                                                    <!---------------------------------------------------->

                                                    <td class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs"><input
                                                                class="form-control radius3"

                                                                ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y' || 'Y' == row.fcsPurchaseCon"
                                                                ng-model="row.fcsPurchase"
                                                                to-change-number
                                                                name="{{'bfcsPurchase'+$index}}"
                                                                required
                                                                ng-change="fscPurchaseChange(row,row.fcsPurchase)"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td ng-if="brandparams.isSplit == 'Y'" class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs"><input
                                                                class="form-control radius3"
                                                                disabled
                                                                ng-model="row.fcsSplitPurchse"
                                                                to-change-number
                                                                name="{{'bfcsSplitPurchse'+$index}}"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td  ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs">
                                                            <input class="form-control radius3" name="purchaseGrowth"
                                                                   ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y' || 'Y' == row.purchaseGrowthCon"
                                                                   ng-model="row.purchaseGrowth"
                                                                   to-change-number
                                                                   reg = "/[%]/g"
                                                                   ng-change="purchaseGrowthChange(row)"
                                                                   placeholder="不超过两位小数"
                                                                   type="text"/>
                                                        </div>
                                                    </td>
                                                    <td class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"

                                                                ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y' || 'Y' == row.fcsSalesCon "
                                                                ng-model="row.fcsSales"
                                                                to-change-number
                                                                name="{{'bfcsSales'+$index}}"
                                                                required
                                                                ng-change="fcsSalesChange(row)"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td ng-if="brandparams.isSplit == 'Y'" class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"
                                                               disabled
                                                                ng-model="row.fcsSplitSales"
                                                                to-change-number
                                                                name="{{'bfcsSplitSales'+$index}}"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td  ng-show="brandparams.newOrExisting != 'New_Vendor'" class="brandLineContentFuture">
                                                        <!--ng-change="salesGrowthChange(row)"-->
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"
                                                                name="salesGrowth"
                                                                ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y' || 'Y' == row.salesGrowthCon"
                                                                ng-model="row.salesGrowth"
                                                                to-change-number
                                                                reg = "/[%]/g"
                                                                ng-change="salesGrowthChange(row)"
                                                                placeholder="不超过两位小数"
                                                                type="text"/>
                                                        </div>
                                                    </td>
                                                    <td class="brandLineContentFuture">
                                                        <div class="input-group input-group-xs" style="width: 100px"><input
                                                                class="form-control radius3"
                                                                name="gp"
                                                                ng-disabled="params.status == 'C' || params.isPlnConfirm == 'Y'"
                                                                ng-model="row.gp"
                                                                to-change-number
                                                                reg = "/[%]/g"
                                                                placeholder="不超过两位小数"
                                                                name="{{'bgp'+$index}}"
                                                                required
                                                                type="text"/>
                                                        </div>
                                                    </td>

                                                    <!-- <td>{{row.poRecord2}}</td>
                                                     <td>{{row.sales2}}</td>
                                                     <td>{{row.actualGp2}}</td>-->


                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>


                                </div>


                            </div>
                        </form>

                    </div>
                    <!--品牌计划明细数据上传 start -->
                    <div class="modal fade" id="brandExcelImportId" data-des="品牌明细数据导入" data-backdrop="static" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close"
                                            data-dismiss="modal" aria-hidden="true">
                                        &times;
                                    </button>
                                    <h4 class="modal-title">
                                        品牌明细数据导入
                                    </h4>
                                </div>
                                <form class="ngValid" name="funcMenuForm"  >
                                    <div class="modal-body">
                                        <div class="form-group col-xs-12 col-md-12" ng-show="updateStatusByBrand">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">上传规则</span></label>
                                                <textarea disabled style="width: 100%;color: red;border-radius:3px;font-size: 12px">GROUP,DEPT,BRAND不可为空哦!</textarea>
                                            </div>
                                        </div>
                                        <div class="form-group col-xs-12 col-md-12" ng-show="updateStatusByBrand">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">选择文件</span></label>
                                                <input type="file" required accept="*.xlsx"  id="fileUpLoadByBrandLpn">
                                            </div>
                                        </div>
                                        <div class="form-group col-xs-12 col-md-12" ng-show="!updateStatusByBrand" id="brandErrorMsgId">

                                        </div>
                                        <div class="cb"></div>
                                    </div>

                                    <div class="modal-footer ">
                                        <div style="text-align:center">
                                            <button style="" type="button" class="btn btn-default" data-dismiss="modal">取消
                                            </button>
                                            <button ng-click="brandImport(funcMenuForm.$invalid)"  id="brandImportId" ng-show="updateStatusByBrand" class="btn btn-primary mr10">确定</button>
                                        </div>
                                    </div>
                                </form>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal -->
                    </div>
                    <!--品牌计划明细数据上传 end -->
                    <!--品牌计划结束 -->


                    <div class="tab-pane fade in col-md-12" id="ttaTerms" ng-if="!controllTabShow.flag">
                        <!--------------------- 按钮--->
                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10">
                                <button class="btn btn-default btn-xs" id="CountDeptFeeH" ng-click="termsCountAmount('1')" ng-disabled = "!(contractParams.redTicketScale>= 0)  || contractParams.isTermsConfirm=='Y'"
                                        ng-show="true" type="button"><i class="fa fa-exchange" >收益计算</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="CountDeptFeeHFee" ng-click="termsCountAmountFee()"  ng-disabled = "contractParams.isTermsConfirm=='Y'"
                                        ng-show="true" type="button"><i class="fa fa-exchange" >实际费用计算</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="saveTrems" ng-click="saveTrems(ttaTermsForm,'1')"
                                        ng-show="true" type="button"  ng-disabled = "contractParams.isTermsConfirm=='Y'"
                                >
                                    <i class="fa fa-save">保存</i>
                                </button>

                                <button class="btn btn-default btn-xs" id="confirmTrems" ng-click="confirmTrems(ttaTermsForm)"
                                        ng-show="true" type="button" ng-disabled = "contractParams.isTermsConfirm=='Y'"
                                >
                                    <i class="fa fa-check">确认</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="CancelConfirmTrems"
                                        ng-click="CancelConfirmTrems()"
                                        ng-show="true" type="button" ng-disabled = "contractParams.isTermsConfirm=='N'"
                                >
                                    <i class="fa fa-arrows-h">取消确认</i>
                                </button>
                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                            <div class="btn-group btn-group-xs ml10">
                                <button class="btn btn-primary dataMax" ng-click="showInfoNavTabsFun()" name="fullWindow">
                                    <i class="fa fa-square-o"></i>信息栏显示
                                </button>
                            </div>
                        </div>
                        <!---------------------  / .按钮  --->

                        <!--------------------- 输入表单 ng-if="contractParams.oldYear !=0" --->

                        <div class=" mt10 pb5  oh"
                             data-des="此节点必需－用于识别输入表单的指令">

                            <form id="ttaTermsForm" name="ttaTermsForm">
                                <div ng-show="showInfoNavTabs">
                                    <ul class="nav nav-tabs" id="tab">
                                        <li class="active" ng-click="tabChangeChild('contractNew')">
                                            <a data-toggle="tab" href="#contractNew"><i class="fa fa-list-alt"></i>
                                                <label>{{contractParams.proposalYear}}信息</label></a>
                                        </li>

                                        <li ng-click="tabChangeChild('contractOld')" ng-if="contractParams.oldYear !=0">
                                            <a data-toggle="tab" href="#contractOld"><i class="fa fa-list-alt"></i>
                                                <label>{{contractParams.proposalYear-1}}信息</label></a>
                                        </li>
                                    </ul>
                                    <div class="tab-pane fade in col-md-12" id="contractNew"
                                         ng-show="tabActionChild== 'contractNew'">
                                        <div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>合同版本：</span>
                                                    </label>

                                                    <div data-required="true" lookup-code="CONTRACT_V"
                                                         name="agreementEdition"
                                                         ng-model="contractParams.agreementEdition"
                                                         required></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Buyer：</span></label>
                                                    <input class="form-control radius3" disabled
                                                           name="createdByName"
                                                           ng-model="contractParams.createdByName" required type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Buyer Code(工号)：</span></label>
                                                    <input class="form-control radius3" disabled
                                                           name="employeeNumber"
                                                           ng-model="contractParams.employeeNumber" required type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"> <i class="red">*</i>Invoice Type：</span>
                                                    </label>

                                                    <div data-required="true" lookup-code="INVOICE_TYPE"  data-callback="invoiceTypeFunc"
                                                         name="invoiceType" ng-model="contractParams.invoiceType"
                                                         required></div>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">供应商编码：</span></label>
                                                    <input class="form-control radius3" disabled name = "vendorNbr"
                                                           ng-model="contractParams.vendorNbr" required type="text">

                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">供应商名称：</span></label>
                                                    <input class="form-control radius3" disabled name = "vendorDesc"
                                                           ng-model="contractParams.vendorDesc" required type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>Class：</span>
                                                    </label>
                                                    <div data-required="true" lookup-code="TERMS_CLASS" disabled
                                                         ng-model="contractParams.termsClass" name ="termsClass"
                                                         required></div>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red"
                                                                              ng-if="contractParams.invoiceType=='B'">* </i>红票收益屈臣氏分配占比：</span>
                                                    </label>
                                                    <input class="form-control radius3" min="0" ng-disabled="contractParams.invoiceType !='B'"
                                                           name="redTicketScale"
                                                           ng-model="contractParams.redTicketScale"
                                                           ng-required="contractParams.invoiceType=='B'" number type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">F'cs  Sales：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name="fcsSales"  to-change-number
                                                           ng-model="contractParams.fcsSales" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">GP%：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name="gp"
                                                           ng-model="contractParams.gp" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>部门编码：</span></label>
                                                    <input class="form-control radius3" ng-model="contractParams.deptCode" name ="deptCode"
                                                           readonly required type="text"/>
                                                    <span class="input-group-btn ng-scope" ng-show="false">
                                                        <button class="btn btn-default" ng-click="getDeptCode()"
                                                                type="button">
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>部门名称：</span></label>
                                                    <input class="form-control radius3" data-required-msg="部门名称"
                                                           ng-model="contractParams.deptDesc" name = "deptDesc"
                                                           readonly type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Purchase：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name="fcsPurchse"   to-change-number
                                                           ng-model="contractParams.fcsPurchse" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn"><span
                                                            class="w100">销售区域：</span></label>
                                                    <input class="form-control radius3 readonly-white" name="salesArea"
                                                           ng-model="contractParams.salesArea" readonly  ng-required="!contractParams.warehouseDesc && !contractParams.salesArea"
                                                           title="{{contractParams.salesArea}}" type="text">
                                                    <span class="input-group-btn ng-scope">
                                                    <button class="btn btn-default"  ng-click="termsCancel('1')"
                                                            type="button"><i class="fa fa-remove"></i></button>
                                                    <button class="btn btn-default" data-target="#salesAreaChange"
                                                            data-toggle="modal"  ng-disabled="contractParams.warehouseDesc"
                                                            type="button"><i class="fa fa-search"></i></button>
                                                </span>
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn"><span
                                                            class="w100">配送仓库：</span></label>
                                                    <input class="form-control radius3 readonly-white" name="warehouseDesc"
                                                           ng-model="contractParams.warehouseDesc"
                                                           readonly  ng-required="!contractParams.warehouseDesc && !contractParams.salesArea"
                                                           title="{{contractParams.warehouseDesc}}" type="text">
                                                    <span class="input-group-btn ng-scope">
                                                    <button class="btn btn-default" ng-click="termsCancel('2')"
                                                            type="button"><i class="fa fa-remove" ></i></button>
                                                    <button class="btn btn-default" data-target="#warehouseChange"
                                                            data-toggle="modal" ng-disabled="contractParams.salesArea"
                                                            type="button"><i class="fa fa-search"></i></button>
                                                </span>
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Cross-year是否跨年：</span>
                                                    </label>
                                                    <div data-required="true" disabled
                                                         lookup-code="YES_OR_NO" name="isCrossYear"
                                                         ng-model="contractParams.isCrossYear" required></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>是否可退货：</span>
                                                    </label>
                                                    <div data-required="true" lookup-code="TTA_TERMS_IS" data-callback="termsISFun"
                                                         name="isReturn" ng-model="contractParams.isReturn"
                                                         required></div>
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">退货条件：</span>
                                                    </label>
                                                    <div  data-required="true" lookup-code="TTA_TERMS_CON"
                                                          name="returnConditions" ng-model="contractParams.returnConditions"
                                                          ng-required="contractParams.isReturn == 'CY'"
                                                          ng-disabled="contractParams.isReturn != 'CY'"></div>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>付款期(天数)：</span>
                                                    </label>
                                                    <input class="form-control radius3" min="0" name="payDays" placeholder="请输入正整数"
                                                           ng-model="contractParams.payDays" numbers0 reg="/[^0-9]/g"  required type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>BEOI Tax税率%：</span>
                                                    </label>
                                                    <div data-required="true" lookup-code="BEOI_TAX"
                                                         ng-model="contractParams.beoiTax" name ="beoiTax"
                                                         required></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red"
                                                                              ng-if="!(contractParams.salesType =='B01' || contractParams.salesType =='B02')">* </i>寄售折扣%：</span>
                                                    </label>
                                                    <input class="form-control radius3" min="0"
                                                           ng-model="contractParams.consignmentDiscount"
                                                           ng-required="!(contractParams.salesType =='B01' || contractParams.salesType =='B02')" numberd
                                                           ng-disabled="contractParams.salesType =='B01' || contractParams.salesType =='B02'"
                                                           placeholder="不超过两位小数" name ="consignmentDiscount"
                                                           type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">营改增加成比例%：</span>
                                                    </label>
                                                    <input class="form-control radius3" id="contractParams_salesUpScale"
                                                           name="salesUpScale"    numbers0 reg="/[^0-6]/g"  reg-length="1"
                                                           ng-disabled="!params.newOrExisting || params.newOrExisting =='New_Vendor'"
                                                           ng-model="contractParams.salesUpScale" placeholder="请输入0-6" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-5 col-md-4">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">销售方式：</span>
                                                    </label>
                                                    <div data-required="true" lookup-code="SALE_WAY"
                                                         name="salesType"
                                                         ng-model="contractParams.salesType"
                                                         required disabled></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-12 col-md-12">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>品牌：</span>
                                                    </label>
                                                    <input class="form-control radius3" ng-model="contractParams.brandCn" name="brandCn"
                                                           required type="text" >
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="tab-pane fade in col-md-12" id="contractOld"
                                         ng-show="tabActionChild== 'contractOld'">
                                        <div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>合同版本：</span>
                                                    </label>

                                                    <div disabled lookup-code="CONTRACT_V"
                                                         name="oldAgreementEdition"
                                                         ng-model="contractParams.oldAgreementEdition"
                                                    ></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Buyer：</span></label>
                                                    <input class="form-control radius3" disabled
                                                           name="oldCreatedByName"
                                                           ng-model="contractParams.oldCreatedByName" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Buyer Code(工号)：</span></label>
                                                    <input class="form-control radius3" disabled
                                                           name="oldEmployeeNumber"
                                                           ng-model="contractParams.oldEmployeeNumber" type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"> <i class="red">*</i>Invoice Type：</span>
                                                    </label>

                                                    <div disabled lookup-code="INVOICE_TYPE"
                                                         name="oldInvoiceType"
                                                         ng-model="contractParams.oldInvoiceType"></div>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">供应商编码：</span></label>
                                                    <input class="form-control radius3" disabled name = "oldVendorNbr"
                                                           ng-model="contractParams.oldVendorNbr" type="text">

                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">供应商名称：</span></label>
                                                    <input class="form-control radius3" disabled name = "oldVendorDesc"
                                                           ng-model="contractParams.oldVendorDesc" type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>Class：</span>
                                                    </label>
                                                    <div disabled lookup-code="TERMS_CLASS" name = "oldTermsClass"
                                                         ng-model="contractParams.oldTermsClass"></div>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red"
                                                                              ng-if="contractParams.invoiceType=='B'">* </i>红票收益屈臣氏分配占比：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled
                                                           min="0"
                                                           name="oldRedTicketScale"
                                                           ng-model="contractParams.oldRedTicketScale" number type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">F'cs  Sales：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled to-change-number
                                                           name="oldFcsSales"
                                                           ng-model="contractParams.oldFcsSales" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">GP%：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name="oldGp"
                                                           ng-model="contractParams.oldGp" type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>部门编码：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name = "oldDeptCode"
                                                           ng-model="contractParams.oldDeptCode" type="text">
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>部门名称：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name = "oldDeptDesc"
                                                           ng-model="contractParams.oldDeptDesc" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Purchase：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name="oldFcsPurchse" to-change-number
                                                           ng-model="contractParams.oldFcsPurchse" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn"><span
                                                            class="w100">销售区域：</span></label>
                                                    <input class="form-control radius3 readonly-white" disabled
                                                           name="oldSalesArea"
                                                           ng-model="contractParams.oldSalesArea" readonly
                                                           type="text">
                                                    <span class="input-group-btn ng-scope">
                                                    <button class="btn btn-default" data-target="#salesAreaChange"
                                                            data-toggle="modal"
                                                            disabled
                                                            type="button"><i class="fa fa-search"></i></button>
                                                </span>
                                                </div>
                                            </div>


                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn"><span
                                                            class="w100">配送仓库：</span></label>
                                                    <input class="form-control radius3 readonly-white" disabled
                                                           name="oldWarehouseDesc"
                                                           ng-model="contractParams.oldWarehouseDesc"
                                                           readonly type="text">
                                                    <span class="input-group-btn ng-scope">
                                                        <button class="btn btn-default" data-target="#warehouseChange"
                                                                data-toggle="modal"
                                                                disabled
                                                                type="button"><i class="fa fa-search"></i></button>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">Cross-year是否跨年：</span>
                                                    </label>
                                                    <div disabled lookup-code="YES_OR_NO"
                                                         name="oldIsCrossYear"
                                                         ng-model="contractParams.oldIsCrossYear"></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>是否可退货：</span>
                                                    </label>
                                                    <div disabled lookup-code="TTA_TERMS_IS"
                                                         name="oldIsReturn"
                                                         ng-model="contractParams.oldIsReturn"></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">退货条件：</span>
                                                    </label>
                                                    <div disabled lookup-code="TTA_TERMS_CON"
                                                         name="oldReturnConditions"
                                                         ng-model="contractParams.oldReturnConditions"></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>付款期(天数)：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled
                                                           min="0" name="oldPayDays"
                                                           ng-model="contractParams.oldPayDays" number type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>BEOI Tax税率%：</span>
                                                    </label>
                                                    <div disabled lookup-code="BEOI_TAX" name= "oldBeoiTax"
                                                         ng-model="contractParams.oldBeoiTax"
                                                    ></div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red"
                                                                              ng-if="!(contractParams.salesType =='B01' && contractParams.salesType =='B02')">* </i>寄售折扣%：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name = "oldConsignmentDiscount"
                                                           min="0" ng-model="contractParams.oldConsignmentDiscount" numberd
                                                           placeholder="不超过两位小数" type="text">
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">营改增加成比例%：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled
                                                           min="0" name="oldSalesUpScale"
                                                           ng-model="contractParams.oldSalesUpScale" numebr type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-5 col-md-4">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100"><i class="red">* </i>销售方式：</span>
                                                    </label>
                                                    <div disabled lookup-code="SALE_WAY"
                                                         name="oldSalesType"
                                                         ng-model="contractParams.oldSalesType"
                                                    ></div>
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-12 col-md-12">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">品牌：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled name = "oldBrandCn"
                                                           ng-model="contractParams.oldBrandCn" type="text" >
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">拆后F'cs  Sales：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled to-change-number
                                                           name="oldFcsSplitSales"
                                                           ng-model="contractParams.oldFcsSplitSales" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">拆后Purchase：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled to-change-number
                                                           name="oldFcsSplitPurchse"
                                                           ng-model="contractParams.oldFcsSplitPurchse" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">拆后GP%：</span>
                                                    </label>
                                                    <input class="form-control radius3" disabled to-change-number
                                                           name="oldSplitGp"
                                                           ng-model="contractParams.oldSplitGp" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group col-xs-4 col-md-3">
                                                <div class="input-group input-group-xs">
                                                    <label class="input-group-addon bn">
                                                        <span class="w100">是否拆分：</span>
                                                    </label>
                                                    <div disabled lookup-code="YN" name= "oldIsSplit"
                                                         ng-model="contractParams.oldIsSplit"
                                                    ></div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <hr width="100%">
                                <div ng-class="contractParams.oldYear ==0?col-md-12:''" class="fixed-table" style="position: relative;" main-scroll-style id="contractParamsScrollId">
                                    <div  nice-option="{cursorcolor: '#1e90c2',cursorwidth:20,zindex:10,autohidemode:false}" ng-nicescroll class="nicescroll-height  bg-white ">
                                        <bg-splitter ng-if="contractParams.oldYear !=0" orientation="horizontal" style="position: relative; width: 2000px" >
                                            <bg-pane min-size="100" >
                                                <div class="" style="background-color: white; top: 0;">
                                                    <table class="table table-bordered table-hover table-condensed"
                                                           id="contractParams_oldYear" style="border-left:2px solid #666">
                                                        <thead style="background-color: #808080; ">
                                                        <tr class="text-center">
                                                            <th>  <div style="width: 120px;color: white;">   Y{{contractParams.proposalYear-1}}条款 </div></th>
                                                            <th><div style="width: 170px;color: white;">收款方式 </div></th>
                                                            <th> <div style="width: 80px;color: white;">标准 </div></th>
                                                            <th><div style="width:80px;color: white;">单位</div></th>
                                                            <th> <div style="color:white;"> Y{{contractParams.proposalYear-1}}条款<br>(System)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear-1}}费用预估<br>(不含税)(含加成)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear-1}}费用预估<br>(含税)(含加成)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear-1}}实际费用<br>(不含税)(含加成)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear-1}}实际费用<br>(含税)(含加成)</div></th>
                                                        </tr>
                                                        </thead>
                                                        <tbody style="background-color: #EAEAEA; ">
                                                        <tr class="text-center"  style="font-family: '微软雅黑'; font-size: 12px;"
                                                            ng-class="{'active':dataTableTerms.selectRow==$index,'activetop':selectTop ==$index,'activeright':dataTableTerms.selectRow==$index,'activebottom':selectBottom==$index}"
                                                            ng-click="dataTableTermsOLd.selectRow=$index"
                                                            ng-repeat="row in dataTableTermsOLd">
                                                            <td ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }">
                                                                        <textarea class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched"
                                                                                  style="resize: both; font-size: 12px;" title="{{row.oldYTerms}}" disabled wrap ng-model="row.oldYTerms"></textarea>
                                                            </td>
                                                            <td style="font-size: 12px;" ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled
                                                                                                                                                                                            ng-model="row.oldIncomeType"></td>
                                                            <td style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                             ng-model="row.oldYYear"></td>
                                                            <td style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled
                                                                                                                                                                                             ng-model="row.oldUnit"></td>
                                                            <td style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }">
                                                                <textarea class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched" disabled style="resize: both;" title="{{row.oldTermsSystem}}" wrap ng-model="row.oldTermsSystem"></textarea>
                                                            </td>
                                                            <!--等加了拆分条款的金额代码需要上正式环境,这一段代码需要注释或者不用-->
        <!--                                                  nicescrolNewAlnlysisMain                                                                                                                                ng-model="row.oldFeeNotax"></td>
                                                            <td style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                             ng-model="row.oldFeeIntas"></td>-->
                                                            <!--hmb注释,这是加了拆分条款的金额代码,上正式环境需要放开-->
                                                                <td ng-if = "!(contractParams.oldIsSplit == '1' && tabActionChild == 'contractNew')" style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                          ng-model="row.oldFeeNotax"></td>
                                                                   <td ng-if = "!(contractParams.oldIsSplit == '1' && tabActionChild == 'contractNew')" style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                              ng-model="row.oldFeeIntas"></td>
                                                                   <td ng-if = "contractParams.oldIsSplit == '1' && tabActionChild == 'contractNew'" style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                                    ng-model="row.oldFeeSplitNotax"></td>
                                                                   <td ng-if = "contractParams.oldIsSplit == '1' && tabActionChild == 'contractNew'" style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                                    ng-model="row.oldFeeSplitIntas"></td>


                                                            <td style="font-size: 12px;"  ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled  to-change-number
                                                                                                                                                                                             ng-model="row.oldFeeAcNotax"></td>
                                                            <td  style="font-size: 12px;" ng-class="{ 'bg-terms-left-h': row.relation =='1', 'bg-terms-left-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                             ng-model="row.oldFeeAcIntas"></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </bg-pane>


                                            <bg-pane min-size="100" >
                                                <div class="" style="background-color: white; top: 0;">
                                                    <table class="table table-bordered table-hover table-condensed"
                                                           id="contractParams_year" style="border-left:2px solid #666">
                                                        <thead style="background-color: #4F6228;">
                                                        <tr class="text-center">
                                                            <th> <div style="width: 120px;color:white;">   Y{{contractParams.proposalYear}}条款</div> </th>
                                                            <th > <div style="width: 170px;color:white;"> 收款方式</div></th>
                                                            <th> <div style="width: 80px;color:white;">参考标准</div></th>
                                                            <th><div style="width:80px;color:white;">{{contractParams.proposalYear}}TTA </div></th>
                                                            <th>
                                                                <div style="width:80px;color:white;">单位</div>
                                                            </th>
                                                            <th> <div style="color:white;"> Y{{contractParams.proposalYear}}条款<br>(System)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear}}费用预估<br>(不含税)(含加成)</div></th>
                                                            <th> <div style="color:white;"> {{contractParams.proposalYear}}费用预估<br>(含税)(含加成)</div></th>
                                                        </tr>
                                                        </thead>
                                                        <tbody style="background-color: #D8E4BC; ">
                                                        <tr class="text-center" style="font-family: "微软雅黑"; font-size: 12px;"
                                                        ng-class="{'active':dataTableTerms.selectRow==$index,'activetop':selectTop ==$index,'activeright':dataTableTerms.selectRow==$index,'activebottom':selectBottom==$index}"
                                                        ng-click="dataTableTerms.selectRow=$index;selectCurrent()"
                                                        ng-repeat="row in dataTableTerms">

                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <textarea  style="font-size: 12px;" class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched" disabled style="resize: both;" title="{{row.yTerms}}" wrap ng-model="row.yTerms"></textarea>
                                                        </td>
                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <div class="input-group input-group-xs"
                                                                 style="    width: 100%;">
                                                                <select class     ="form-control radius3"
                                                                        ng-change ="TermsChangeIn(row,row.incomeTypeList,row.incomeType)"
                                                                        ng-disabled="row.isMajor == 'N' ||  row.incomeTypeList.length == 0 || contractParams.isTermsConfirm=='Y'" || !row.clauseId
                                                                        ng-required="row.yYear && ( (row.isMajor &&   row.isMajor == 'Y') || !row.isMajor)"
                                                                        name="{{'incomeType'+$index}}"
                                                                        ng-model  ="row.incomeType">
                                                                    <option value ="">{{firstText}}</option>
                                                                    <option ng-bind="iterm.name"
                                                                            ng-repeat="iterm in row.incomeTypeList"
                                                                            value="{{iterm.name}}"></option>
                                                                </select>
                                                            </div>
                                                        </td>
                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled  to-change-number  ng-model="row.referenceStandard"></td>
                                                        <!--空--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="!row.rule" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" name="{{'yYear'+$index}}"
                                                                                                                                                                                                             ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                        ></td>
                                                        <!--CN01--> <!--hmb注释  2020.5.14  原来的代码:ng-required=" (row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y' )
                                                                                        ||  row.incomeType || row.requireFlag"     因row.requireFlag未正式上线,因此去除这个判断-->
                                                        <!--row.requireFlag-->
                                                        <td style="font-size: 12px;" ng-if="row.rule == 'CN01'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" (row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y' )
                                                                                                                   ||  row.incomeType"
                                                                   name="{{'yYear'+$index}}"  ng-pattern="/^((\d+\.\d{0,1}[1-9])|(\d+\.\d*[1-9]\d{1})|(\d*[1-9]\d*\.\d{2}))$/"
                                                                   ng-blur="executeParams(row,'1',$event)" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN02--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN02'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'  || row.incomeType"
                                                                   ng-pattern="/^[1-9]\d*$/"
                                                                   name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN03-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN03'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" required name="{{'yYear'+$index}}"
                                                                   ng-pattern="/^[1-9]\d*$/"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN04--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN04'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y' || row.incomeType" ng-pattern="/^(([1-9]\d+)|[1-9])(\.\d{1,2})?$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN05--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN05'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[+-]?\d*\.\d{2}$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN06--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN06'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN08--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN08'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN09--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN09'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <!--CN10--><!--row.requireFlag-->
                                                        <td style="font-size: 12px;"  ng-if="row.rule == 'CN10'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                                   ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y'   || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                            ></td>
                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                            <div class="input-group input-group-xs"
                                                                 style="    width: 100%;">
                                                                <select class="form-control radius3" ng-show="!(row.isMajor == 'N')"
                                                                        ng-change="TermsChangeUnit(row,row.unitList,row.unit)"
                                                                        ng-disabled="row.incomeTypeList.length == 0 || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId" ng-model="row.unit" name = "{{'unit'+$index}}">
                                                                    <option value="">{{firstText}}</option>
                                                                    <option ng-bind="iterm.unitValue"
                                                                            ng-repeat="iterm in row.unitList"
                                                                            value="{{iterm.unitValue}}"></option>
                                                                </select>

                                                                <input class="form-control input-xs" disabled ng-show="row.isMajor == 'N'"
                                                                       ng-model="row.unit"  name = "{{'unit'+$index}}"/>

                                                            </div>
                                                        </td>
                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                                <textarea class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched"
                                                                          style="resize: both;" disabled title="{{row.termsSystem}}" wrap ng-model="row.termsSystem" name = "{{'termsSystem'+$index}}"></textarea>
                                                        </td>
                                                        <td style="font-size: 12px;"  ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled  to-change-number
                                                                                                                                                                                           ng-model="row.feeNotax" name = "{{'feeNotax'+$index}}"></td>
                                                        <td style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled  to-change-number
                                                                                                                                                                                          ng-model="row.feeIntas" name = "{{'feeIntas'+$index}}"></td>

                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </bg-pane>
                                        </bg-splitter>
                                        <!--  没有往年的时候  -->
                                        <div class="data-table" ng-if="contractParams.oldYear ==0">
                                            <table class="table table-bordered table-hover table-condensed "
                                                   id="contractParams_year">
                                                <thead style="background-color: #4F6228;">
                                                <tr class="text-center">
                                                    <th><div style="width: 180px;color:white;">Y{{contractParams.proposalYear}}条款</div></th>
                                                    <th> <div style="width: 170px;color:white;">收款方式</div></th>
                                                    <th style="color:white;">参考标准</th>
                                                    <th style="color:white;">{{contractParams.proposalYear}}TTA</th>
                                                    <th>
                                                        <div style="width:80px;color:white;">单位</div>
                                                    </th>
                                                    <th style="color:white;">Y{{contractParams.proposalYear}}条款<br>(System)</th>
                                                    <th style="color:white;">{{contractParams.proposalYear}}费用预估<br>(不含税)(含加成)</th>
                                                    <th style="color:white;">{{contractParams.proposalYear}}费用预估<br>(含税)(含加成)</th>
                                                </tr>
                                                </thead>
                                                <tbody style="background-color: #D8E4BC; ">
                                                <tr class="text-center" style="font-family: "微软雅黑"; font-size: 12px;" class="activetop" ng-class="{'active':dataTableTerms.selectRow==dataTableTerms[$index].clauseId,'activetop':selectTop ==$index,'activeright':dataTableTerms.selectRow==dataTableTerms[$index].clauseId,'activebottom':selectBottom==$index}"
                                                ng-click="dataTableTerms.selectRow=$index;selectCurrent()"
                                                ng-repeat="row in dataTableTerms">

                                                <td  style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                        <textarea style="font-size: 12px;"  disabled class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched"
                                                                  style="resize: both;" title="{{row.yTerms}}" wrap ng-model="row.yTerms"></textarea>
                                                </td>
                                                <td style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <div class="input-group input-group-xs" style="    width: 100%;">
                                                        <select class="form-control radius3"
                                                                ng-change="TermsChangeIn(row,row.incomeTypeList,row.incomeType)" ng-required="row.yYear && ( (row.isMajor &&   row.isMajor == 'Y') || !row.isMajor)"
                                                                ng-disabled="row.isMajor == 'N' || row.incomeTypeList.length == 0 || contractParams.isTermsConfirm=='Y' || !row.clauseId"
                                                                name="{{'incomeType'+$index}}"
                                                                ng-model="row.incomeType">
                                                            <option value="">{{firstText}}</option>
                                                            <option ng-bind="iterm.name"
                                                                    ng-repeat="iterm in row.incomeTypeList"
                                                                    value="{{iterm.name}}"></option>
                                                        </select>
                                                    </div>
                                                </td>
                                                <td style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled ng-model="row.referenceStandard"></td>

                                                <!--空--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="!row.rule" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N' && contractParams.returnedPurchaseFlag =='Y'" name="{{'yYear'+$index}}"
                                                                                                                                                                                                    ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||(row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                ></td>
                                                <!--CN01--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN01'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" (row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y' )
                                                                                                                   ||  row.incomeType" ng-pattern="/^((\d+\.\d{0,1}[1-9])|(\d+\.\d*[1-9]\d{1})|(\d*[1-9]\d*\.\d{2}))$/"
                                                           name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1',$event)" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN02--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN02'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'  || row.incomeType"
                                                           ng-pattern="/^[1-9]\d*$/"
                                                           name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN03-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN03'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs"  required name="{{'yYear'+$index}}"
                                                           ng-pattern="/^[1-9]\d*$/"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN04--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN04'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'   || row.incomeType" ng-pattern="/^(([1-9]\d+)|[1-9])(\.\d{1,2})?$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN05--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN05'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9](\d+)?(\.\d{1,2})?|^\d\.\d{1,2}$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN06--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN06'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN08--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN08'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN09--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN09'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>
                                                <!--CN10--><!--row.requireFlag-->
                                                <td style="font-size: 12px;" ng-if="row.rule == 'CN10'" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <input class="form-control input-xs" ng-required=" row.yTerms && getShop[0].meaning == row.yTerms && contractParams.isReturn =='N'  && contractParams.returnedPurchaseFlag =='Y'" ng-pattern="/^[1-9]\d*$/" name="{{'yYear'+$index}}"
                                                           ng-blur="executeParams(row,'1')" ng-model="row.yYear" to-change-number2 ng-disabled="(row.isMajor != 'N' && row.incomeTypeList.length == 0)
                                                                                                        || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId
                                                                                                        ||( row.incomeType.indexOf('不含税')>-1 && row.pCode == TargetCommissionRebate[0].code)"
                                                    ></td>



                                                <td ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                    <div class="input-group input-group-xs" style="    width: 100%;">
                                                        <select class="form-control radius3" ng-show="!(row.isMajor == 'N')"
                                                                ng-change="TermsChangeUnit(row,row.unitList,row.unit)"
                                                                ng-disabled="row.incomeTypeList.length == 0 || getCompany[0].meaning == row.incomeType || getOther[0].meaning == row.incomeType || contractParams.isTermsConfirm=='Y' || !row.clauseId" ng-model="row.unit">
                                                            <option value="">{{firstText}}</option>
                                                            <option ng-bind="iterm.unitValue"
                                                                    ng-repeat="iterm in row.unitList"
                                                                    value="{{iterm.unitValue}}"></option>
                                                        </select>

                                                        <input class="form-control input-xs" disabled ng-show="row.isMajor == 'N'"
                                                               ng-model="row.unit" />
                                                    </div>
                                                </td>
                                                <td ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }">
                                                        <textarea style="font-size: 12px;" class="form-control radius3 ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched"
                                                                  disabled     style="resize: both;" title="{{row.termsSystem}}" wrap ng-model="row.termsSystem"></textarea>
                                                </td>
                                                <td style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                  ng-model="row.feeNotax"></td>
                                                <td style="font-size: 12px;" ng-class="{ 'bg-terms-right-h': row.relation =='1', 'bg-terms-right-l': row.relation =='2' }"><input class="form-control input-xs" disabled to-change-number
                                                                                                                                                                                  ng-model="row.feeIntas"></td>


                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <!--  没有往年的时候  -->
                                    </div>
                                </div>

                                <!-- test table -->

                                <!-- <div id="outBox">
                                    <div id="tableBox" style="
                                    height: 486px;
                                    width: 570px;
                                    position: relative;
                                    overflow-x: auto;
                                    overflow-y: hidden;
                                    table-layout: fixed;">
                                        <div id="thead" style="position: absolute;
                                        left: 0;">
                                            <table class="table" >
                                                <tr>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                    <th>头部1</th>
                                                </tr>
                                            </table>
                                        </div>
                                        <div style="
                                        position: absolute;
                                        height: 450px;
                                        overflow-y: auto;
                                        overflow-x: hidden;
                                        top: 36px;
                                        left: 0;">
                                            <table class="table" style="table-layout: fixed;">
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                        <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                                <tr>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                    <td>内容1</td>
                                                </tr>
                                            </table>
                                        </div>
                                </div>

                                </div> -->

                            </form>
                        </div>
                    </div>
                    <!--表单结束-->
                    <!--tta_terms结束 -->

                    <!--NPP服务费开始-->
                    <div class="tab-pane fade in col-md-12" id="newbreedExtend">
                        <!--------------------- 按钮--->
                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10">

                                <button class="btn btn-default btn-xs" id="saveNewbreedE" ng-click="saveRefreshNewbreedE()"
                                        ng-show="true" type="button"  ng-disabled = "'A' != nbe.tphStatus || 'Y' == nbe.isNewConfirm"
                                >
                                    <i class="fa fa-refresh">刷新</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="saveNewbreedE" ng-click="saveNewbreedE(newbreedExtendForm,'1')"
                                        ng-show="true" type="button"  ng-disabled = "'A' != nbe.tphStatus || 'Y' == nbe.isNewConfirm"
                                >
                                    <i class="fa fa-save">保存</i>
                                </button>

                                <button class="btn btn-default btn-xs" id="confirmNewbreedE"
                                        ng-click="confirmNewbreedE(newbreedExtendForm)" ng-disabled = "'A' != nbe.tphStatus || 'Y' == nbe.isNewConfirm"
                                        ng-show="true" type="button"
                                >
                                    <i class="fa fa-check">确认</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="CancelConfirmNewbreedE"
                                        ng-click="CancelConfirmNewbreedE()" ng-disabled = "'A' != nbe.tphStatus || 'Y' != nbe.isNewConfirm"
                                        ng-show="true" type="button"
                                >
                                    <i class="fa fa-arrows-h">取消确认</i>
                                </button>
                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>
                        <!---------------------  / .按钮  --->
                        <!--------------------- 输入表单  --->

                        <div class=" mt10 pb5  oh"
                             data-des="此节点必需－用于识别输入表单的指令">

                            <form id="newbreedExtendForm" name="newbreedExtendForm">

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100">新品种收款方式：</span>
                                        </label>
                                        <div  lookup-code="NEW_PAYMENT"
                                              name="newPayment" disabled
                                              ng-model="nbe.newPayment"
                                        >
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100"> 新品店铺数量：</span>
                                        </label>
                                        <input class="form-control radius3" min="0" name="newShopNum"
                                               ng-disabled="dataTableNBExtendFlag || !nbe.newPayment" ng-model="nbe.newShopNum"
                                               placeholder="请输入正整数" title="请输入正整数" ng-pattern="/^[1-9]\d*$/"  type="text">
                                    </div>
                                </div>

                                <div class="form-group col-xs-4 col-md-3">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <span class="w100">收取范围：</span></label>
                                        <div  lookup-code="NB_RANGE" data-callback="collectRangeFun"
                                              name="collectRange" ng-disabled="dataTableNBExtendFlag || !nbe.newPayment"
                                              ng-model="nbe.collectRange" <!--ng-required ="storeNumber.length>0"-->
                                        required>
                                    </div>
                                </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">店铺类型：</span></label>
                                <div data-required="true" lookup-code="NB_STORE_TYPE"
                                     name="storeStyle" ng-disabled="dataTableNBExtendFlag ||  nbe.collectRange !='3'"
                                     ng-model="nbe.storeStyle"
                                     ng-required ="nbe.collectRange =='3'">
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Y{{nbe.year}}条款：</span>
                                </label>
                                <textarea class="form-control radius3" disabled title="{{nbe.currentYearTerm}}"
                                          maxlength="500" name="currentYearTerm"
                                          ng-model="nbe.currentYearTerm" rows="5"
                                          style="max-width: 600px;height:100%;">
                                        </textarea>
                            </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Y{{nbe.year-1}}条款：</span>
                                </label>
                                <textarea class="form-control radius3" disabled title="{{nbe.lastYearTerm}}"
                                          maxlength="500" name="lastYearTerm"
                                          ng-model="nbe.lastYearTerm" rows="5"
                                          style="max-width: 600px;height:100%;">
                                        </textarea>
                            </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">{{nbe.year}}费用预估<br>(不含税)(含加成)：</span>
                                </label>
                                <textarea class="form-control radius3" disabled  to-change-number
                                          maxlength="500" name="excludeTax"
                                          ng-model="nbe.excludeTax" rows="5"
                                          style="max-width: 600px;height:100%;">
                                        </textarea>
                            </div>
                        </div>

                        <div class="form-group col-xs-4 col-md-3">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">{{nbe.year}}费用预估<br>(含税)(含加成)：</span>
                                </label>
                                <textarea class="form-control radius3" disabled  to-change-number
                                          maxlength="500" name="includeTax"
                                          ng-model="nbe.includeTax" rows="5"
                                          style="max-width: 600px;height:100%;">
                                        </textarea>
                            </div>
                        </div>
                        <!---->
                        <div class="col-md-12">
                            <div class="data-table">
                                <table class="table table-bordered table-hover table-condensed"
                                       id="newbreedExtendTable">
                                    <thead class="bg-gray-white">
                                    <tr class="text-center">
                                        <th rowspan="2" style="vertical-align: middle;background-color: #366092;color: white;"><span>新品属性</span></th>
                                        <th style="background-color: #C5D9F1;">公司收费标准(供参考)</th>
                                        <th colspan="3" style="background-color: #366092;color: white;">其他协定收费标准</th>
                                        <th style="background-color: #366092;color: white;">新品数量</th>
                                        <th colspan="3" style="background-color: #366092;color: white;">超出部分收费(如有则填写,如无则全部留空)</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th style="background-color: #C5D9F1;">参考标准</th>
                                        <th style="background-color: #DCE6F1;">
                                            <div style="width: 101px">收费方式</div>
                                        </th>
                                        <th style="background-color: #DCE6F1;">收费标准</th>
                                        <th style="background-color: #DCE6F1;">单位</th>
                                        <th style="background-color: #DCE6F1;">(个/SKU)</th>
                                        <th style="background-color: #DCE6F1;">收费方式</th>
                                        <th style="background-color: #DCE6F1;">收费标准</th>
                                        <th style="background-color: #DCE6F1;">单位</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="text-center"
                                        ng-class="{'active':dataTableNBExtend.selectRow==$index}"
                                        ng-click="dataTableNBExtend.selectRow=$index"
                                        ng-repeat="row in dataTableNBExtend">

                                        <td>{{row.breadNameName}}
                                        </td>
                                        <td>
                                            <input class="form-control input-xs" disabled
                                                   ng-model="row.standard">
                                        </td>
                                        <td>
                                            <div class="input-group input-group-xs">
                                                <div data-paramcallback="chargeMethodChange"
                                                     data-row="{{dataTableNBExtend.indexOf(row)}}"
                                                     lookup-code="NB_FEE_METHOD"
                                                     name="{{'chargeMethod'+$index}}"
                                                     ng-required="dataTableNBExtendNbFeeThod"
                                                     ng-disabled="dataTableNBExtendFlag || nbe.newPayment !='2' || (storeNumberNoAll.length>0  && row.breadName == '0') || (storeNumberAll.length>0  && row.breadName != '0')"
                                                     ng-model="row.chargeMethod"></div>
                                            </div>
                                        </td>
                                        <td><input class="form-control input-xs"
                                                   ng-disabled="dataTableNBExtendFlag || nbe.newPayment !='2'  || (storeNumberNoAll.length>0  && row.breadName == '0') || (storeNumberAll.length>0  && row.breadName != '0')"  name="{{'feeStandard'+$index}}"
                                                   ng-model="row.feeStandard" ng-required="row.chargeMethod" to-change-number placeholder="输入大于等于1正整数" title="输入大于等于1正整数" data-required-msg="收费标准大于等于1正整数" ng-pattern="/^[1-9]\d*$/"></td>
                                        <td>
                                            <input class="form-control input-xs" disabled ng-model="row.unit">
                                        </td>
                                        <td><input class="form-control input-xs"
                                                   ng-disabled="dataTableNBExtendFlag || !nbe.newPayment || ( (row.breadName == '0'  || row.breadName =='1') && nbe.newPayment == '1')  || (storeNumberNoAll.length>0  && row.breadName == '0') || (storeNumberAll.length>0  && row.breadName != '0')"  name="{{'breadQty'+$index}}"
                                                   to-change-number placeholder="请输入大于等于1正整数" title="请输入大于等于1正整数" data-required-msg="新品数量大于等于1正整数" ng-pattern="/^[1-9]\d*$/"  ng-model="row.breadQty"
                                                   ng-required=" '3' == row.chargeMethod"></td>
                                        <td>
                                            <div class="input-group input-group-xs">
                                                <div data-paramcallback="beyondChargeMethodChange"
                                                     data-row="{{dataTableNBExtend.indexOf(row)}}"
                                                     lookup-code="NB_FEE_METHOD"  name="{{'beyondChargeMethod'+$index}}"
                                                     ng-disabled="dataTableNBExtendFlag || '3' != row.chargeMethod || nbe.newPayment !='2'"
                                                     ng-model="row.beyondChargeMethod"></div>
                                            </div>
                                        </td>
                                        <td><input class="form-control input-xs"  to-change-number
                                                   name="{{'beyondFeeStandard'+$index}}" ng-disabled="dataTableNBExtendFlag || '3' != row.chargeMethod  || nbe.newPayment !='2'"
                                                   ng-model="row.beyondFeeStandard" ng-required="row.beyondChargeMethod" to-change-number placeholder="输入大于等于1正整数" title="输入大于等于1正整数" data-required-msg="收费标准大于等于1正整数" ng-pattern="/^[1-9]\d*$/"></td>
                                        <td><input class="form-control input-xs" disabled
                                                   ng-model="row.beyondUnit"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!---->
                        </form>
                    </div>
                    <!--表单结束-->

                </div>

                <!--NPP服务费结束-->

                <!--问卷调查 start-->
                <div class="tab-pane fade in col-md-12" id="questionnaire">
                    <!--------------------- 按钮--->
                    <div class="bg-gray-white p5">
                        <div class=" pull-right ml10">
                            <button class="btn btn-default btn-xs" id="saveQuestionnaire"
                                    ng-click="saveQuestionnaire(1,questionnaireForm)" ng-disabled = "qIsQuestConfirm =='Y'"
                                    ng-show="true" type="button"
                            >
                                <i class="fa fa-save">保存</i>
                            </button>
                            <button class="btn btn-default btn-xs" id="confirmQuestionnaire"
                                    ng-click="saveQuestionnaire(2,questionnaireForm)" ng-disabled = "qIsQuestConfirm =='Y'"
                                    ng-show="true" type="button"
                            >
                                <i class="fa fa-check">确认</i>
                            </button>
                            <button class="btn btn-default btn-xs" id="CancelQuestionnaire"
                                    ng-click="CancelQuestionnaire()" ng-disabled = "qIsQuestConfirm =='N'"
                                    ng-show="true" type="button"
                            >
                                <i class="fa fa-arrows-h">取消确认</i>
                            </button>
                        </div>
                        <div class="btn-group btn-group-xs ">
                            <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                    class="fa fa-square-o"></i>数据全屏
                            </button>
                        </div>
                    </div>
                    <!---------------------  / .按钮  --->

                    <!--------------------- 输入表单  --->
                    <div class=" mt10 pb5  oh"
                         data-des="此节点必需－用于识别输入表单的指令">
                        <form id="questionnaireForm" name="questionnaireForm">
                            <div style="padding:20px 30px;">
                                <div class="qnDetail"
                                     style="padding:20px;border: 1px dashed #ddd;">
                                    <p class="text-center">
                                        <stwarehouseIdrong style="font-size: 24px;">问卷调查表</stwarehouseIdrong>
                                    </p>
                                    <div id="content" style="overflow: hidden;">
                                    </div>

                                    <!----------------- 问卷表格 start --------------->
                                    <div class="row"></div>
                                    <div ng-show="params.newOrExisting == 'New_Vendor'"  >
                                        <div>
                                            <label style="margin-left: 10px"><i class="fa fa-list-alt"></i>上图新品列表(全新产品需要提供产品清单)</label>
                                            <div class="btn-group btn-group-xs ml5 pull-right">
                                                <button  name="fullWindow" class="btn btn-default  a-black "  onclick="window.location.href='app/base/templates/tta/exampleFlie/ttaNewProductList.xlsx'" ><i class="fa fa-file-excel-o"></i>下载模板</button>
                                                <button class="btn btn-default" type="button" ng-click="btnExportQuestion()" name="fullWindow">
                                                    <i class="fa fa-upload" aria-hidden="true"></i>导出
                                                </button>
                                                <button  class="btn btn-default  a-black "   ng-click="daoru()" ><i class="fa fa-upload"></i>导入</button>
                                                <button type="button" class="btn btn-default btn-xs " ng-disabled="questionDataTable.selectRow == undefined" ng-click="btnDel()"><i class="fa fa-trash-o fa-lg"></i>删除</button>
                                                <button type="button" class="btn btn-default btn-xs" ng-click="btnNew()"><i class="fa fa-plus">增加</i></button>
                                                <!-- <button type="button" class="btn btn-default" ng-click="saveBatchQuestion()"><i class="fa fa-trash-o fa-lg"></i>保存</button> -->
                                            </div>
                                        </div>
                                        <div class="data-table">
                                            <table class="table table-bordered table-hover table-condensed">
                                                <thead class="bg-gray-white">
                                                <tr class="text-center">
                                                    <th>序号</th>
                                                    <th>SKU Description</th>
                                                    <th>Cost</th>
                                                    <th>Retail Price</th>
                                                    <th>Normal GP%</th>
                                                    <th>Promo Price</th>
                                                    <th>Promo GP%</th>
                                                    <th>描述信息</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr class="text-center" ng-repeat="row in questionDataTable"
                                                    ng-class="{'active':questionDataTable.selectRow==$index}"
                                                    ng-click="questionDataTable.selectRow=$index;" >

                                                    <td>
                                                        {{$index + 1}}
                                                    </td>

                                                    <td>
                                                        <input  required="true" name="{{'skuDesc_' + $index}}" class="form-control input-xs"  ng-model="row.skuDesc" type="text"  maxlength="300"  >
                                                    </td>

                                                    <td>
                                                        <input name="{{'cost_' + $index}}"  required class="form-control input-xs" ng-model="row.cost" to-change-number type="text">
                                                    </td>

                                                    <td>
                                                        <input  name="{{'retailPrice_' + $index}}"  required  class="form-control input-xs" ng-model="row.retailPrice"  to-change-number type="text">
                                                    </td>

                                                    <td>
                                                        <input name="{{'normalGp_' + $index}}"   class="form-control input-xs" ng-model="row.normalGp" ng-value="row.normalGp = (row.cost && row.retailPrice) ? ((1 - row.cost/row.retailPrice) * 100).toFixed(2) : '' " disabled>
                                                    </td>

                                                    <td>
                                                        <input name="{{'promoPrice_' + $index}}"   required  class="form-control input-xs" ng-model="row.promoPrice" to-change-number type="text">
                                                    </td>

                                                    <td>
                                                        <input name="{{'promoGp_' + $index}}"   class="form-control input-xs" ng-model="row.promoGp" disabled ng-value="row.promoGp = params.saleType=='B01' ? (row.cost&&row.promoPrice ? ((1-row.cost/row.promoPrice) * 100).toFixed(2) : '')  : (row.cost && row.retailPrice ?  ((1-row.cost/row.retailPrice) * 100).toFixed(2) : '')" />
                                                    </td>

                                                    <td  style="width: 33%">
                                                        <textarea class="form-control input-xs" rows="1" ng-model="row.remark" maxlength="200" placeholder="限制200个字符" style="height: auto"></textarea>
                                                    </td>

                                                </tr>
                                                </tbody>
                                            </table>

                                            <!----------------- 问卷文件上传start --------------->
                                            <div class="row"></div>
                                            <label style="margin-left: 10px"><i class="fa fa-list-alt"></i>附加上传(全新产品需提供产品附件)</label>
                                            <div class="btn-group btn-group-xs ml5 pull-right">
                                                <div class="btn-group btn-group-xs" style="">
                                                    <input  type="file" name="questionFile" id="questionFile" emms-file-upload="myFile">
                                                </div>
                                                <button type="button" ng-disabled="fileDataTable.selectRow == undefined"   ng-click="delUploadFile()" class="btn btn-default btn-xs"  id="delRelSupplierButton"> <i class="fa fa-trash">删除</i></button>
                                                <button type="button"  ng-click="uploadFile()" class="btn btn-primary btn-xs"  id="addRelSupplierButton"><i class="fa fa-plus">上传附件</i></button>
                                            </div>
                                            <div base-data-table="fileDataTable"
                                                 ng-params="fileDataParams"
                                                 data-keys="{'key':'functionId','value':'functionId','name':'模块id'}"
                                                 data-show-index="true"
                                                 data-auto-request="true"
                                                 data-url="findBaseAttachmentList"
                                                 data-legend="[
                                                                     {'value':'createdByUser','name':'上传人'},
                                                                     {'value':'creationDate','name':'上传时间'},
                                                                     {'value':'sourceFileName','name':'上传附件名称'},
                                                                 ]"
                                                 data-func-column = "[{'icon':'fa fa-download','text':'下载附件','callback':'downFileEvent'}]"
                                            >
                                            </div>
                                            <!----------------- 问卷表格 end --------------->
                                        </div>
                                    </div>
                                    <!----------------- 问卷文件上传end  --------------->


                                    <!--问卷清单导出 start -->
                                    <div  class="data-table" ng-show="false">
                                        <div base-data-table="questionDataTable"
                                             ng-params="questionParams"
                                             data-show-index="true"
                                             data-url="queryQuestionNewMapDetailList"
                                             data-keys="{key:'cwId'}"
                                             data-legend="[
                                             {'value':'skuDesc','name':'SKU Description'},
                                             {'value':'cost','name':'Cost'},
                                             {'value':'retailPrice','name':'Retail Price'},
                                             {'value':'normalGp','name':'Normal GP%'},
                                             {'value':'promoPrice','name':'Promo Price'},
                                             {'value':'promoGp','name':'Promo GP%'},
                                             {'value':'remark','name':'描述信息'},
                                        ]"
                                        ></div>
                                    </div>
                                    <!--问卷清单导出 end -->

                                </div>
                            </div>


                        </form>
                    </div>

                    <!--excel 上传 start -->
                    <div class="modal fade" id="excelUp" data-des="EXCEL_UP" data-backdrop="static" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close"
                                            data-dismiss="modal" aria-hidden="true">
                                        &times;
                                    </button>
                                    <h4 class="modal-title" id="fileImportId">
                                        导入
                                    </h4>
                                </div>
                                <form class="ngValid" name="funcMenuForm"  >
                                    <div class="modal-body">
                                        <div class="form-group col-xs-12 col-md-12">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">选择文件</span></label>
                                                <input type="file" required accept="*.xlsx"  id="fileUpLoad">
                                            </div>
                                        </div>
                                        <div class="cb"></div>
                                    </div>

                                    <div class="modal-footer ">
                                        <div style="text-align:center">
                                            <button style="" type="button" class="btn btn-default" data-dismiss="modal">取消
                                            </button>
                                            <button ng-click="uploadSave(funcMenuForm.$invalid)" validate-form-btn="" data-validate-form="funcMenuForm" id="saveButton" class="btn btn-primary mr10">确定</button>
                                        </div>
                                    </div>
                                </form>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal -->
                    </div>
                    <!--excel 上传 end -->

                    <!--表单结束-->
                </div>
                <!--问卷调查 end-->

                <!-- TTA Terms Comparision (TY vs LY) 开始-->
                <div class="tab-pane fadeIn col-md-12" id="termsComparision">
                    <div class=" mt10 pb5 "
                         data-des="此节点必需－用于识别输入表单的指令">

                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10">
                                <button name="printButton" class="btn btn-xs btn-primary fa fa-print pull-right" ng-click="printComparision()"
                                        ng-if="action!='new'" type="button">打印
                                </button>
                                <span>打印次数:{{printCount}}&nbsp;</span>
                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>
                        <div class="data-table" id="ComparisionPrintContentId"  style="width: 99%">
                            <!--<table class="table table-bordered table-hover table-condensed" >-->
                            <table class="table-bordered table-hover table-condensed" id="compTableId">
                                <tr style="background: #428bca !important;">
                                    <th width="70">OI Type</th>
                                    <th width="170">Terms(EN)</th>
                                    <th width="170">Terms(CN)</th>
                                    <!--
                                    <th colspan="{{termsComparisionPartList2.bodyData[0].length/2 - 1}}" width="30">Y{{params.proposalYear - 1}}条款(Contract)</th>
                                    <th colspan="{{termsComparisionPartList2.bodyData[0].length/2}}" width="30">Y{{params.proposalYear}}条款(Proposal)</th>
                                    -->
                                    <th colspan="{{termsComparisionPartList2.leftCol}}" width="30">Y{{params.proposalYear - 1}}条款(Contract)</th>
                                    <th colspan="{{termsComparisionPartList2.rightCol}}" width="30">Y{{params.proposalYear}}条款(Proposal)</th>
                                    <th width="80">Y{{params.proposalYear - 1}}预估费用<br>(含税)(含加成)</th>
                                    <th width="80">Y{{params.proposalYear}}预估费用<br>(含税)(含加成)</th>
                                </tr>

                                <tr ng-repeat="row in termsComparisionPartList1">
                                    <td>{{row.oiType}}</td>
                                    <td>{{row.termsEn}}</td>
                                    <td>{{row.termsCn}}</td>
                                    <!-- <td colspan="{{termsComparisionPartList2.bodyData[0].length/2 - 1}}"  ng-bind-html="row.lastYearTerms|tohtml" ></td>
                                     <td colspan="{{termsComparisionPartList2.bodyData[0].length/2}}" ng-bind-html="row.currentYearTerms|tohtml" ></td>-->
                                    <td colspan="{{termsComparisionPartList2.leftCol}}"  ng-bind-html="row.lastYearTerms|tohtml" ></td>
                                    <td colspan="{{termsComparisionPartList2.rightCol}}" ng-bind-html="row.currentYearTerms|tohtml" ></td>
                                    <td style="text-align:right">{{row.lastYearFeeIntas}}</td>
                                    <td style="text-align:right">{{row.currentYearFeeIntas}}</td>
                                </tr>


                                <tr ng-repeat="row in termsComparisionPartList2.bodyData">
                                    <!-- part1 table head -->
                                    <td ng-show="{{$index == 0}}" rowspan="{{termsComparisionPartList2.bodyData.length}}">
                                        {{termsComparisionPartList2.oiType}}
                                    </td>
                                    <td ng-show="{{$index == 0}}" rowspan="{{termsComparisionPartList2.bodyData.length}}">
                                        {{termsComparisionPartList2.termsEn}}
                                    </td>
                                    <!-- part2 table content -->
                                    <td  ng-repeat="(key2,value2) in row track by key2">{{value2}} </td>
                                    <!--
                                                                        <td ng-repeat="(key3,value3) in (arr[(row[0].length - row.length)]) track by key3" ></td>
                                    -->
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr ng-repeat="row in termsComparisionPartList3">
                                    <td>{{row.oiType}}</td>
                                    <td>{{row.termsEn}}</td>
                                    <td>{{row.termsCn}}</td>
                                    <!-- <td colspan="{{termsComparisionPartList2.bodyData[0].length/2 - 1}}"  ng-bind-html="row.lastYearTerms|tohtml" ></td>
                                     <td colspan="{{termsComparisionPartList2.bodyData[0].length/2}}" ng-bind-html="row.currentYearTerms|tohtml" ></td>-->
                                    <td colspan="{{termsComparisionPartList2.leftCol}}"  ng-bind-html="row.lastYearTerms|tohtml" ></td>
                                    <td colspan="{{termsComparisionPartList2.rightCol}}" ng-bind-html="row.currentYearTerms|tohtml" ></td>
                                    <td style="text-align:right">{{row.lastYearFeeIntas}}</td>
                                    <td style="text-align:right">{{row.currentYearFeeIntas}}</td>
                                </tr>
                            </table>
                            <div class="pageNext" ng-if="($index+1) != pageCount"></div>
                        </div>
                    </div>
                </div>
                <!-- TTA Terms Comparision (TY vs LY) 结束-->

                <!-- 流程图 start-->
                <div class="tab-pane fadeIn col-md-12" id="opnProcess">
                    <div class=" mt10 pb5 "  data-des="此节点必需－用于识别输入表单的指令">
                        <div ng-if="!urlParams.businessKey" ng-show="tabAction== 'opnProcess'" role="tabpanel" class="tab-pane "
                             style="border: 0;width:100%;height: 750px;margin-top:50px; overflow: hidden;position: relative;">
                            <div id="processImg" style="width: 100%;height:100%; overflow: auto;">流程图加载中，请稍候...</div>
                        </div>
                    </div>
                </div>
                <!-- 流程图 end-->

                <!-- 贸易条款 开始-->
                <div class="tab-pane fade in col-md-12" id="tradeClause">
                    <div class=" mt10 pb5  oh"
                         data-des="此节点必需－用于识别输入表单的指令">

                        <div class="bg-gray-white p5">
                            <div class=" pull-right ml10">
                                <button name="printButton" class="btn btn-xs btn-primary fa fa-print pull-right"
                                        ng-click="printTrade()"
                                        ng-if="action!='new'" type="button">打印
                                </button>
                                <!-- <span>打印次数:{{tradePrintCount}} &nbsp;</span>-->
                            </div>
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>
                        <div style="margin: 15px"></div>
                        <div id="printTradeId">
                            <div style="text-align: center; font-size: 25px">
                                <p style="font-weight:bold">{{params.proposalYear}}&nbsp;Trading & Terms Agreement</p>
                                <!--<p style="font-weight:bold">贸易条款</p>-->

                                <p style="color: #f10707;margin-bottom: 10px;font-weight: bold; font-size: 15px; display: inline;">
                                    附件二（1） <span id="contractVId">{{contractParams.agreementEdition}}</span>
                                </p>
                                <p style="font-weight:bold; display: inline; margin: 39%;">贸易条款</p>
                            </div>
                            <div class="container" style="display:inline-block;width:76%">
                                <!-- <div style="color: #f10707;margin-bottom: 10px;margin-left: -9px;font-weight: bold;">
                                     附件二（1） <span id="contractVId">{{contractParams.agreementEdition}}</span>
                                 </div>-->
                                <div class="row f13">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div >Log NO.</div>
                                                <div >编&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号:</div>
                                            </div>

                                        </label>
                                        <div style="border-bottom: 1px solid; width: 12%;display: inline-block;white-space: nowrap;">&nbsp;</div>
                                    </div>
                                </div>
                                <div class="row f13 ">
                                    <!-- <div class="col-md-12"> -->
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <!-- <span class="w100">Brand 供货品牌:</span> -->
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div >Brand</div>
                                                <div >供货品牌:</div>
                                            </div>
                                        </label>
                                        <!--<u>{{contractParams.brandCn}}</u>-->
                                        <div style="border-bottom: 1px solid; width: 12%;display: inline-block;white-space: nowrap;">{{contractParams.brandCn}}</div>

                                    </div>
                                    <!-- </div> -->
                                </div>

                                <div class="row f13">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <!-- <span class="w100">Dept. 部门:</span> -->
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div >Dept.</div>
                                                <div >部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;门:</div>
                                            </div>
                                        </label>
                                        <!-- <u>{{contractParams.deptDesc}}</u>-->
                                        <div style="border-bottom: 1px solid; width: 12%;display: inline-block;white-space: nowrap;">{{contractParams.deptDesc}}</div>
                                    </div>
                                </div>

                                <div class="row f13" style="display: flex;">
                                    <!-- <div class="col-md-2"> -->
                                    <div class="input-group input-group-xs" style="width: 22%">
                                        <label class="input-group-addon bn">
                                            <!-- <span class="w100">Buyer 负责人:</span> -->
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div >Buyer</div>
                                                <div >负&nbsp;&nbsp;责&nbsp;&nbsp;人:</div>
                                            </div>
                                        </label>
                                        <u style="white-space: nowrap">{{contractParams.createdByName}}</u>

                                    </div>
                                    <!-- </div> -->
                                    <!-- <div class="col-md-5"> -->
                                    <div class="input-group input-group-xs" style="width: 32%; text-align: right">
                                        <label class="input-group-addon bn" style="display: inline;">
                                            <span class="w50" style="font-weight: bold; font-size: 13px;">甲方：</span>
                                        </label>
                                        <u class="fb">{{companyName}}</u>
                                    </div>
                                    <!-- </div> -->
                                    <!-- <div class="col-md-5"> -->
                                    <div class="input-group input-group-xs" style="width: 32%; text-align: right">
                                        <label class="input-group-addon bn" style="display: inline;">
                                            <span class="w50"  style="font-weight: bold; font-size: 13px;">乙方：</span>
                                        </label>
                                        <u class="fb">{{contractParams.vendorDesc}}</u>
                                    </div>
                                    <!-- </div> -->
                                </div>

                                <div class="row f13">
                                    <div class="input-group input-group-xs">
                                        <label class="input-group-addon bn">
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div >Supplier Code</div>
                                                <div >供应商编码:</div>
                                            </div>
                                        </label>
                                        <!--<u>{{contractParams.vendorNbr}}</u>-->
                                        <div ng-if="!contractParams.vendorNbr" style="border-bottom: 1px solid; width: 12%;display: inline-block;white-space: nowrap;">&nbsp;</div>
                                        <div ng-if="contractParams.vendorNbr" style="border-bottom: 1px solid; width: 12%;display: inline-block;white-space: nowrap;">{{contractParams.vendorNbr}}</div>
                                    </div>
                                </div>

                                <div class="row f13">
                                    <div class=" input-group-xs">
                                        <label class="input-group-addon bn">
                                            <div class="f13" style="display: flex; justify-content: space-between; width: 160px">
                                                <div ><p ng-if= "params.isCrossYear == 'Y'" style="width: 8px;height: 8px;background-color: #333 !important;display:inline-block;"> </p> <p ng-if= "params.isCrossYear != 'Y'"  style="width: 8px;height: 8px;border: 1px solid #333;display:inline-block;" ng-else></p>  Cross-year</div>
                                                <div > 跨&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;年</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>


                                <div class="row f13 fb" style="margin-top: 0px;">
                                    <!-- <div class="col-md-3"> -->
                                    <div class="input-group input-group-xs">
                                                 <span class="spanBold">
                                                    销售方式:
                                                 </span>
                                    </div>
                                    <!-- </div> -->
                                </div>
                                <div class="row f13 fb"  id="divSaleWay"  style='display: flex; flex-wrap: wrap; font-size: 13px; padding: 5px;'>

                                </div>
                            </div>

                            <!--<div style="display:inline-block; border:1px solid black;width:21%; vertical-align:240%; margin-left: 0.7%;">
                                <div style="display: inline-block;width:49%;vertical-align: top; border-right: 1px solid black;">
                                    <div style="background-color: #eee; text-align: center;font-weight: bold; margin: 2px 0">配送仓库</div>
                                    <div id="warehouseId" style="text-align: center; padding: 1px !important"></div>
                                </div>
                                <div style="display: inline-block; width:50%;  margin-left: -1%;">
                                    <div style="background-color: #eee; text-align: center;font-weight: bold; margin: 1px 0">销售区域</div>
                                    <div id="areaId"></div>
                                </div>
                            </div>-->

                            <div style="display:inline-block; border:1px solid black;width:24%; vertical-align:107px;margin-left: -2%;">
                                <div style="display: inline-block;width:49%;vertical-align: top; border-right: 1px solid black;">
                                    <div style="background-color: #eee; text-align: center;font-weight: bold; margin: 2px 0">配送仓库</div>
                                    <div id="warehouseId" style="text-align: center; padding: 3px !important"></div>
                                </div>
                                <div style="display: inline-block; width:50%;  margin-left: -1%;">
                                    <div style="background-color: #eee; text-align: center;font-weight: bold; margin: 2px 0">销售区域</div>
                                    <div id="areaId"></div>
                                </div>
                            </div>

                            <div style="margin: 15px"></div>
                            <div class="twoTable" style="display: flex">

                                <div class="data-table" id="printContentTerms1"
                                     style="overflow-x:auto; overflow-y: auto; width: 49%; height: auto; border: 1px solid black;">
                                    <!--<table class="table table-bordered table-hover table-condensed" >-->
                                    <table class="table-bordered table-hover table-condensed" style="height: 100%">
                                        <tbody id="tableId">

                                        </tbody>
                                    </table>
                                </div>

                                <div class="data-table" id="printContentTerms2"
                                     style="overflow-x:auto; overflow-y: auto;vertical-align: top; width: 49%; height: auto; border: 1px solid black;">
                                    <table class="table-bordered table-hover table-condensed" style="height: 100%">
                                        <tbody id="part3Table">

                                        </tbody>
                                    </table>
                                </div>

                            </div>

                            <!-- background: gold !important;-->
                            <div style="width: 98%; display:inline-block; margin: 10px 0;">
                                <span style="color: red;background-color: gold !important;">{{termRemark}}</span>
                            </div>
                            <div style="display: flex; ">
                                <div style=" width: 49%">
                                    <div class="input-group input-group-xs">
                                        <span>甲&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;方：{{companyName}}</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>甲方戳章：</span>
                                    </div>
                                    <div class="input-group input-group-xs" style="display: flex;justify-content: flex-start;">
                                        <div>签&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;署：</div>
                                        <div style="border-bottom: 1px solid #333; width: 200px"></div>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>代表姓名：</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>职&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;务：</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>日&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;期：</span>
                                    </div>
                                </div>
                                <div style="width: 49%">
                                    <div class="input-group input-group-xs">
                                        <span>乙&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;方：{{contractParams.vendorDesc}}</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>乙方戳章：</span>
                                    </div>
                                    <div class="input-group input-group-xs" style="display: flex;justify-content: flex-start;">
                                        <div>签&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;署：</div>
                                        <div style="border-bottom: 1px solid #333; width: 200px"></div>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>代表姓名：</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>职&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;务：</span>
                                    </div>
                                    <div class="input-group input-group-xs">
                                        <span>日&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;期：</span>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- 贸易条款 结束-->

                <!-- TTA Summary 开始-->

                <div class="tab-pane fade in col-md-12" id="ttaContractLine">
                    <div class=" mt10 pb5  oh"
                         data-des="此节点必需－用于识别输入表单的指令">

                        <div class=" pull-right ml10">
                            <button class="btn btn-default btn-xs" id="saveTtaContractLine"
                                    ng-click="saveTtaContractLine(ttaContractLineForm)"
                                    ng-show="true" type="button"
                            >
                                <i class="fa fa-save">保存</i>
                            </button>
                        </div>

                        <div class="bg-gray-white p5">
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                        class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>
                        <div data-des="此节点必需－用户计算滚动区域高度" id="ttaContractLineScroll" main-scroll-style>
                            <div class="nicescroll-height  bg-white " data-des="此节点必需-滚动内容及指令"
                                 ng-nicescroll
                                 nice-option="{{niceOpction}}">
                                <!--table 开始-->
                                <form id="ttaContractLineForm" name="ttaContractLineForm">
                                    <div class="data-table" id="ttaContractLineShow">
                                        <table class="table-bordered table-hover table-condensed"
                                               id="ttaContractLineTableId">
                                            <tr style="background: #428bca">
                                                <th style="min-width: 70px;">OI Type</th>
                                                <th >Terms(EN)</th>
                                                <th >Terms(CN)</th>
                                                <th style="min-width: 171px;">备注</th>
                                                <th style="    min-width: 160px;">Y{{ttaContractProposalYear}}条款<br>(System)(含备注)</th>
                                                <th style="    min-width: 160px;">Y{{ttaContractProposalYear}}条款<br>(System)</th>
                                                <th style="min-width: 121px;">预估费用<br>(不含税)(含加成)</th>
                                                <th style="min-width: 121px;">预估费用<br>(含税)(含加成)</th>
                                                <th ng-show="isFlag"  style="min-width: 121px;">【WAS】<br>Y{{ttaContractProposalYear}}条款<br>(System)</th>
                                                <th ng-show="isFlag"  style="min-width: 121px;">【WAS】<br>预估费用<br>(不含税)(含加成)</th>
                                                <th ng-show="isFlag"  style="min-width: 121px;">【WAS】<br>预估费用<br>(含税)(含加成)</th>
                                                <th style="min-width: 121px;">发票类型</th>
                                            </tr>
                                            <tr ng-repeat="row in ttaContractLineTable">
                                                <td>{{row.oiType}}</td>
                                                <td>{{row.termsEn}}</td>
                                                <td>{{row.termsCn}}</td>
                                                <td>
                                                         <textarea class="form-control radius3 "
                                                                   data-required-msg="字符长度长度超过了4000"
                                                                   name="{{'remark'+$index}}"
                                                                   ng-maxlength="4000"
                                                                   ng-model="row.remark"
                                                                   style="height:100%;background-color:#fff;"
                                                                   id="tableDisabledId1"
                                                         >
                                                         </textarea>
                                                </td>
                                                <td >
                                                    <div ng-bind-html="row.termsSystem | tohtml"></div>
                                                </td>
                                                <td>
                                                        <textarea class="form-control radius3 " id="tableDisabledId2"
                                                                  name="{{'termsSystemUp'+$index}}"
                                                                  ng-model="row.termsSystemUp"
                                                                  style="height:100%;background-color:#fff;" ng-disabled="!isFlag" >
                                                         </textarea>
                                                </td>
                                                <td>
                                                        <textarea class="form-control radius3 " id="tableDisabledId3"
                                                                  name="{{'feeNotax'+$index}}" to-change-number
                                                                  ng-model="row.feeNotax"
                                                                  style="height:100%;background-color:#fff;"  ng-disabled="!isFlag">
                                                         </textarea>
                                                </td>
                                                <td>
                                                        <textarea class="form-control radius3 " id="tableDisabledId4"
                                                                  name="{{'feeIntas'+$index}}" to-change-number
                                                                  ng-model="row.feeIntas"
                                                                  style="height:100%;background-color:#fff;" ng-disabled="!isFlag">
                                                         </textarea>
                                                </td>
                                                <td ng-show="isFlag">
                                                    <div ng-bind-html="row.termsSystemOld | tohtml"></div>
                                                </td>
                                                <td ng-show="isFlag">
                                                         <textarea class="form-control radius3"
                                                                   name="{{'feeNotaxOld'+$index}}" to-change-number
                                                                   ng-model="row.feeNotaxOld"  disabled
                                                                   style="height:100%;background-color:#eeeeee;">
                                                         </textarea>
                                                </td>
                                                <td ng-show="isFlag">
                                                        <textarea class="form-control radius3"
                                                                  name="{{'feeIntasOld'+$index}}" to-change-number
                                                                  ng-model="row.feeIntasOld"  disabled
                                                                  style="height:100%;background-color:#eeeeee;">
                                                         </textarea>
                                                </td>
                                                <td style="text-align: center;">{{row.invoiceTypeName}}</td>
                                            </tr>

                                        </table>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!--table 结束-->
                    </div>
                </div>
                <!-- TTA Summary 结束-->

                <!-- 贸易补充协议 开始-->
                <div class="tab-pane fade in col-md-12" id="ttaDeptFeeReport">
                    <div class=" mt10 pb5  oh"    data-des="此节点必需－用于识别输入表单的指令">

                        <div class=" pull-right ml10">
                            <button name="excelButton" class="btn btn-xs btn-primary fa fa-download pull-right"
                                    ng-click="ttaDeptFeeExport()"
                                    style="height: 27px;"
                                    type="button">导出
                            </button>
                            <button name="printButton" class="btn btn-xs btn-primary fa fa-print pull-right"
                                    ng-click="printTtaDeptFeeLFindReport()"
                                    style="height: 27px;"
                                    type="button">打印
                            </button>
                        </div>

                        <div class="bg-gray-white p5">
                            <div class="btn-group btn-group-xs ">
                                <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow">
                                    <i  class="fa fa-square-o"></i>数据全屏
                                </button>
                            </div>
                        </div>

                        <div data-des="此节点必需－用户计算滚动区域高度" id="ttaDeptFeeLFindReportScroll" >
                            <div class="nicescroll-height  bg-white " data-des="此节点必需-滚动内容及指令"   nice-option="{{niceOpction}}">
                                <!--头信息-->
                                <div id="ttaDeptFeeLFindReportPrint" style="width: 99%;">
                                    <div class="col-xs-12 col-md-12 p0"
                                         style="    text-align: center;font-size: 15pt;font-family: Arial;font-weight: bold;margin-top: 20px;">
                                        <label>{{ttaDeptFeeReportHead.proposalYear}}<span>贸易条款之补充协议</span></label>
                                    </div>
                                    <div class="col-xs-12 col-md-12 p0"
                                         style="    text-align: left;font-size: 10pt;font-family: Arial;font-weight: bold;margin-top: 20px;">
                                        <label><span>甲方：</span>{{ttaDeptFeeReportHead.partyA}}</label>
                                    </div>
                                    <div class="col-xs-12 col-md-12 p0"
                                         style="    text-align: left;font-size: 10pt;font-family: Arial;font-weight: bold;">
                                        <label><span>乙方：</span>{{ttaDeptFeeReportHead.vendorName}}</label>
                                    </div>
                                    <div class="col-xs-12 col-md-12 p0"
                                         style="text-align: left;font-size: 10pt;margin-top: 15px;margin-bottom: 10px;">
                                        <label style="font: -webkit-control;"><span>甲乙双方签订了</span>{{ttaDeptFeeReportHead.proposalYear}}<span>年《业务合同书》，针对其附件二《贸易条款》，双方经过协商一致，同意在附件二《贸易条款》基础上，对收费标准进行以下细化及补充:</span></label>
                                    </div>
                                    <!--头信息结束-->
                                    <!--table 开始-->
                                    <div class="data-table" id="ttaDeptFeeLFindReportShow">
                                        <table class="table-bordered table-hover table-condensed"  id="ttaDeptFeeLFindReportTableId"  width="100%">
                                            <tr width="100%">
                                                <th></th>
                                                <th ng-if="ttaDeptFeeReportHead.deptDesc1">
                                                    {{ttaDeptFeeReportHead.deptDesc1}}
                                                </th>
                                                <th ng-if="ttaDeptFeeReportHead.deptDesc2">
                                                    {{ttaDeptFeeReportHead.deptDesc2}}
                                                </th>
                                                <th ng-if="ttaDeptFeeReportHead.deptDesc3">
                                                    {{ttaDeptFeeReportHead.deptDesc3}}
                                                </th>
                                                <!--                                                    <th>部门收费标准</th>-->
                                            </tr>
                                            <tr ng-class=  "{true: 'report', false: ''}[row.flag]"  ng-repeat="row in ttaDeptFeeReportTable">
                                                <td ng-if="row.flag == 'true'" style="    font-size: 12px;" ng-style="{true: 'background-color: #1e90c2 !important ', false: ''}[row.flag]" ng-class="{true: 'proposalReport ', false: ''}[row.flag]">{{row.itemDescCn}}
                                                </td>
                                                <td ng-if="row.flag == 'false'" style="    font-size: 12px;" ng-class="{true: 'proposalReport ', false: ''}[row.flag]">{{row.lineCode + row.itemDescCn}}
                                                </td>
                                                <td style="    font-size: 12px;" ng-class="{true: 'proposalReport ', false: ''}[row.flag]"  ng-if="ttaDeptFeeReportHead.deptDesc1" ng-bind-html="row.unit1 | tohtml">
                                                </td>
                                                <td style="    font-size: 12px;" ng-class="{true: 'proposalReport ', false: ''}[row.flag]" ng-if="ttaDeptFeeReportHead.deptDesc2 " ng-bind-html="row.unit2 | tohtml">
                                                </td>
                                                <td style="    font-size: 12px;" ng-class="{true: 'proposalReport ', false: ''}[row.flag]" ng-if="ttaDeptFeeReportHead.deptDesc3 " ng-bind-html="row.unit3 | tohtml">
                                                </td>
                                                <!--                                                    <td style="    font-size: 12px;" ng-class="{true: 'proposalReport ', false: ''}[row.flag]"  ng-bind-html="row.unit4 | tohtml">>-->
                                                <!--                                                    </td>-->
                                            </tr>
                                        </table>
                                    </div>

                                    <div class="col-xs-12 col-md-12 p0"
                                         style="    text-align: left;font-size: 10pt;font-family: Arial;font-weight: bold;margin-top: 20px;">
                                        <label style="font: -webkit-control;"><span>以上收费按实际执行数量计算,其中促销陈列服务费的实际执行总金额应不少于附件二《贸易条款》载明的金额。<br>本补充协议一式两份,双方各执一份,具同等法律效力。</span></label>
                                    </div>

                                    <div class="col-xs-12 col-md-12 p0"
                                         style="    text-align: left;font-size: 10pt;font-family: Arial;font-weight: bold;margin-top: 20px;">
                                        <table style="width: 50%;">
                                            <tr>
                                                <td>
                                                    <label style="font: -webkit-control;margin-bottom: 25px;">甲方戳章：</label>
                                                </td>
                                                <td>
                                                    <label style="font: -webkit-control;margin-bottom: 25px;">乙方戳章：</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label style="font: -webkit-control;margin-bottom: 25px;">代表：</label>
                                                </td>
                                                <td>
                                                    <label style="font: -webkit-control;margin-bottom: 25px;">代表：</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label style="font: -webkit-control;">日期：</label>
                                                </td>
                                                <td>
                                                    <label style="font: -webkit-control;">日期：</label>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--table 结束-->
                    </div>
                </div>

                <!-- 贸易补充协议结束-->



                <!--部门协定收费标准 开始-->
                <div class="tab-pane fade in col-md-12" id="btnDeptFeeTarget">
                    <!--------------------- 按钮--->
                    <div class="bg-gray-white p5">
                        <div class=" pull-right ml10">

                            <div class="btn-group btn-group-xs" ng-show="!showDeptAgrInfoBoolean">
                                <button class="btn btn-default btn-xs" data-validate-form="deptFeeHAForm"
                                        id="btnSaveA"
                                        ng-click="btnSaveA(deptFeeHAForm,deptFeeHALineForm)" ng-show="true"
                                        type="button"
                                >
                                    <i class="fa fa-save">保存</i>
                                </button>

                                <button class="btn btn-default btn-xs" id="confirmDeptFeeH"
                                        ng-click="confirmDeptFeeH(deptFeeHAForm,deptFeeHALineForm)"
                                        ng-show="true" type="button"
                                >
                                    <i class="fa fa-check">确认</i>
                                </button>
                                <button class="btn btn-default btn-xs" id="CancelConfirmDeptFeeH"
                                        ng-click="CancelConfirmDeptFeeH()"
                                        ng-show="true" type="button"
                                >
                                    <i class="fa fa-arrows-h">取消确认</i>
                                </button>

                                <button class="btn btn-warning btn-xs" id="setStandardValueDeptFeeH"
                                        ng-click="setStandardValue()"
                                        ng-show="true" type="button"
                                >
                                    <i class="fa fa-gears">设置0值</i>
                                </button>
                                <!--    <button class="btn btn-default btn-xs" id="CountDeptFeeH" ng-click="CountDeptFeeH()"
                                            ng-show="true" type="button"
                                    >
                                        <i class="fa fa-exchange">计算</i>
                                    </button>-->
                            </div>


                        </div>
                        <div class="btn-group btn-group-xs ">
                            <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i
                                    class="fa fa-square-o"></i>数据全屏
                            </button>
                        </div>

                        <div class="btn-group btn-group-xs ml10">
                            <button class="btn btn-primary" ng-click="showOldYearDeptAgreement()">
                                <i class="fa fa-square-o"></i>{{yearInfo.lastYear}}部门协定标准信息展示
                            </button>
                        </div>
                    </div>
                    <!---------------------  / .按钮  --->


                    <div data-des="此节点必需－用户计算滚动区域高度" main-scroll-style>
                        <div class="nicescroll-height  bg-white " data-des="此节点必需-滚动内容及指令"
                             ng-nicescroll
                             nice-option="{{niceOpction}}">

                            <!--本年度部门协定标准信息-->
                            <div class="col-xs-12 col-md-12 br p0" ng-show="!showDeptAgrInfoBoolean">


                                <!--------------------- 输入表单  --->

                                <div class=" mt10 pb5  oh"
                                     data-des="此节点必需－用于识别输入表单的指令">


                                    <form id="deptFeeHAForm" name="deptFeeHAForm">
                                        <header class="col-xs-12 mb10">
                                            <i aria-hidden="true" class="fa fa-cog"></i>
                                            <span>部门协定收费标准</span>
                                        </header>


                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100"><i class="red">* </i>年度：</span>
                                                </label>

                                                <input class="form-control radius3" data-date-format="yyyy"
                                                       data-max-view="2" data-min-view="2" data-start-view="2"
                                                       date-time-picker="" disabled ng-model="paramsA.proposalYear "
                                                       required
                                                       type="text">
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100"><i class="red">* </i>部门1：</span></label>
                                                <input class="form-control radius3" ng-model="paramsA.deptDesc1"
                                                       required readonly
                                                       type="text">
                                                <span class="input-group-btn ng-scope">
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('1')"
                                                                type="button" disabled>
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">部门2：</span></label>
                                                <input class="form-control radius3" ng-model="paramsA.deptDesc2"
                                                       type="text" readonly>

                                                <span class="input-group-btn ng-scope">
                                                         <button class="btn btn-default"  ng-click="paramsACancel('2')" ng-disabled="paramsA.isDepartConfirm == 'Y'"
                                                                 type="button"><i class="fa fa-remove"></i></button>
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('2')" ng-disabled="paramsA.isDepartConfirm == 'Y'"
                                                                type="button">
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">部门3：</span></label>
                                                <input class="form-control radius3" ng-model="paramsA.deptDesc3"
                                                       type="text" readonly>
                                                <span class="input-group-btn ng-scope">
                                                     <button class="btn btn-default"  ng-click="paramsACancel('3')" ng-disabled="paramsA.isDepartConfirm == 'Y'"
                                                             type="button"><i class="fa fa-remove"></i></button>
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('3')" ng-disabled="paramsA.isDepartConfirm == 'Y'"
                                                                type="button">
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">是否确认</span>
                                                </label>
                                                <input class=" radius3" disabled ng-false-value="'N'"
                                                       ng-model="paramsA.isDepartConfirm"
                                                       ng-true-value="'Y'"
                                                       type="checkbox">
                                            </div>
                                        </div>


                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">是否跨部门</span>
                                                </label>
                                                <input class=" radius3" disabled ng-false-value="'N'"
                                                       ng-model="paramsA.isTransdepart"
                                                       ng-true-value="'Y'"
                                                       type="checkbox">
                                            </div>
                                        </div>
                                        <div class="row"></div>
                                    </form>
                                </div>
                                <!--表单结束-->

                                <form id="deptFeeHALineForm" name="deptFeeHALineForm">
                                    <div class="col-md-12" id="deptFeeHALine">
                                        <h5 ng-show="promotionFlag"><span class="fa fa-cog mr15"></span>DISPLAY RENTAL 促销陈列服务费 (见以下不同陈列位置收费标准)</h5>
                                        <div ng-show="promotionFlag" class="data-table">
                                            <div style="">
                                                <div class="" id="nicescroll_rpTableDeptFeeLA" ng-nicescroll=""
                                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                                >
                                                    <table
                                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                        <thead class="bg-gray-white">

                                                        <tr class="text-center">
                                                            <th>ITEM 项目</th>
                                                            <th>公司标准</th>
                                                            <th ng-if="paramsA.deptDesc1">协定标准1
                                                                <br>{{paramsA.deptDesc1}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc1">收取单位</th>

                                                            <th ng-if="paramsA.deptDesc2">协定标准2
                                                                <br>{{paramsA.deptDesc2}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc2">收取单位</th>

                                                            <th ng-if="paramsA.deptDesc3">协定标准3
                                                                <br>{{paramsA.deptDesc3}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc3">收取单位</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody ng-nicescroll="" ng-style="tableStyle">

                                                        <tr class="text-center"
                                                            ng-class="{'active':deptFeeLADataTable.selectRow==$index}"
                                                            ng-click="deptFeeLADataTable.selectRow=$index"
                                                            ng-repeat="row in deptFeeLADataTable">

                                                            <td style="text-align: left;">{{row.itemDetail}}</td>
                                                            <td>
                                                                <div class="input-group input-group-xs">
                                                                    <div  disabled
                                                                          lookup-code="UNIT"
                                                                          ng-model="row.unit"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                            <td ng-if="paramsA.deptDesc1">
                                                                <div class="input-group input-group-xs">

                                                                    <input
                                                                            class="form-control radius3"
                                                                            ng-model="row.standardValue1"
                                                                            ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                            type="number"
                                                                            name="{{'standardValue1'+$index}}"
                                                                            ng-required="row.checked == '-1'"
                                                                    />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc1">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT" ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                         ng-model="row.unit1"
                                                                         name="{{'unit1'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-if="paramsA.deptDesc2">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue2"
                                                                        ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                        type="number"
                                                                        name="{{'standardValue2'+$index}}"
                                                                        ng-required="row.checked == '-1'"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc2">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT"
                                                                         ng-model="row.unit2"  ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                         name="{{'unit2'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-if="paramsA.deptDesc3">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue3"
                                                                        ng-disabled="row.checked != '-1'|| paramsA.isDepartConfirm == 'Y' "
                                                                        type="number"
                                                                        name="{{'standardValue3'+$index}}"
                                                                        ng-required="row.checked == '-1'"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc3">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT"
                                                                         ng-model="row.unit3" ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                         name="{{'unit3'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>


                                        </div>


                                        <h5 ng-show="dmFlag || fylerFlag"><span class="fa fa-cog mr15"></span>PROMOTION FUND (LEAFLETS、DM&FLYER) 宣传单张、宣传牌及促销用品推广服务费

                                        </h5>

                                        <div ng-show="dmFlag || fylerFlag" class="data-table">

                                            <div style="">
                                                <div class="" id="nicescroll_rpTableBrandPlnL" ng-nicescroll=""
                                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:'10px',zindex:10}"
                                                >
                                                    <table
                                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                        <thead class="bg-gray-white">

                                                        <tr class="text-center">
                                                            <th>ITEM 项目</th>
                                                            <th><div style="width: 100px;">公司标准</div></th>
                                                            <th ng-if="paramsA.deptDesc1">协定标准1
                                                                <br>{{paramsA.deptDesc1}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc1"><div style="width: 100px;">收取单位</div></th>

                                                            <th ng-if="paramsA.deptDesc2">协定标准2
                                                                <br>{{paramsA.deptDesc2}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc2"><div style="width: 100px;">收取单位</div></th>

                                                            <th ng-if="paramsA.deptDesc3">协定标准3
                                                                <br>{{paramsA.deptDesc3}}
                                                            </th>
                                                            <th ng-if="paramsA.deptDesc3"><div style="width: 100px;">收取单位</div></th>


                                                        </tr>
                                                        </thead>
                                                        <tbody ng-nicescroll="" ng-style="tableStyle">

                                                        <tr class="text-center"
                                                            ng-class="{'active':deptFeeLBDataTable.selectRow==$index}"
                                                            ng-click="deptFeeLBDataTable.selectRow=$index"
                                                            ng-repeat="row in deptFeeLBDataTable">

                                                            <td style="text-align: left;">{{row.itemDetail}}</td>
                                                            <td>
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" disabled
                                                                         lookup-code="UNIT"
                                                                         ng-model="row.unit"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                            <td ng-if="paramsA.deptDesc1">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue1"
                                                                        ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                        type="number"
                                                                        name="{{'standardValue1L'+$index}}"
                                                                        ng-required="row.checked == '-1'"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc1">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT"
                                                                         ng-model="row.unit1"
                                                                         name="{{'unit1L'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                         ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-if="paramsA.deptDesc2">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue2"
                                                                        ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                        type="number"
                                                                        name="{{'standardValue2L'+$index}}"
                                                                        ng-required="row.checked == '-1'"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc2">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT"
                                                                         ng-model="row.unit2" ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                         name="{{'unit2L'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-if="paramsA.deptDesc3">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue3"
                                                                        ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                        type="number"
                                                                        name="{{'standardValue3L'+$index}}"
                                                                        ng-required="row.checked == '-1'"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-if="paramsA.deptDesc3">
                                                                <div class="input-group input-group-xs">
                                                                    <div data-required="true" lookup-code="UNIT"
                                                                         ng-model="row.unit3" ng-disabled="row.checked != '-1' || paramsA.isDepartConfirm == 'Y'"
                                                                         name="{{'unit3L'+$index}}"
                                                                         ng-required="row.checked == '-1'"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>


                                        </div>


                                    </div>
                                </form>

                            </div>

                            <!--往年部门协定标准信息展示 start-->
                            <div class="col-xs-12 col-md-12 br p0" ng-show="showDeptAgrInfoBoolean">
                                <!--------------------- 输入表单  --->
                                <div class=" mt10 pb5  oh"
                                     data-des="此节点必需－用于识别输入表单的指令">


                                    <form id="deptFeeHAForm2" name="deptFeeHAForm2">
                                        <header class="col-xs-12 mb10">
                                            <i aria-hidden="true" class="fa fa-cog"></i>
                                            <span>部门协定收费标准</span>
                                        </header>


                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">年度</span>
                                                </label>

                                                <input class="form-control radius3" data-date-format="yyyy"
                                                       data-max-view="2" data-min-view="2" data-start-view="2"
                                                       date-time-picker="" disabled ng-model="oldProposalInfo.proposalYear "
                                                       type="text">
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">部门1：</span></label>
                                                <input class="form-control radius3" ng-model="oldProposalInfo.deptDesc1"
                                                       readonly
                                                       type="text">
                                                <span class="input-group-btn ng-scope">
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('1')"
                                                                type="button" disabled>
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">部门2：</span></label>
                                                <input class="form-control radius3" ng-model="oldProposalInfo.deptDesc2"
                                                       type="text" readonly>

                                                <span class="input-group-btn ng-scope">
                                                         <button class="btn btn-default"  ng-click="paramsACancel('2')" disabled
                                                                 type="button"><i class="fa fa-remove"></i></button>
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('2')"
                                                                type="button" disabled>
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">部门3：</span></label>
                                                <input class="form-control radius3" ng-model="oldProposalInfo.deptDesc3"
                                                       type="text" readonly>
                                                <span class="input-group-btn ng-scope">
                                                     <button class="btn btn-default"  ng-click="paramsACancel('3')" disabled
                                                             type="button"><i class="fa fa-remove"></i></button>
                                                        <button class="btn btn-default" ng-click="getDeptCodeA('3')"
                                                                type="button" disabled>
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                            </div>
                                        </div>

                                        <!--<div class="form-group col-xs-4 col-md-3">
                                            <div class="input-group input-group-xs">
                                                <label class="input-group-addon bn">
                                                    <span class="w100">是否确认</span>
                                                </label>
                                                <input class=" radius3" disabled ng-false-value="'N'"
                                                       ng-model="oldProposalInfo.isDepartConfirm"
                                                       ng-true-value="'Y'"
                                                       type="checkbox">
                                            </div>
                                        </div>
-->

                                        <!--   <div class="form-group col-xs-4 col-md-3">
                                               <div class="input-group input-group-xs">
                                                   <label class="input-group-addon bn">
                                                       <span class="w100">是否跨部门</span>
                                                   </label>
                                                   <input class=" radius3" disabled ng-false-value="'N'"
                                                          ng-model="oldProposalInfo.isTransdepart"
                                                          ng-true-value="'Y'"
                                                          type="checkbox">
                                               </div>
                                           </div>-->
                                        <div class="row"></div>
                                    </form>
                                </div>
                                <!--表单结束-->

                                <form id="deptFeeHALineForm2" name="deptFeeHALineForm2">
                                    <div class="col-md-12" id="deptFeeHALine2">
                                        <h5><span class="fa fa-cog mr15"></span>DISPLAY RENTAL 促销陈列服务费 (见以下不同陈列位置收费标准)</h5>
                                        <div class="data-table">
                                            <div style="">
                                                <div class="" id="nicescroll_rpTableDeptFeeLA2" ng-nicescroll=""
                                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                                >
                                                    <table
                                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                        <thead class="bg-gray-white">

                                                        <tr class="text-center">
                                                            <th>ITEM 项目</th>
                                                            <th>公司标准</th>
                                                            <th ng-show="oldProposalInfo.deptDesc1">协定标准1
                                                                <br>{{oldProposalInfo.deptDesc1}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc1">收取单位</th>

                                                            <th ng-show="oldProposalInfo.deptDesc2">协定标准2
                                                                <br>{{oldProposalInfo.deptDesc2}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc2">收取单位</th>

                                                            <th ng-show="oldProposalInfo.deptDesc3">协定标准3
                                                                <br>{{oldProposalInfo.deptDesc3}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc3">收取单位</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody ng-nicescroll="" ng-style="tableStyle">

                                                        <tr class="text-center"
                                                            ng-class="{'active':deptFeeLADataTableOldDataA.selectRow==$index}"
                                                            ng-click="deptFeeLADataTableOldDataA.selectRow=$index"
                                                            ng-repeat="row in deptFeeLADataTableOldDataA">

                                                            <td style="text-align: left;">{{row.itemDetail}}</td>
                                                            <td>
                                                                <div class="input-group input-group-xs">
                                                                    <div  disabled
                                                                          lookup-code="UNIT"
                                                                          ng-model="row.unit"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                            <td ng-show="oldProposalInfo.deptDesc1">
                                                                <div class="input-group input-group-xs">

                                                                    <input
                                                                            class="form-control radius3"
                                                                            ng-model="row.standardValue1"
                                                                            disabled
                                                                            type="text"
                                                                    />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc1">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit1"
                                                                          disabled
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-show="oldProposalInfo.deptDesc2">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue2"
                                                                        disabled
                                                                        type="text"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc2">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit2"
                                                                          disabled

                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-show="oldProposalInfo.deptDesc3">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue3"
                                                                        disabled
                                                                        type="text"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc3">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit3"
                                                                          disabled
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>


                                        </div>


                                        <h5><span class="fa fa-cog mr15"></span>
                                            PROMOTION FUND (LEAFLETS、DM&FLYER) 宣传单张、宣传牌及促销用品推广服务费

                                        </h5>

                                        <div class="data-table">

                                            <div style="">
                                                <div class="" id="nicescroll_rpTableBrandPlnL2" ng-nicescroll=""
                                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:'10px',zindex:10}"
                                                >
                                                    <table
                                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                                        <thead class="bg-gray-white">

                                                        <tr class="text-center">
                                                            <th>ITEM 项目</th>
                                                            <th><div style="width: 100px;">公司标准</div></th>
                                                            <th ng-show="oldProposalInfo.deptDesc1">协定标准1
                                                                <br>{{oldProposalInfo.deptDesc1}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc1"><div style="width: 100px;">收取单位</div></th>

                                                            <th ng-show="oldProposalInfo.deptDesc2">协定标准2
                                                                <br>{{oldProposalInfo.deptDesc2}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc2"><div style="width: 100px;">收取单位</div></th>

                                                            <th ng-show="oldProposalInfo.deptDesc3">协定标准3
                                                                <br>{{oldProposalInfo.deptDesc3}}
                                                            </th>
                                                            <th ng-show="oldProposalInfo.deptDesc3"><div style="width: 100px;">收取单位</div></th>


                                                        </tr>
                                                        </thead>
                                                        <tbody ng-nicescroll="" ng-style="tableStyle">

                                                        <tr class="text-center"
                                                            ng-class="{'active':deptFeeLADataTableOldDataB.selectRow==$index}"
                                                            ng-click="deptFeeLADataTableOldDataB.selectRow=$index"
                                                            ng-repeat="row in deptFeeLADataTableOldDataB">

                                                            <td style="text-align: left;">{{row.itemDetail}}</td>
                                                            <td>
                                                                <div class="input-group input-group-xs">
                                                                    <div  disabled
                                                                          lookup-code="UNIT"
                                                                          ng-model="row.unit"
                                                                    ></div>
                                                                </div>
                                                            </td>


                                                            <td ng-show="oldProposalInfo.deptDesc1">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue1"
                                                                        disabled="disabled"
                                                                        type="text"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc1">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit1"
                                                                          disabled
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-show="oldProposalInfo.deptDesc2">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue2"
                                                                        disabled
                                                                        type="text"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc2">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit2"
                                                                          disabled
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                            <td ng-show="oldProposalInfo.deptDesc3">
                                                                <div class="input-group input-group-xs"><input
                                                                        class="form-control radius3"
                                                                        ng-model="row.standardValue3"
                                                                        disabled
                                                                        type="text"
                                                                />
                                                                </div>
                                                            </td>
                                                            <td ng-show="oldProposalInfo.deptDesc3">
                                                                <div class="input-group input-group-xs">
                                                                    <div  lookup-code="UNIT"
                                                                          ng-model="row.unit3"
                                                                          disabled
                                                                    ></div>
                                                                </div>
                                                            </td>

                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>


                                        </div>


                                    </div>
                                </form>
                            </div>

                            <!--往年部门协定标准信息展示 end--->

                        </div>
                    </div>

                    <!--{"flag": "findDept","departmentType":"30","parentDepartmentId":params.majorDeptId}-->
                    <div data-auto-request="true" data-callback="selectDeptFeeAReturn" data-checked-type="radio"
                         data-dynamic-params='{"flag": "findDept","departmentType":"30","parentDepartmentId":""}'
                         data-keys="{'key':'departmentCode','value':'departmentCode','name':'部门编码'}"
                         data-other-column="[{'name':'部门名称','key':'departmentName'}]"
                         data-pagination="{'pageIndex':'1','pageRows':'5'}"
                         data-return-type="key"
                         data-search-key="[{'key':'departmentCode','placeholder':'部门编码'},
                          {'key':'departmentName','placeholder':'部门名称'}]"
                         data-show-index="false"
                         data-title="选择部门信息"
                         data-type="competitor"
                         data-url="findDeptPagination"
                         id="deptFeeALov"
                         lov-list="brandPlnDeptLov"
                         ng-model="current.em"
                         role="dialog"
                    >
                    </div>

                    <div data-auto-request="true" data-callback="selectDeptFeeBReturn" data-checked-type="radio"
                         data-dynamic-params=''
                         data-keys="{'key':'departmentCode','value':'departmentCode','name':'部门编码'}"
                         data-other-column="[{'name':'部门名称','key':'departmentName'}]"
                         data-pagination="{'pageIndex':'1','pageRows':'5'}"
                         data-return-type="key"
                         data-search-key="[{'key':'departmentCode','placeholder':'部门编码'},
                          {'key':'departmentName','placeholder':'部门名称'}]"
                         data-show-index="false"
                         data-title="选择部门信息"
                         data-type="competitor"
                         data-url="findDeptPagination"
                         id="deptFeeBLov"
                         lov-list="brandPlnDeptLov"
                         ng-model="current.em"
                         role="dialog"
                    >
                    </div>


                </div>
                <!--部门协定收费标准 结束-->



                <!--------------------- ttaAnalysis Start  --->
                <!--------------------- 按钮--->
                <div class="tab-pane fade in col-md-12" id="termsAnalysis">
                    <!--------------------- 按钮--->
                    <div class="bg-gray-white p5">

                        <div class="btn-group btn-group-xs ">
                            <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i class="fa fa-square-o"></i>数据全屏
                            </button>
                            <button class="btn btn-primary dataMax" id="saveAnalisis" ng-click="saveAnalisis()">
                                <i class="fa fa-save">保存</i>
                            </button>
                            <button name="printButton" class="btn btn-xs btn-primary fa fa-print pull-right" ng-click="print()"
                                    type="button">打印
                            </button>
                        </div>

                    </div>

                    <!---------------------  / .按钮  --->
                    <div main-scroll-style data-des="此节点必需－用户计算滚动区域高度">
                        <div class="nicescroll-height  bg-white" data-des="此节点必需-滚动内容及指令"
                             ng-nicescroll=""
                             nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:15,zindex:10}"
                        >

                            <!--hmb添加,等到正式上线,这个需要注释,不用此段代码-->
                            <!--startprint-->
                            <div class="data-table" id="printAnalaysisId">

                                <div style="" id="nicescrolAlnlysisMain" main-scroll-style>
                                    <div class="nicescroll-height" ng-nicescroll="" id="nicescroll_dataTable" nice-option="{cursoropacitymin:1,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:15,zindex:50}"
                                    >
                                        <!--table table-bordered table-hover table-condensed-->
                                        <table id = "dataTable"
                                               class=" nicescroll-height table-bordered table-hover">
                                            <thead>
                                            <tr id="anlysis_1" style="background: white !important;" class="text-center">
                                                <!--<th style="width: 80px; border: 0px solid #ddd" align="left">version Code:</th>
                                                <th style="width: 150px; border: 0px solid #ddd" align="left">{{analysisData.versionCode}}</th>-->
                                                <th style="width: 80px; border: 0px solid #ddd" align="left">Log：</th>
                                                <th style="width: 150px; border: 0px solid #ddd" align="left">{{analysisData.batch}}</th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"></th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"><font size="5">{{proposalNewYear}} TTA Terms Analysis</font></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>

                                            <tr  id="anlysis_2" style="background: white !important;" class="text-center">
                                                <!--<th align="left" style="border: 0px solid #ddd">Batch：</th>
                                                <th align="left" style="border: 0px solid #ddd"><div id="ordernbr">{{analysisData.batch}}</div></th>-->
                                                <th align="left" style="border: 0px solid #ddd"></th>
                                                <th align="left" style="border: 0px solid #ddd"><div id="ordernbr"></div></th>
                                                <!--<th colspan="11" rowspan="2"></th>-->
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>
                                            </thead>

                                            <tr  id="anlysis_3" style="background:#D8D8EB !important;height: 3px;border-top:3px solid black !important;"  class="text-center" >
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th colspan="6" style="border-right: 3px solid #000000 !important;"><font size="1" style="height: 3px">{{proposalNewYear}} TTA versus {{proposalNewYear-1}} TTA</font></th>

                                            </tr>

                                            <tr id="anlysis_4"  style="background:#D8D8EB !important;" class="text-center">
                                                <th>Supplier code</th>
                                                <th>Supplier name</th>
                                                <th>Region</th>
                                                <th>Class</th>
                                                <th>Buyer</th>
                                                <th>Owner Dept</th>
                                                <th>Trading mode</th>
                                                <th>Contract<br/>Version</th>
                                                <th colspan="2">Brand</th>
                                                <th>New or Existing<br/>(N/E)</th>
                                                <th>{{proposalNewYear}}Forecast<br/>Purchase(k)</th>
                                                <th>Purchase<br/>+/-%</th>
                                                <th>GP% <br/>+/-%</th>
                                                <th>BEOI% <br/>+/-%</th>
                                                <th>SROI% <br/>+/-%</th>
                                                <th>ABOI% <br/>+/-%</th>
                                                <th>TotalOI%<br/>+/-%</th>
                                                <th style="border-right: 3px solid #000000 !important;">NM%<br/>+/-%</th>
                                            </tr>
                                            <tr id="anlysis_5" style="background:lightyellow !important;border-bottom:3px solid black !important;" class="text-center">
                                                <th align="left">{{header.SupplierCode}}</th>
                                                <th align="left">{{header.SupplierName}}</th>
                                                <th style="white-space: normal;">{{header.Region}}</th>
                                                <th>{{header.Class}}</th>
                                                <th>{{buser}}</th>
                                                <th>{{header.OwnerDept}}</th>
                                                <th style="white-space: normal">{{header.TradingMode}}</th>
                                                <th>{{header.ContractVersion}}</th>
                                                <th colspan="2">{{header.Brand}}</th>
                                                <th>{{header.Ne}}</th>
                                                <th>{{header.fp}}</th>
                                                <th >{{mid.Purchase7}}%</th>
                                                <th>{{gper.gp7}}%</th>
                                                <th>{{header.BEOI}}</th>
                                                <th>{{header.SROI}}</th>
                                                <th>{{header.ABOI}}</th>
                                                <th>{{tail.Purchase7}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin7}}</th>
                                            </tr>
                                            <tr id="anlysis_6" style="background: white !important;">
                                                <th style="display:table-cell; vertical-align:middle;border-right: 3px solid #000000 !important;" colspan="19" rowspan="2"  >{{header.remark}}</th>
                                            </tr>
                                            <tr id="anlysis_7" style="background: white !important;border-right: 3px solid #000000 !important;" class="text-center">
                                            </tr>
                                            <tr id="anlysis_8" style="background:#D8D8EB !important; border-top:3px solid black !important;">
                                                <th  width="300px" style="border-right: 3px solid #000000 !important;display:table-cell; vertical-align:middle;text-align: center" colspan="3" rowspan="3" >
                                                    <div>
                                                        <font style="width: 200px">Terms Comparison</font><br/><br/>
                                                        <font style="width: 200px">('000 RMB, w/ VAT, w/ Markup)</font>
                                                    </div>
                                                </th>
                                                <th colspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}</th>
                                                <th colspan="3" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}</th>
                                                <th colspan="4" style="border-right: 3px solid #000000 !important;">YOY Comparison</th>
                                                <th style="display:table-cell; vertical-align:middle;text-align: center;border-right: 3px solid #000000 !important;" colspan="7" rowspan="3">Remark</th>

                                            </tr>
                                            <tr id="anlysis_9" style="background:#D8D8EB !important;" class="text-center">

                                                <th rowspan="2">{{proposalNewYear-1}}<br/>TTA</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}<br/>Actual</th>
                                                <th rowspan="2">{{proposalNewYear}}<br/>TTA</th>
                                                <th rowspan="2" >{{proposalNewYear}}<br/>On Top</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}<br/>TTA+On Top</th>
                                                <th colspan="2">{{proposalNewYear}} TTA vs {{proposalNewYear-1}}TTA</th>
                                                <th colspan="2">{{proposalNewYear}}TTA+OnTop vs {{proposalNewYear-1}}Act</th>

                                            </tr>
                                            <tr id="anlysis_10" style="background:#D8D8EB !important;" class="text-center">
                                                <th>+/-$</th>
                                                <th>+/-%</th>
                                                <th>+/-$</th>
                                                <th>+/-%</th>

                                            </tr>
                                            <tr id="anlysis_11" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Markup%</th>
                                                <th >{{mid.Markup1}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Markup2}}%</th>
                                                <th id ="markup3">{{mid.Markup3}}%</th>
                                                <!--<th><input type="text" class="form-control radius3" name="Markup4" id = "Markup4" ng-change = "changeMarkUp()"-->
                                                <!--maxlength="255" ng-model="mid.Markup4"></th>-->
                                                <th>0.00%</th>
                                                <th id ="markup5" style="border-right: 3px solid #000000 !important;">{{mid.Markup3}}%</th>
                                                <th>{{mid.Markup6}}</th>
                                                <th>{{mid.Markup7}}%</th>
                                                <th>{{mid.Markup8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Markup9}}%</th>
                                                <th colspan="7" rowspan="6" style="background:mistyrose !important;border-right: 3px solid !important;" >
                                                    <textarea id="premark" style="width: 100%;height: 100%;background: #FFFFFF !important"></textarea>

                                            </tr>
                                            <tr id="anlysis_12" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Free Goods$</th>
                                                <th >{{mid.FreeGood1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.FreeGood2}}</th>
                                                <th id = "freeGood3">{{mid.FreeGood3}}</th>
                                                <th><input style="text-align: center; background: white !important;" type="text" class="form-control radius3" name="FreeGood4" id = "FreeGood4" ng-change = "changefreeGoods()"
                                                           maxlength="255" ng-model="mid.FreeGood4"></th>
                                                <th id = "freeGood5" style="border-right: 3px solid #000000 !important;">{{mid.FreeGood5}}</th>
                                                <th>{{mid.FreeGood6}}</th>
                                                <th>{{mid.FreeGood7}}%</th>
                                                <th>{{mid.FreeGood8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.FreeGood9}}%</th>
                                            </tr>
                                            <tr id="anlysis_13" style="background:#F5FFFA !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Purchase$</th>
                                                <th>{{mid.Purchase1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase2}}</th>
                                                <th>{{mid.Purchase3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase5}}</th>
                                                <th>{{mid.Purchase6}}</th>
                                                <th>{{mid.Purchase7}}%</th>
                                                <th>{{mid.Purchase8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase9}}%</th>
                                            </tr>
                                            <tr id="anlysis_14" style="background:#F5FFFA !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Sales$</th>
                                                <th>{{mid.Salse1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse2}}</th>
                                                <th>{{mid.Salse3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse5}}</th>
                                                <th>{{mid.Salse6}}</th>
                                                <th>{{mid.Salse7}}%</th>
                                                <th>{{mid.Salse8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse9}}%</th>
                                            </tr>
                                            <tr id="anlysis_15" style="background:#F5FFFA !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">GP$</th>
                                                <th>{{mid.GP1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP2}}</th>
                                                <th>{{mid.GP3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP5}}</th>
                                                <th>{{mid.GP6}}</th>
                                                <th>{{mid.GP7}}%</th>
                                                <th>{{mid.GP8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP9}}%</th>

                                            </tr>
                                            <tr id="anlysis_16" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">GP%(as of Forecast/Actual sales)</th>
                                                <th>{{gper.gp1}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{gper.gp2}}%</th>
                                                <th id="gperGp3">{{gper.gp3}}%</th>
                                                <th id="gperGp4">{{gper.gp4}}%</th>
                                                <th id="gperGp5" style="border-right: 3px solid #000000 !important;">{{gper.gp5}}%</th>
                                                <th>n/a</th>
                                                <th>{{gper.gp7}}%</th>
                                                <th>n/a</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{gper.gp9}}%</th>
                                            </tr>

                                            <tr id="anlysis_17" style="background:#F5FFFA !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI$</th>
                                                <th>{{tail.OI1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI2}}</th>
                                                <th>{{tail.OI3}}</th>
                                                <th id = "totalsum">0</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI5}}</th>
                                                <th>{{tail.OI6}}</th>
                                                <th>{{tail.OI7}}</th>
                                                <th>{{tail.OI8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI9}}</th>
                                                <th ng-if="userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;" colspan="7" rowspan="3"></th>
                                            </tr>

                                            <tr id="anlysis_18" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI%(as of Purchase)</th>
                                                <th>{{tail.Purchase1}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase2}}</th>
                                                <th>{{tail.Purchase3}}</th>
                                                <th>{{tail.Purchase4}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase5}}</th>
                                                <th>{{tail.Purchase6}}</th>
                                                <th>{{tail.Purchase7}}</th>
                                                <th>{{tail.Purchase8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase9}}</th>
                                            </tr>

                                            <tr id="anlysis_19" style="background:#D3FF93 !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI%(as of Forecast/Actual sales)</th>
                                                <th>{{tail.Sales1}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales2}}%</th>
                                                <th>{{tail.Sales3}}%</th>
                                                <th>{{tail.Sales4}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales5}}%</th>
                                                <th>{{tail.Sales6}}</th>
                                                <th>{{tail.Sales7}}</th>
                                                <th>{{tail.Sales8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales9}}</th>
                                            </tr>

                                            <tr id="anlysis_20" style="background:#D8D8EB !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Net Margin%(as of Forecast/Actual sales)</th>
                                                <th>{{tail.netMargin1}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin2}}%</th>
                                                <th>{{tail.netMargin3}}%</th>
                                                <th>{{tail.netMargin4}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin5}}%</th>
                                                <th>{{tail.netMargin6}}</th>
                                                <th>{{tail.netMargin7}}</th>
                                                <th>{{tail.netMargin8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin9}}</th>
                                                <th ng-if="userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;text-align: left" colspan="7" align="left">{{Benchmark}}</th>
                                            </tr>

                                            <tr id="anlysis_21" style="background:white !important;border-right: 3px solid !important;height: 3px;border-top: 3px solid !important;" >
                                                <th  align="left" style="vertical-align: middle; border-bottom:3px solid black !important;">Prepared by BIC:</th>
                                                <th style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="6"></th>
                                                <th style="vertical-align: middle;border-bottom:3px solid black !important;">Approved by:</th>
                                                <th style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="12" align="left"></th>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>

                            <!--endprint-->

                            <!--hmb注释,等上到正式上线,再放开此段代码-->
                            <!--startprint-->
                            <!--<div class="data-table" id="printAnalaysisId">

                                <div style="" id="nicescrolAlnlysisMain" main-scroll-style>
                                    <div class="nicescroll-height" ng-nicescroll="" id="nicescroll_dataTable" nice-option="{cursoropacitymin:1,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:15,zindex:50}"
                                    >
                                        &lt;!&ndash;table table-bordered table-hover table-condensed&ndash;&gt;
                                        <table id = "dataTable"
                                               class=" nicescroll-height table-bordered table-hover">
                                            <thead>
                                            <tr id="anlysis_1" style="background: white !important;" class="text-center">
                                                &lt;!&ndash;<th style="width: 80px; border: 0px solid #ddd" align="left">version Code:</th>
                                                <th style="width: 150px; border: 0px solid #ddd" align="left">{{analysisData.versionCode}}</th>&ndash;&gt;
                                                <th rowspan="2" style="width: 80px; border: 0px solid #ddd" align="left">Log：</th>
                                                <th rowspan="2" style="width: 150px; border: 0px solid #ddd" align="left"><div id="ordernbr">{{analysisData.batch}}</div></th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"></th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"><font size="5">{{proposalNewYear}} TTA Terms Analysis</font></th>
                                                <th rowspan="2" colspan="10"></th>
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>

                                            <tr  id="anlysis_2" style="background: white !important;" class="text-center">
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>
                                            </thead>

                                            <tr  id="anlysis_3" style="background:#D8D8EB !important;height: 3px;border-top:3px solid black !important;"  class="text-center" >
                                                <th colspan="13"></th>
                                                <th colspan="6" style="border-right: 3px solid #000000 !important;"><font size="1" style="height: 3px">{{proposalNewYear}} TTA versus {{proposalNewYear-1}} TTA</font></th>
                                            </tr>

                                            <tr id="anlysis_4"  style="background:#D8D8EB !important;" class="text-center">
                                                <th>Supplier code</th>
                                                <th>Supplier name</th>
                                                <th>Region</th>
                                                <th>Class</th>
                                                <th>Buyer</th>
                                                <th>Owner Dept</th>
                                                <th>Trading mode</th>
                                                <th>Contract<br/>Version</th>
                                                <th colspan="2">Brand</th>
                                                <th>New or Existing<br/>(N/E)</th>
                                                <th>{{proposalNewYear}}Forecast<br/>Purchase(k)</th>
                                                <th>Purchase<br/>+/-%</th>
                                                <th>GP% <br/>+/-%</th>
                                                <th>BEOI% <br/>+/-%</th>
                                                <th>SROI% <br/>+/-%</th>
                                                <th>ABOI% <br/>+/-%</th>
                                                <th>TotalOI%<br/>+/-%</th>
                                                <th style="border-right: 3px solid #000000 !important;">NM%<br/>+/-%</th>
                                            </tr>
                                            <tr id="anlysis_5" style="background:lightyellow !important;border-bottom:3px solid black !important;" class="text-center">
                                                <th align="left">{{header.SupplierCode}}</th>
                                                <th align="left">{{header.SupplierName}}</th>
                                                <th style="white-space: normal;">{{header.Region}}</th>
                                                <th>{{header.Class}}</th>
                                                <th>{{buser}}</th>
                                                <th>{{header.OwnerDept}}</th>
                                                <th style="white-space: normal">{{header.TradingMode}}</th>
                                                <th>{{header.ContractVersion}}</th>
                                                <th colspan="2" style="white-space: normal">{{header.Brand}}</th>
                                                <th>{{header.Ne}}</th>
                                                <th>{{header.fp}}</th>
                                                <th >{{mid.Purchase7}}%</th>
                                                <th>{{gper.gp7}}%</th>
                                                <th>{{header.BEOI}}</th>
                                                <th>{{header.SROI}}</th>
                                                <th>{{header.ABOI}}</th>
                                                <th>{{tail.Purchase7}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin7}}</th>
                                            </tr>
                                            <tr id="anlysis_6" style="background: white !important;">
                                                <th style="display:table-cell; vertical-align:middle;border-right: 3px solid #000000 !important;" colspan="19" rowspan="2"  >{{header.remark}}</th>
                                            </tr>
                                            <tr id="anlysis_7" style="background: white !important;border-right: 3px solid #000000 !important;" class="text-center">
                                            </tr>
                                            <tr id="anlysis_8" style="background:#D8D8EB !important; border-top:3px solid black !important;">
                                                <th  width="300px" style="border-right: 3px solid #000000 !important;display:table-cell; vertical-align:middle;text-align: center" colspan="3" rowspan="3" >
                                                    <div>
                                                        <font style="width: 200px">Terms Comparison</font><br/><br/>
                                                        <font style="width: 200px">('000 RMB, w/ VAT, w/ Markup)</font>
                                                    </div>
                                                </th>
                                                <th colspan="4" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}</th>
                                                <th colspan="3" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}</th>
                                                <th colspan="4" style="border-right: 3px solid #000000 !important;">YOY Comparison</th>
                                                <th style="display:table-cell; vertical-align:middle;text-align: center;border-right: 3px solid #000000 !important;" colspan="7" rowspan="3">Remark</th>

                                            </tr>
                                            <tr id="anlysis_9" style="background:#D8D8EB !important;" class="text-center">

                                                <th rowspan="2">{{proposalNewYear-1}}<br/>TTA</th>
                                                <th rowspan="2">{{proposalNewYear-1}}<br/>On Top</th>
                                                <th rowspan="2">{{proposalNewYear-1}}<br/>TTA+On Top</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}<br/>Actual</th>
                                                <th rowspan="2">{{proposalNewYear}}<br/>TTA</th>
                                                <th rowspan="2" >{{proposalNewYear}}<br/>On Top</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}<br/>TTA+On Top</th>
                                                <th colspan="2">{{proposalNewYear}} TTA+On Top vs<br/>{{proposalNewYear-1}} TTA+On Top</th>
                                                <th colspan="2">{{proposalNewYear}}TTA+OnTop vs<br/>{{proposalNewYear-1}}Act</th>

                                            </tr>
                                            <tr id="anlysis_10" style="background:#D8D8EB !important;" class="text-center">
                                                <th>+/-$</th>
                                                <th>+/-%</th>
                                                <th>+/-$</th>
                                                <th>+/-%</th>

                                            </tr>
                                            <tr id="anlysis_11" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Markup%</th>
                                                <th >{{mid.Markup1}}%</th>
                                                <th >{{mid.MarkupOnTop}}%</th>
                                                <th >{{mid.MarkupTtaOnTop}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Markup2}}%</th>
                                                <th id ="markup3">{{mid.Markup3}}%</th>
                                                &lt;!&ndash;<th><input type="text" class="form-control radius3" name="Markup4" id = "Markup4" ng-change = "changeMarkUp()"&ndash;&gt;
                                                &lt;!&ndash;maxlength="255" ng-model="mid.Markup4"></th>&ndash;&gt;
                                                <th>0.00%</th>
                                                <th id ="markup5" style="border-right: 3px solid #000000 !important;">{{mid.Markup3}}%</th>
                                                <th>{{mid.Markup6}}</th>
                                                <th>{{mid.Markup7}}%</th>
                                                <th>{{mid.Markup8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Markup9}}%</th>
                                                <th colspan="7" rowspan="8" style="background:mistyrose !important;border-right: 3px solid #000000 !important;" >
                                                    <textarea id="premark" style="width: 100%;height: 100%;background: #FFFFFF !important"></textarea>

                                            </tr>
                                            <tr id="anlysis_12" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Free Goods$</th>
                                                <th >{{mid.FreeGood1}}</th>
                                                <th ><input style="text-align: center; background: white !important;" type="text" class="form-control radius3" name="FreeGood112" id = "FreeGood112" ng-change = "changeOldfreeGoods()"
                                                            maxlength="255" ng-model="mid.FreeGood112"></th>
                                                <th id="FreeGood113" ng-bind="mid.FreeGood113"></th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.FreeGood2}}</th>
                                                <th id = "freeGood3">{{mid.FreeGood3}}</th>
                                                <th><input style="text-align: center; background: white !important;" type="text" class="form-control radius3" name="FreeGood4" id = "FreeGood4" ng-change = "changefreeGoods()"
                                                            maxlength="255" ng-model="mid.FreeGood4"></th>
                                                <th id = "freeGood5" style="border-right: 3px solid #000000 !important;">{{mid.FreeGood5}}</th>
                                                <th>{{mid.FreeGood6}}</th>
                                                <th>{{mid.FreeGood7}}%</th>
                                                <th>{{mid.FreeGood8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.FreeGood9}}%</th>
                                            </tr>
                                            <tr id="anlysis_13" style="background:#F5FFFA !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Purchase$</th>
                                                <th>{{mid.Purchase1}}</th>
                                                <th>{{mid.Purchase112}}</th>
                                                <th>{{mid.Purchase113}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase2}}</th>
                                                <th>{{mid.Purchase3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase5}}</th>
                                                <th>{{mid.Purchase6}}</th>
                                                <th>{{mid.Purchase7}}%</th>
                                                <th>{{mid.Purchase8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Purchase9}}%</th>
                                            </tr>
                                            <tr id="anlysis_14" style="background:#F5FFFA !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Sales$</th>
                                                <th>{{mid.Salse1}}</th>
                                                <th >{{mid.Salse112}}</th>
                                                <th >{{mid.Salse113}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse2}}</th>
                                                <th>{{mid.Salse3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse5}}</th>
                                                <th>{{mid.Salse6}}</th>
                                                <th>{{mid.Salse7}}%</th>
                                                <th>{{mid.Salse8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.Salse9}}%</th>
                                            </tr>
                                            <tr id="add_new_Anlysis_14" style="background:#F5FFFA !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Sales / Purchase %</th>
                                                <th>{{mid.SalsePurchase1}}%</th>
                                                <th >{{mid.SalsePurchase2}}</th>
                                                <th >{{mid.SalsePurchase3}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.SalsePurchase4}}%</th>
                                                <th>{{mid.SalsePurchase5}}%</th>
                                                <th>{{mid.SalsePurchase6}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.SalsePurchase7}}%</th>
                                                <th>{{mid.SalsePurchase8}}</th>
                                                <th>{{mid.SalsePurchase9}}%</th>
                                                <th>{{mid.SalsePurchase10}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.SalsePurchase11}}%</th>
                                            </tr>
                                            <tr id="blank_line_1" style="height: 13px">
                                                <th colspan="14" style="border: 2px solid #000000 !important;"></th>
                                            </tr>
                                            <tr id="anlysis_15" style="background:#F5FFFA !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">GP$</th>
                                                <th>{{mid.GP1}}</th>
                                                <th >{{mid.GP112}}</th>
                                                <th >{{mid.GP113}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP2}}</th>
                                                <th>{{mid.GP3}}</th>
                                                <th>-</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP5}}</th>
                                                <th>{{mid.GP6}}</th>
                                                <th>{{mid.GP7}}%</th>
                                                <th>{{mid.GP8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{mid.GP9}}%</th>

                                            </tr>
                                            <tr id="anlysis_16" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">GP%(as of Forecast/Actual sales)</th>
                                                <th>{{gper.gp1}}%</th>
                                                <th >{{gper.gp112}}%</th>
                                                <th >{{gper.gp113}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{gper.gp2}}%</th>
                                                <th id="gperGp3">{{gper.gp3}}%</th>
                                                <th id="gperGp4">{{gper.gp4}}%</th>
                                                <th id="gperGp5" style="border-right: 3px solid #000000 !important;">{{gper.gp5}}%</th>
                                                <th>n/a</th>
                                                <th>{{gper.gp7}}%</th>
                                                <th>n/a</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{gper.gp9}}%</th>
                                            </tr>

                                            <tr id="anlysis_17" style="background:#F5FFFA !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI$</th>
                                                <th>{{tail.OI1}}</th>
                                                <th id="oldTotalSum" ng-bind="tail.OI112"></th>
                                                <th ng-bind="tail.OI113"></th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI2}}</th>
                                                <th>{{tail.OI3}}</th>
                                                <th id = "totalsum">0</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI5}}</th>
                                                <th>{{tail.OI6}}</th>
                                                <th>{{tail.OI7}}</th>
                                                <th>{{tail.OI8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.OI9}}</th>
                                                <th ng-if="userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;" colspan="7" rowspan="3"></th>
                                            </tr>

                                            <tr id="anlysis_18" style="background:#D3FF93 !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI%(as of Purchase)</th>
                                                <th>{{tail.Purchase1}}</th>
                                                <th >{{tail.Purchase112}}</th>
                                                <th >{{tail.Purchase113}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase2}}</th>
                                                <th>{{tail.Purchase3}}</th>
                                                <th>{{tail.Purchase4}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase5}}</th>
                                                <th>{{tail.Purchase6}}</th>
                                                <th>{{tail.Purchase7}}</th>
                                                <th>{{tail.Purchase8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Purchase9}}</th>
                                            </tr>

                                            <tr id="anlysis_19" style="background:#D3FF93 !important;" >
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Total OI%(as of Forecast/Actual sales)</th>
                                                <th>{{tail.Sales1}}%</th>
                                                <th >{{tail.Sales112}}%</th>
                                                <th >{{tail.Sales113}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales2}}%</th>
                                                <th>{{tail.Sales3}}%</th>
                                                <th>{{tail.Sales4}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales5}}%</th>
                                                <th>{{tail.Sales6}}</th>
                                                <th>{{tail.Sales7}}</th>
                                                <th>{{tail.Sales8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.Sales9}}</th>
                                            </tr>

                                            <tr id="anlysis_20" style="background:#D8D8EB !important;">
                                                <th colspan="3" align="left" style="border-right: 3px solid #000000 !important;">Net Margin%(as of Forecast/Actual sales)</th>
                                                <th>{{tail.netMargin1}}%</th>
                                                <th >{{tail.netMargin112}}%</th>
                                                <th >{{tail.netMargin113}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin2}}%</th>
                                                <th>{{tail.netMargin3}}%</th>
                                                <th>{{tail.netMargin4}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin5}}%</th>
                                                <th>{{tail.netMargin6}}</th>
                                                <th>{{tail.netMargin7}}</th>
                                                <th>{{tail.netMargin8}}</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{tail.netMargin9}}</th>
                                                <th ng-if="userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;text-align: left" colspan="7" align="left">{{Benchmark}}</th>
                                            </tr>

                                            <tr id="anlysis_21" style="background:white !important;border-right: 3px solid !important;height: 3px;border-top: 3px solid !important;" >
                                                <th  align="left" style="vertical-align: middle; border-bottom:3px solid black !important;">Prepared by BIC:</th>
                                                <th style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="8"></th>
                                                <th style="vertical-align: middle;border-bottom:3px solid black !important;">Approved by:</th>
                                                <th style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="12" align="left"></th>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>-->

                            <!--endprint-->



                        </div>
                    </div>

                </div>
                <!--termsAnalysis End-->

                <!--ttaAnalysis测试 开始-->
                <div class="tab-pane fade in col-md-12" id="termsNewAnalysis">
                    <!--------------------- 按钮--->
                    <div class="bg-gray-white p5">

                        <div class="btn-group btn-group-xs ">
                            <button class="btn btn-primary dataMax" ng-click="fullWindow($event)" name="fullWindow"><i class="fa fa-square-o"></i>数据全屏
                            </button>
                            <button class="btn btn-primary dataMax" id="saveAnalisisTest" ng-click="saveAnalyisisByButton()">
                                <i class="fa fa-save">保存</i>
                            </button>
                            <button name="printButton" class="btn btn-xs btn-primary fa fa-print pull-right" ng-click="analysisPrint()"
                                    type="button">打印
                            </button>
                            <button name="printButton" class="btn btn-xs btn-primary fa fa-refresh pull-right" ng-click="analysisRefresh()"
                                    type="button">刷新
                            </button>
                        </div>

                    </div>

                    <!---------------------  / .按钮  --->
                    <div main-scroll-style data-des="此节点必需－用户计算滚动区域高度">
                        <div class="nicescroll-height  bg-white" data-des="此节点必需-滚动内容及指令"
                             nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2',autohidemode:false,cursorwidth:15,zindex:10}"
                        >

                            <div class="data-table">

                                <div style="" id="nicescrolNewAlnlysisMain" main-scroll-style>
                                    <div class="nicescroll-height" ng-nicescroll="" id="nicescroll_dataTable_test" nice-option="{{AnalaysisNiceOpction}}"
                                    >
                                        <table id = "analysisDataTableId"
                                               class=" nicescroll-height table-bordered table-hover">
                                            <thead>
                                            <tr id="anlysis_new_1" style="background: white !important;" class="text-center">
                                                <th rowspan="2" style="width: 80px; border: 0px solid #ddd" align="left">Log：</th>
                                                <th rowspan="2" style="width: 150px; border: 0px solid #ddd" align="left">{{analysisHeader.batchNumber}}</th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"></th>
                                                <th colspan="3" rowspan="2" style="border: 0px solid #ddd"><font size="5">{{proposalNewYear}} TTA Terms Analysis</font></th>
                                                <th rowspan="2" colspan="10"></th>
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>

                                            <tr  id="anlysis_new_2" style="background: white !important;" class="text-center">
                                                <th style="border-right: 3px solid #000000 !important;"></th>
                                            </tr>
                                            </thead>

                                            <tr  id="anlysis_new_3" style="background:#D8D8EB !important;height: 3px;border-top:3px solid black !important;"  class="text-center" >
                                                <th colspan="13"></th>
                                                <th colspan="6" style="border-right: 3px solid #000000 !important;"><font size="1" style="height: 3px">{{proposalNewYear}} TTA versus {{proposalNewYear-1}} TTA</font></th>
                                            </tr>

                                            <tr id="anlysis_new_4"  style="background:#D8D8EB !important;" class="text-center">
                                                <th>Supplier code</th>
                                                <th>Supplier name</th>
                                                <th>Region</th>
                                                <th>Class</th>
                                                <th>Buyer</th>
                                                <th>Owner Dept</th>
                                                <th>Trading mode</th>
                                                <th>Contract<br/>Version</th>
                                                <th colspan="2">Brand</th>
                                                <th>New or Existing<br/>(N/E)</th>
                                                <th>{{proposalNewYear}}Forecast<br/>Purchase(k)</th>
                                                <th>Purchase<br/>+/-%</th>
                                                <th>GP% <br/>+/-%</th>
                                                <th>BEOI% <br/>+/-%</th>
                                                <th>SROI% <br/>+/-%</th>
                                                <th>ABOI% <br/>+/-%</th>
                                                <th>TotalOI%<br/>+/-%</th>
                                                <th style="border-right: 3px solid #000000 !important;">NM%<br/>+/-%</th>
                                            </tr>
                                            <tr id="anlysis_new_5" style="background:lightyellow !important;border-bottom:3px solid black !important;" class="text-center">
                                                <th align="left">{{analysisHeader.supplierCode}}</th>
                                                <th align="left">{{analysisHeader.supplierName}}</th>
                                                <th style="white-space: normal;">{{analysisHeader.region}}</th>
                                                <th>{{analysisHeader.classs}}</th>
                                                <th>{{analysisHeader.buyer}}</th>
                                                <th>{{analysisHeader.ownerDept}}</th>
                                                <th style="white-space: normal">{{analysisHeader.tradingMode}}</th>
                                                <th>{{analysisHeader.contractVersion}}</th>
                                                <th colspan="2" style="white-space: normal">{{analysisHeader.brand}}</th>
                                                <th>{{analysisHeader.newOrExisting}}</th>
                                                <th>{{analysisHeader.forecastPurchase | number:0}}</th>
                                                <th>{{analysisHeader.purchase | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th>{{analysisHeader.gp | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th>{{analysisHeader.beoi | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th>{{analysisHeader.sroi | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th>{{analysisHeader.aboi | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th>{{analysisHeader.totaloi | number:2 | changeNumberToPosiNumber}}%</th>
                                                <th style="border-right: 3px solid #000000 !important;">{{analysisHeader.nm | number:2 | changeNumberToPosiNumber}}%</th>
                                            </tr>
                                            <!--如下行没用到,故注释-->
                                            <!-- <tr id="anlysistest_6" style="background: white !important;">
                                                 <th style="display:table-cell; vertical-align:middle;border-right: 3px solid #000000 !important;" colspan="19" rowspan="2"  >{{header.remark}}</th>
                                             </tr>-->
                                            <tr id="anlysis_new_6" style="background: white !important;border: 3px solid #000000 !important;height: 10px" class="text-center">
                                                <td colspan="19" style="border-right: 3px solid #000000 !important;"></td>
                                            </tr>
                                            <tr id="anlysis_new_7" style="background:#D8D8EB !important; border-top:3px solid black !important;">
                                                <th  width="300px" style="border-right: 3px solid #000000 !important;display:table-cell; vertical-align:middle;text-align: center" colspan="3" rowspan="3" >
                                                    <div>
                                                        <font style="width: 200px">Terms Comparison</font><br/><br/>
                                                        <font style="width: 200px">('000 RMB, w/ VAT, w/ Markup)</font>
                                                    </div>
                                                </th>
                                                <th colspan="4" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}</th>
                                                <th colspan="3" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}</th>
                                                <th colspan="4" style="border-right: 3px solid #000000 !important;">YOY Comparison</th>
                                                <th style="display:table-cell; vertical-align:middle;text-align: center;border-right: 3px solid #000000 !important;" colspan="7" rowspan="3">Remark</th>
                                            </tr>
                                            <tr id="anlysis_new_8" style="background:#D8D8EB !important;" class="text-center">
                                                <th rowspan="2">{{proposalNewYear-1}}<br/>TTA</th>
                                                <th rowspan="2">{{proposalNewYear-1}}<br/>On Top</th>
                                                <th rowspan="2">{{proposalNewYear-1}}<br/>TTA+On Top</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear-1}}<br/>Actual</th>
                                                <th rowspan="2">{{proposalNewYear}}<br/>TTA</th>
                                                <th rowspan="2" >{{proposalNewYear}}<br/>On Top</th>
                                                <th rowspan="2" style="border-right: 3px solid #000000 !important;">{{proposalNewYear}}<br/>TTA+On Top</th>
                                                <th colspan="2">{{proposalNewYear}} TTA+On Top vs<br/>{{proposalNewYear-1}} TTA+On Top</th>
                                                <th colspan="2">{{proposalNewYear}}TTA+OnTop vs<br/>{{proposalNewYear-1}}Act</th>
                                            </tr>
                                            <tr id="anlysis_new_9" style="background:#D8D8EB !important;" class="text-center">
                                                <th>+/-$</th>
                                                <th>+/-%</th>
                                                <th>+/-$</th>
                                                <th>+/-%</th>
                                            </tr>

                                            <!--ng-style="{'background-color':($index == 0 || $index == 4) ? '#D3FF93 !important':'#F5FFFA !important'}"-->
                                            <tr id="analysisId_topPart1_{{$index}}" ng-class="{'analysis-row-bg-2':($index == 0 || $index == 4),'analysis-row-bg-1':($index != 0 && $index != 4)}"  style="font-weight: bold" ng-repeat="row in analysisLineTopPart1 track by $index" >
                                                <td colspan="3" align="left" style="border-right: 3px solid #000000 !important;">{{row.termsComparison}}</td>

                                                <td ng-if="$index == 0 || $index == 4">{{row.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4" style="border-right: 3px solid #000000 !important;">{{row.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4" >{{row.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4" style="border-right: 3px solid #000000 !important;">{{row.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == 0 || $index == 4">{{row.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == 0 || $index == 4" style="border-right: 3px solid #000000 !important;">{{row.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index > 1 && $index < 4 ">{{row.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4" style="border-right: 3px solid #000000 !important;">{{row.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4" >{{row.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4" style="border-right: 3px solid #000000 !important;">{{row.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber }}%</td>
                                                <td ng-if="$index > 1 && $index < 4">{{row.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index > 1 && $index < 4" style="border-right: 3px solid #000000 !important;">{{row.ttaOntopActPercentGain | changeNumberToPosiNumber | number:2}}%</td>

                                                <td ng-if="$index == 1">{{row.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 1">
                                                    <input style="text-align: center; background: white !important;" type="text" class="form-control radius3" name="" id = "freedGoodFormerYearOntopId"
                                                           disabled
                                                           maxlength="255" ng-model="row.formerYearOntop" to-change-number ng-change="changeFreedGoodFormerYearOntop(row)">
                                                </td>
                                                <td ng-if="$index == 1">{{row.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{row.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 1">{{row.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 1" >
                                                    <input style="text-align: center; background: white !important;" type="text" class="form-control radius3" name="" id = ""
                                                           maxlength="255" ng-model="row.currentYearOntop" to-change-number ng-change="changeFreedGoodFormerYearOntop(row)">
                                                </td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{row.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 1">{{row.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 1">{{row.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == 1">{{row.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{row.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index == 0" colspan="7" rowspan="8" style="background:mistyrose !important;border-right: 3px solid #000000 !important;" >
                                                    <textarea id="premarkp" style="width: 100%;height: 100%;background: #FFFFFF !important" ng-model="analysisHeader.purchaseRemark"></textarea>
                                                </td>
                                            </tr>

                                            <tr  style="height: 13px">
                                                <td colspan="14" style="border: 2px solid #000000 !important;"></td>
                                            </tr>

                                            <!-- ng-style="{'background-color':($index == 0) ? '#F5FFFA !important':'#D3FF93 !important'}"-->
                                            <tr id="analysisId_topPart2_{{$index}}" ng-class="{'analysis-row-bg-1': ($index == 0),'analysis-row-bg-2':$index != 0}"  style="font-weight: bold" ng-repeat="rowPart2 in analysisLineTopPart2 track by $index">
                                                <td colspan="3" align="left" style="border-right: 3px solid #000000 !important;">{{rowPart2.termsComparison}}</td>

                                                <td ng-if="$index == 0">{{rowPart2.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{rowPart2.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{rowPart2.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{rowPart2.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == 0">{{rowPart2.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{rowPart2.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index == 1">{{rowPart2.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{rowPart2.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{rowPart2.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == 1">{{rowPart2.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == 1">{{rowPart2.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == 1" style="border-right: 3px solid #000000 !important;">{{rowPart2.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                            </tr>

                                            <!--BEOI类型的条款-->
                                            <!-- ng-style="{'background-color': ($index == analysisLineBeoi.length - 1) ? '#D3FF93 !important':'none','font-weight':($index == analysisLineBeoi.length - 1 || $index == analysisLineBeoi.length - 2) ? 'bold':'normal'}"-->
                                            <tr id="analysisId_beoi_{{$index}}" ng-repeat="beoiRow in analysisLineBeoi track by $index" ng-class="{'analysis-row-bg-2':($index == analysisLineBeoi.length - 1),'analysis-row-font-weight':($index == analysisLineBeoi.length - 1 || $index == analysisLineBeoi.length - 2)}">
                                                <td ng-if="$index == 0" rowspan="{{analysisLineBeoi.length}}">{{beoiRow.oiType}}</td>

                                                <td ng-if="$index != analysisLineBeoi.length-1 && $index != analysisLineBeoi.length-2" style="text-align: left">{{beoiRow.termsEn}}</td>
                                                <td ng-if="$index != analysisLineBeoi.length-1 && $index != analysisLineBeoi.length-2" style="border-right: 3px solid #000000 !important;text-align: left;">{{beoiRow.termsCn}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length-1 || $index == analysisLineBeoi.length-2" colspan="2" style="border-right: 3px solid #000000 !important;text-align: center;">{{beoiRow.termsComparison}}</td>

                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2" style="border-right: 3px solid #000000 !important;">{{beoiRow.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2" style="border-right: 3px solid #000000 !important;">{{beoiRow.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2">{{beoiRow.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index != analysisLineBeoi.length-2" style="border-right: 3px solid #000000 !important;">{{beoiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2" style="border-right: 3px solid #000000 !important;">{{beoiRow.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2" style="border-right: 3px solid #000000 !important;">{{beoiRow.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2">{{beoiRow.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == analysisLineBeoi.length - 2" style="border-right: 3px solid #000000 !important;">{{beoiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <!--userData.userType =='45' && (controllTabShow.remarkFlag || params.status == 'C')-->
                                                <td ng-if="($index == 0 && userData.userType =='45' && controllTabShow.remarkFlag) || ($index == 0 && userData.userType =='45' && params.status == 'C')" colspan="7" rowspan="{{analysisLineBeoi.length + analysisLineSroi.length + analysisLineAboi.length}}" style="border-right: 3px solid !important;">
                                                    <strong><textarea id='bicremark' style='width: 100%;height: 100%' ng-model="analysisHeader.bicRemark"></textarea></strong>
                                                </td>
                                                <td ng-if="$index == 0 && userData.userType !='45'" colspan="7" rowspan="{{analysisLineBeoi.length + analysisLineSroi.length + analysisLineAboi.length}}" style="border-right: 3px solid !important;">
                                                    <strong><textarea id='bicremark' style='width: 100%;height: 100%'></textarea></strong><!--ng-model="analysisHeader.bicRemark"-->
                                                </td>
                                                <td ng-if="$index == 0 && userData.userType =='45' && !controllTabShow.remarkFlag && !params.status == 'C'" colspan="7" rowspan="{{analysisLineBeoi.length + analysisLineSroi.length + analysisLineAboi.length}}" style="border-right: 3px solid !important;">
                                                    <strong><textarea id='bicremark' style='width: 100%;height: 100%'></textarea></strong>
                                                </td>
                                            </tr>

                                            <!--SROI类型的条款-->
                                            <!-- ng-style="{'background-color': ($index == analysisLineSroi.length - 1) ? '#D3FF93 !important':'none','font-weight':($index == analysisLineSroi.length - 1 || $index == analysisLineSroi.length - 2) ? 'bold':'normal'}"-->
                                            <tr id="analysisId_sroi_{{$index}}" ng-repeat="sroiRow in analysisLineSroi track by $index" ng-class="{'analysis-row-bg-2': ($index == analysisLineSroi.length - 1),'analysis-row-font-weight':($index == analysisLineSroi.length - 1 || $index == analysisLineSroi.length - 2)}">
                                                <td ng-if="$index == 0" rowspan="{{analysisLineSroi.length}}">{{sroiRow.oiType}}</td>

                                                <td ng-if="$index != analysisLineSroi.length-1 && $index != analysisLineSroi.length-2" style="text-align: left">{{sroiRow.termsEn}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1 && $index != analysisLineSroi.length-2" style="border-right: 3px solid #000000 !important;text-align: left;white-space: normal">
                                                    <div style="width: 280px;word-break: break-all;">{{sroiRow.termsCn}}</div>
                                                </td>
                                                <td ng-if="$index == analysisLineSroi.length-1 || $index == analysisLineSroi.length-2" colspan="2" style="border-right: 3px solid #000000 !important;text-align: center;">{{sroiRow.termsComparison}}</td>

                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;:">{{sroiRow.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;">{{sroiRow.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == analysisLineSroi.length-1">{{sroiRow.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;">{{sroiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;">{{sroiRow.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;">{{sroiRow.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber |zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index != analysisLineSroi.length-1">{{sroiRow.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber |zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineSroi.length-1" style="border-right: 3px solid #000000 !important;">{{sroiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                            </tr>

                                            <!--ABOI类型的条款-->
                                            <!-- ng-style="{'background-color': ($index == analysisLineAboi.length - 1) ? '#D3FF93 !important':'none','font-weight':($index == analysisLineAboi.length - 1 || $index == analysisLineAboi.length - 2) ? 'bold':'normal'}"-->
                                            <tr id="analysisId_aboi_{{$index}}"  ng-repeat="aboiRow in analysisLineAboi track by $index" ng-class="{'analysis-row-bg-2': ($index == analysisLineAboi.length - 1),'analysis-row-font-weight': ($index == analysisLineAboi.length - 1 || $index == analysisLineAboi.length - 2)}" >
                                                <td ng-if="$index == 0" rowspan="{{analysisLineAboi.length}}">{{aboiRow.oiType}}</td>

                                                <td ng-if="$index != analysisLineAboi.length-1 && $index != analysisLineAboi.length-2" style="text-align: left">{{aboiRow.termsEn}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1 && $index != analysisLineAboi.length-2" style="border-right: 3px solid #000000 !important;text-align: left;">{{aboiRow.termsCn}}</td>
                                                <td ng-if="$index == analysisLineAboi.length-1 || $index == analysisLineAboi.length-2" colspan="2" style="border-right: 3px solid #000000 !important;text-align: center;">{{aboiRow.termsComparison}}</td>

                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;:">{{aboiRow.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;">{{aboiRow.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == analysisLineAboi.length-1">{{aboiRow.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index == analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;">{{aboiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1 && $index != analysisLineAboi.length-2">
                                                    <input type='text' style='width: 100%;text-align: center;'  class='form-control radius3' ng-model="aboiRow.formerYearOntop" disabled
                                                           to-change-number ng-change="changeAboiOntopEvent(aboiRow)">
                                                </td>
                                                <td ng-if="$index == analysisLineAboi.length-2">{{aboiRow.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;">{{aboiRow.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1 && $index != analysisLineAboi.length-2">
                                                    <input type='text' style='width: 100%;text-align: center;'  class='form-control radius3' ng-model="aboiRow.currentYearOntop"
                                                           to-change-number ng-change="changeAboiOntopEvent(aboiRow)">
                                                </td>
                                                <td ng-if="$index == analysisLineAboi.length-2">{{aboiRow.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;">{{aboiRow.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index != analysisLineAboi.length-1">{{aboiRow.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index != analysisLineAboi.length-1" style="border-right: 3px solid #000000 !important;">{{aboiRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                            </tr>

                                            <!--analysis底部数据-->
                                            <tr id="analysisId_bottom_{{$index}}" ng-class="{'analysis-row-bg-1':$index == 0,'analysis-row-bg-2':($index != 0 && $index != analysisLineBottomPart.length - 1),'analysis-row-bg-3':$index == analysisLineBottomPart.length - 1}" style="font-weight: bold !important;"  ng-repeat="bottomRow in analysisLineBottomPart track by $index">
                                                <td colspan="3" align="left" style="border-right: 3px solid #000000 !important;">{{bottomRow.termsComparison}}</td>
                                                <td ng-if="$index == 0 ">{{bottomRow.formerYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{bottomRow.formerYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{bottomRow.formerYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.formerYearActual | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{bottomRow.currentYearTta | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" >{{bottomRow.currentYearOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.currentYearTtaOntop | number:0 | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{bottomRow.ttaOntopIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 0">{{bottomRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index == 0">{{bottomRow.ttaOntopActIncreAmt | number:0 | changeNumberToPosiNumber | zeroToStriping}}</td>
                                                <td ng-if="$index == 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index != 0">{{bottomRow.formerYearTta | number:2}}%</td>
                                                <td ng-if="$index != 0">{{bottomRow.formerYearOntop | number:2}}%</td>
                                                <td ng-if="$index != 0">{{bottomRow.formerYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index != 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.formerYearActual | number:2}}%</td>
                                                <td ng-if="$index != 0">{{bottomRow.currentYearTta | number:2}}%</td>
                                                <td ng-if="$index != 0" >{{bottomRow.currentYearOntop | number:2}}%</td>
                                                <td ng-if="$index != 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.currentYearTtaOntop | number:2}}%</td>
                                                <td ng-if="$index != 0">{{bottomRow.ttaOntopIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index != 0">{{bottomRow.ttaOntopPercentGain | number:2 | changeNumberToPosiNumber}}%</td>
                                                <td ng-if="$index != 0">{{bottomRow.ttaOntopActIncreAmt | number:0 | zeroToNa}}</td>
                                                <td ng-if="$index != 0" style="border-right: 3px solid #000000 !important;">{{bottomRow.ttaOntopActPercentGain | number:2 | changeNumberToPosiNumber}}%</td>

                                                <td ng-if="$index == 0 && userData.userType != '45'" style="background:mistyrose !important;border-right: 3px solid !important;" colspan="7" rowspan="3"></td>
                                                <td ng-if="$index == analysisLineBottomPart.length - 1 && userData.userType != '45'" style="background:mistyrose !important;border-right: 3px solid !important;text-align: left" colspan="7" align="left"></td>

                                                <td ng-if="$index == 0 && userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;" colspan="7" rowspan="3"></td>
                                                <td ng-if="$index == analysisLineBottomPart.length - 1 && userData.userType == '45'" style="background:mistyrose !important;border-right: 3px solid !important;text-align: left" colspan="7" align="left"></td><!--{{analysisHeader.benchMark}}-->
                                            </tr>

                                            <tr id="analysisId_prepared" style="background:white !important;border-right: 3px solid !important;border-top: 3px solid !important;font-weight: bold" >
                                                <td  align="left" style="vertical-align: middle; border-bottom:3px solid black !important;">Prepared by BIC:</td>
                                                <td style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="8"></td>
                                                <td style="vertical-align: middle;border-bottom:3px solid black !important;">Approved by:</td>
                                                <td style="background:white;height: 80px;border-bottom:3px solid black !important;" colspan="12" align="left"></td>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>

                            <!--endprint-->

                        </div>
                    </div>

                </div>
                <!--ttaAnalysis测试 结束-->


            </div>
            <!-- tabContent -->
        </div>
    </div>
</div>


<!--
    &lt;!&ndash; 品牌计划行信息 &ndash;&gt;
    <div class="modal fade" data-backdrop="static" data-des="品牌计划行信息" id="brandPlnLLov" tabindex="-1">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" class="close"
                            data-dismiss="modal" type="button">
                    </button>
                    <h4 class="modal-title" id="brandPlnLModalLabel">
                        品牌明细
                    </h4>
                </div>
                <form class="" name="brandPlnLForm">
                    <div class="modal-body">


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>brandDetails：</span></label>
                                <input class="form-control radius3" disabled disabled
                                       ng-model="brandPlnLInfo.brandDetails" required type="text"/>

                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>GROUP：</span></label>
                                <input class="form-control radius3" disabled
                                       ng-model="brandPlnLInfo.groupCode" required type="text"/>
                                <span class="input-group-btn ng-scope">
                                <button class="btn btn-default" ng-click="getRelGroupCode()" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>Dept_Code：</span></label>
                                <input class="form-control radius3" disabled
                                       ng-model="brandPlnLInfo.deptCode" required type="text"/>
                                <span class="input-group-btn ng-scope">
                                <button class="btn btn-default" ng-click="getRelDeptCode()" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>Dept_Desc：</span></label>
                                <input class="form-control radius3" data-required-msg="部门名称" disabled
                                       ng-model="brandPlnLInfo.deptDesc"
                                       required type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100"><i class="red">* </i>BRAND_CN：</span></label>
                                <input class="form-control radius3" data-required-msg="BRAND_CN"
                                       ng-model="brandPlnLInfo.brandCn"
                                       required type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">F’cs Purchase（PO Record）：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.relDeptName"
                                       type="text">
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Purchase Growth%：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.purchaseGrowth"
                                       type="text">
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">F’cs Sales：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.fcsSales"
                                       type="text">
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Sales Growth%：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.salesGrowth"
                                       type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">GP%：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.gp"
                                       type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Purchase（PO Record）：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.poRecord"
                                       type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Sales：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.sales"
                                       type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Actual GP%：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.actualGp"
                                       type="text">
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Purchase（PO Record）：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.poRecord2"
                                       type="text">
                            </div>
                        </div>


                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Sales：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.sales2"
                                       type="text">
                            </div>
                        </div>

                        <div class="form-group col-xs-12 col-md-6">
                            <div class="input-group input-group-xs">
                                <label class="input-group-addon bn">
                                    <span class="w100">Actual GP%：</span></label>
                                <input class="form-control radius3" data-required-msg="" disabled
                                       ng-model="brandPlnLInfo.actualGp2"
                                       type="text">
                            </div>
                        </div>

                        <div class="cb"></div>
                    </div>

                    <div class="modal-footer ">
                        <div style="text-align:center">
                            <button class="btn btn-default" data-dismiss="modal" style="" type="button">取消
                            </button>
                            <button class="btn btn-primary mr10" data-validate-form="brandPlnLForm"
                                    id="saveBrandPlnL" ng-click="saveBrandPlnL(brandPlnLForm.$invalid)"
                                    validate-form-btn="">
                                保存
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            &lt;!&ndash; /.modal-content &ndash;&gt;
        </div>
        &lt;!&ndash; /.modal &ndash;&gt;
    </div>
-->


<!-- proposal头信息并更-->
<div class="modal fade" data-backdrop="static" data-des="变更原因" id="proposalChangeLov" tabindex="-1">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" class="close"
                        data-dismiss="modal" type="button">
                </button>
                <h4 class="modal-title" id="proposalChangeModalLabel">
                    变更
                </h4>
            </div>
            <form class="ngValid" name="proposalChangeForm">
                <div class="modal-body">


                    <div class="form-group col-xs-12 col-md-6">
                        <div class="input-group input-group-xs">
                            <label class="input-group-addon bn">
                                <span class="w100"><i class="red">* </i>变更原因：</span></label>
                            <input class="form-control radius3" disabled
                                   ng-model="proposalChangeInfo.remark" ng-required="changeReason" type="text"/>

                        </div>
                    </div>


                    <div class="cb"></div>
                </div>

                <div class="modal-footer ">
                    <div style="text-align:center">
                        <button class="btn btn-default" data-dismiss="modal" style="" type="button">取消
                        </button>
                        <button class="btn btn-primary mr10" data-validate-form="proposalChangeForm"
                                id="saveProposalChange" ng-click="saveProposalChange(proposalChangeForm.$invalid)"
                                validate-form-btn="">
                            确认变更
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal -->
</div>

<!--Dept选择-->
<div data-auto-request="true" data-callback="selectBrandPlnDeptReturn" data-checked-type="radio"
     data-dynamic-params='' data-keys="{'key':'departmentCode','value':'departmentCode','name':'部门编码'}"
     data-params="{parentDepartmentId:'{{params.brandDetailDeptId}}'}"
     data-other-column="[{'name':'部门名称','key':'departmentFullName'}]"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-return-type="key"
     data-search-key="[{'key':'departmentCode','placeholder':'部门编码'},
                          {'key':'departmentFullName','placeholder':'部门名称'}]"
     data-show-index="false"
     data-title="选择部门信息"
     data-type="competitor"
     data-url="findDeptByGroupIdAndDepartmentType"
     id="brandPlnDeptLov"
     lov-list="departmentPlnDeptLov"
     ng-model="current.em"
     role="dialog"
>
</div>

<!--Group 选择-->
<div data-auto-request="true" data-callback="selectBrandPlnLineReturn" data-checked-type="radio"
     data-params="{parentDepartmentId:'{{deptProject.defaultDeptId}}',departmentType:'30'}"
     data-dynamic-params='' data-keys="{'key':'departmentCode','value':'departmentCode','name':'业务组编码'}"
     data-other-column="[{'name':'Group Desc','key':'departmentFullName'}]"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-return-type="key"
     data-search-key="[{'key':'departmentCode','placeholder':'Group'},
                          {'key':'departmentFullName','placeholder':'Group Desc'}]"
     data-show-index="false"
     data-title="选择GROUP"
     data-type="competitor"
     data-url="groupFindLov"
     id="brandPlnLineLov"
     lov-list="brandPlnLineLov"
     ng-model="current.em"
     role="dialog"
>
</div>


<div data-auto-request="true" data-callback="selectSupplierReturn" data-checked-type="radio"
     data-dynamic-params="{flag:'isNew'}" data-keys="{'key':'supplierCode','value':'supplierCode','name':'供应商编码'}"
     data-other-column="[{'name':'供应商名称','key':'supplierName'}]"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-return-type="key"
     data-search-key="[{'key':'supplierCode','placeholder':'供应商编码'},
                          {'key':'supplierName','placeholder':'供应商名称'}]"
     data-show-index="false"
     data-title="选择供应商信息"
     data-type="competitor"
     data-url="supplierFindLov"
     id="supplierCode"
     lov-list="cityLov"
     ng-model="current.em"
     role="dialog"
>
</div>

<div class="" data-auto-request="auto" data-callback="selectSalesArea" data-cancel-callback="clearSalesArea"
     data-checked-type="checkbox" data-dynamic-params="{lookupType:'TTA_TERMS_AREA'}"
     data-keys="{'key':'lookupCode','value':'lookupCode','name':'序号'}"
     data-other-column="[{'key':'meaning','name':'销售区域'}]"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-search-key="[{'key':'lookupCode_like','placeholder':'序号'},{'key':'meaning_like','placeholder':'销售区域'}]"
     data-show-index="false"
     data-title="请选择销售区域"
     data-type="competitor"
     data-url="base_lookupVal"
     data-callbackClick = "selectSalesAreaClick"
     id="salesAreaChange"
     lov-list
     ng-model="salesAreaChange"
     role="dialog"
>
</div>

<!--    <div class="" data-auto-request="auto" data-callback="selectWarehouse" data-cancel-callback="clearWarehouse"
         data-checked-type="checkbox" data-dynamic-params="{lookupType:'TTA_TERMS_WH'}"
         data-keys="{'key':'lookupCode','value':'lookupCode','name':'仓库编码'}"
         data-other-column="[{'key':'meaning','name':'仓库名称'}]"
         data-pagination="{'pageIndex':'1','pageRows':'5'}"
         data-search-key="[{'key':'meaning_like','placeholder':'仓库名称'},{'key':'lookupCode_like','placeholder':'仓库编码'}]"
         data-show-index="false"
         data-title="请选择配送仓库"
         data-type="competitor"
         data-url="base_lookupVal"
         id="warehouseChange"
         data-pagination="{'pageIndex':'1','pageRows':'30'}"
         lov-list
         ng-model="warehouseChange"
         role="dialog"

    >
    </div>-->

<div role="dialog" class="modal fade" id="warehouseChange" data-des="新增菜单" data-backdrop="static" tabindex="-1">
    <div class="modal-dialog">
        <!--addModalForm start-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    请选择配送仓库
                </h4>
            </div>
            <div class="modal-body">
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <input ng-model="warehouseParamsT.lookupCode_like" class="form-control" placeholder="请输入仓库编码">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <input ng-model="warehouseParamsT.meaning_like" class="form-control" placeholder="请输入仓库名称">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <button class="btn btn-xs btn-primary" type="button" ng-click="warehouseParamsTDataTable.search(1)">查询</button>
                    </div>
                </div>

                <div class="form-group col-xs-12 col-md-12">
                    <div class="data-table">
                        <div base-data-table="warehouseParamsTDataTable"
                             data-auto-request="true"
                             ng-params="warehouseParamsT"
                             data-show-index="true"
                             data-url="base_lookupVal"
                             data-checked-type="checkbox"
                             data-keys="{'key':'lookupValuesId'}"
                             data-legend="[
                                     {'value':'lookupCode','name':'仓库编码'},
                                     {'value':'meaning','name':'仓库名称'},
                                    ]">
                        </div>
                    </div>
                </div>
                <div class="cb"></div>
            </div>
            <div class="modal-footer">
                <button type="button" ng-click="selectWarehouse()" class="btn btn-warning btn-sm">
                    <span class="fa fa-plus"> 确定新增</span></button>
                <button type="reset" class="btn btn-default btn-sm" data-dismiss="modal" aria-label="Close"><span
                        class="fa ">取消</span>
                </button>
            </div>
        </div>
        <!--addModalForm end-->
    </div>
</div>

<!--params.majorDeptId-->
<div data-auto-request="true" data-callback="selectDeptReturn" data-checked-type="radio"
     data-dynamic-params='{"flag": "findDept","departmentType":"30","parentDepartmentId":""}'
     data-keys="{'key':'departmentCode','value':'departmentCode','name':'部门编码'}"
     data-other-column="[{'name':'部门名称','key':'departmentName'}]"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-return-type="key"
     data-search-key="[{'key':'departmentCode','placeholder':'部门编码'},
                          {'key':'departmentName','placeholder':'部门名称'}]"
     data-show-index="false"
     data-title="选择部门信息"
     data-type="competitor"
     data-url="findDeptPagination"
     id="selectDeptId"
     lov-list="selectDept"
     ng-model="current.em"
     role="dialog"
>
</div>

<!--选择proposal信息-->
<div lov-list="lastYearOrderNoLov" role="dialog" data-title="Proposal信息" id="lastYearOrderNoId" ng-model="current.em"
     data-url="proposalFindLov"
     data-dynamic-params='{"oldProposalYear":params.proposalYear*1-1,"flag":"LAST_YEAR_ORDER_NO","oldVendorNbr":params.vendorNbr}'
     data-callback="selectlastYearOrderNoReturn"
     data-auto-request="true"
     data-return-type="key"
     data-pagination="{'pageIndex':'1','pageRows':'5'}"
     data-checked-type="radio"
     data-keys="{'key':'proposalId','value':'orderNbr','name':'Proposal单号'}"
     data-show-index="false"
     data-type="competitor"
     data-other-column="[{'name':'Proposal年度','key':'proposalYear'},{'name':'供应商编码','key':'vendorNbr'},{'name':'供应商名称','key':'vendorName'},{'name':'Proposal版本号','key':'versionCode'}]"
     data-search-key="[{'key':'orderNbr','placeholder':'Proposal单号'},
                                        {'key':'vendorNbr','placeholder':'供应商编码'},
                                        {'key':'vendorName','placeholder':'供应商名称'}]"
>
</div>

<div class="data-table" ng-show="false">
    <div base-data-table="brandDetalDataTable"
         ng-params="brandDetailParams"
         data-show-index="true"
         data-url="brandplnLFind"
         data-keys="{key:'brandplnLId'}"
         data-legend="[
                                    {'value':'brandDetails','name':'Brand Details'},
                                    {'value':'groupCode','name':'Group Code'},
                                    {'value':'groupDesc','name':'Group Desc'},
                                    {'value':'deptCode','name':'Dept Code'},
                                    {'value':'deptDesc','name':'DEPT_DESC'},
                                    {'value':'brandCn','name':'BRAND_CN'},
                                    {'value':'brandEn','name':'BRAND_EN'},
                                    {'value':'poRecord','name':'Purchase （PO Record）'},
                                    {'value':'sales','name':'Sales'},
                                    {'value':'actualGp','name':'Actual GP%'},
                                    {'value':'annualPurchase','name':'Annual Purchase'},
                                    {'value':'annualSales','name':'Annual Sales'},
                                    {'value':'fcsPurchase','name':'F’cs Purchase （PO Record）'},
                                    {'value':'purchaseGrowth','name':'Purchase Growth%'},
                                    {'value':'fcsSales','name':'F’cs Sales'},
                                     {'value':'salesGrowth','name':'Sales Growth%'},
                                    {'value':'gp','name':'GP%'}
                             ]"
    ></div>
</div>

<div class="modal fade" id="termCountAmount" data-des="供应商收益计算" data-backdrop="static" tabindex="-1" >
    <div class="modal-dialog"  style="    width: 800px;">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    计算
                </h4>
            </div>
            <form   >
                <div class="modal-body">

                    <!--------------                                                 表单-   --------------------------------------------->
                    <div class="col-md-12">
                        <div class="data-table">
                            <div style="">
                                <div class="" id="termsCountForm1" ng-nicescroll=""
                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                >
                                    <table
                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                        <thead class="bg-gray-white">
                                        <tr class="text-center">
                                            <th rowspan="2" style="vertical-align: middle;width: 33%;"><span>采购额</span></th>
                                            <th colspan="2">调整分配比例</th>
                                        </tr>
                                        <tr class="text-center">
                                            <th>屈臣氏</th>
                                            <th>供应商</th>
                                        </tr>
                                        </thead>

                                        <tbody ng-nicescroll="" ng-style="tableStyle">
                                        <tr style = "text-align: right;">
                                            <td>{{contractParams.fcsPurchse |  number : 2}}</td>
                                            <td>{{contractParams.redTicketScale +'%'}}</td>
                                            <td>{{( 100 - contractParams.redTicketScale) +'%'}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--------------                                                 表单-   --------------------------------------------->

                    <!--------------                                                 表单2-   --------------------------------------------->
                    <div class="col-md-12">
                        <div class="data-table">
                            <div style="">
                                <div class="" id="termsCountForm2" ng-nicescroll=""
                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                >
                                    <table
                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                        <thead class="bg-gray-white">
                                        <tr class="text-center">
                                            <th style="vertical-align: middle;width: 33%;" ><span>项目</span></th>
                                            <th >比率</th>
                                            <th >金额(含税)</th>
                                            <th >费用</th>
                                        </tr>
                                        </thead>

                                        <tbody ng-nicescroll="" ng-style="tableStyle">
                                        <tr style = "text-align: right;">
                                            <td style="    text-align: center;">原返佣(按普通票处理)</td>
                                            <td>{{termsCountTax + '%'}}</td>
                                            <td >{{termsCountOldAmount |  number : 2}}</td>
                                            <td>{{termsCountOldAmount |  number : 2}}</td>
                                        </tr>
                                        <tr style = "text-align: right;">
                                            <td style="    text-align: center;">新返佣(按普通票处理)</td>
                                            <td>{{taxCom + '%'}}</td>
                                            <td>{{termsCountNewAmount |  number : 2}}</td>
                                            <td>{{termsCountNewNoAmount |  number : 2}}</td>
                                        </tr>
                                        <tr style = "text-align: right;">
                                            <td style="    text-align: center;">变化（正数为增加额、负数为减少额）</td>
                                            <td>{{(taxCom-termsCountTax).toFixed(2) + '%'}}</td>
                                            <td>{{(termsCountNewAmount-termsCountOldAmount).toFixed(2) |  number : 2}}</td>
                                            <td style="background-color: #FFFF00;">{{(termsCountNewNoAmount-termsCountOldAmount).toFixed(2) |  number : 2}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--------------                                                 表单2-   --------------------------------------------->

                    <!--------------                                                 表单3-   --------------------------------------------->
                    <div class="col-md-12">
                        <div class="data-table">
                            <div style="">
                                <div class="" id="termsCountForm2" ng-nicescroll=""
                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                >
                                    <table
                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                        <thead class="bg-gray-white">
                                        <tr class="text-center">
                                            <th style="vertical-align: middle" colspan="3"><span>附加税费变化</span></th>
                                            <th >12.00%</th>
                                        </tr>
                                        </thead>

                                        <tbody ng-nicescroll="" ng-style="tableStyle">
                                        <tr style = "text-align: right;">
                                            <td style="    text-align: center;">新返佣(按红票处理)可减少销项税</td>
                                            <td>{{additionalChange |  number : 2}}</td>
                                            <td>附加税费减少</td>
                                            <td style="background-color: #FFFF00;">{{additionalChangeTax |  number : 2}}</td>
                                        </tr>
                                        <tr style = "text-align: right;    border: solid 4px darkred;">
                                            <td colspan="3" style="background-color: #FFC000;text-align:left"><b>供应商获得的好处（利润增加）合计</b></td>
                                            <td style="background-color: #FFFF00;">{{supplierAddFee |  number : 2}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--------------                                                 表单3-   --------------------------------------------->

                    <!--------------                                                 表单4-   --------------------------------------------->
                    <div class="col-md-12">
                        <div class="data-table">
                            <div style="">
                                <div class="" id="termsCountForm2" ng-nicescroll=""
                                     nice-option="{oneaxismousemode:true,railvalign: 'bottom',cursorcolor:'#1e90c2'}"
                                >
                                    <table
                                            class=" nicescroll-height  table table-bordered table-hover table-condensed">
                                        <thead class="bg-gray-white">
                                        <tr class="text-center">
                                            <th  style="    width: 33%;"><span></span></th>
                                            <th   ng-repeat="row in findMethodWindosOLd" >{{row.name}}</th>
                                            <th >新佣金比例</th>
                                        </tr>
                                        </thead>

                                        <tbody ng-nicescroll="" ng-style="tableStyle">
                                        <tr class="text-center"
                                            ng-class="{'active':returnArray.selectRow==$index}"
                                            ng-click="returnArray.selectRow=$index"
                                            ng-repeat="row in returnArray">
                                            <td >{{row.begin}}</td>
                                            <td ng-repeat="row1 in findMethodWindos">
                                                <span>{{row[row1.name] |  number : 2}}</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--------------                                                 表单4-   --------------------------------------------->
                </div>

                <div class="modal-footer ">
                    <div style="text-align:center">
                        <button style="" type="button" class="btn btn-default" data-dismiss="modal">取消
                        </button>
                        <button ng-click="termsTtaSave('1')" id="termsTtaSaveButton" class="btn btn-primary mr10">确定</button>
                    </div>
                </div>
            </form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!--品牌计划计算按钮弹出框-->
<div class="modal fade" id="ttaPropsalBrandCountBtnModal" data-des="品牌计算操作" data-backdrop="static" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="mybrandModal">
                    品牌计算操作
                </h4>
            </div>
            <form class="ngValid" name="ttaProposalBrandCountName"  >
                <div class="modal-body">
                    <div id="container">
                        <div id="result">
                            <p>品牌数据正在生成请耐心等候!</p>
                            <!--<div class="loading"></div>-->
                        </div>
                        <p>已用时间 <span id="timer" style="color:#ff0000;">00</span></p>
                    </div>
                </div>

                <div class="modal-footer ">
                    <div style="text-align:center">
                        <button style="width: 35%;font-size: 17px" type="button" class="btn btn-primary" data-dismiss="modal">关闭
                        </button>
                    </div>
                </div>
            </form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

