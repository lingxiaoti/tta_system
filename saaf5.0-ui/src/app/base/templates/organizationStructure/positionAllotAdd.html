<div ng-controller="positionAllotAddCtrl" class="gridtable">
    <div class="bg-gray-white bt">
        <div class="bg-gray-white p5">
            <div class="btn-group btn-group-xs pull-right ml10" id="outputButton">
                <div resp-change="" style="display: none"></div>
                <button type="button" ng-click="btnSave()" permission-btn="btnSave" data-validate-form="addForm"
                        class="btn btn-default">
                </button>

            </div>
            <div class="btn-group btn-group-xs ">
                <button class="btn btn-primary" ng-click="fullWindow($event)">
                    <i class="fa fa-square-o"></i>{{$l('数据全屏')}}
                </button>
            </div>
        </div>
    </div>
    <div main-scroll-style data-des="此节点必需－用户计算滚动区域高度">
        <div class="nicescroll-height  bg-white " ng-nicescroll
             nice-option="{{niceOpction}}"
             data-des="此节点必需-滚动内容及指令">

            <!--------------------- 输入表单  --->
            <form name="addForm" class=" mt10 pb5 oh"
                  data-des="此节点必需－用于识别输入表单的指令">

                <header class="col-xs-12 mb10">
                    <i class="fa fa-cog" aria-hidden="true"></i>
                    <span>人员信息</span>
                </header>

                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="pl10"><i class="red">*</i>人员</span></label>
                        <input type="text" class="form-control radius3" name="personName" required readonly
                               ng-model="allotDetail.personName">
                        <span class="input-group-btn ng-scope">
                            <button type="button" data-toggle="modal" data-target="#findPerson" class="btn btn-default"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </div>


                <div class="row w100p"></div>
                <div class="col-xs-12 mb10">
                    <span><i class="fa fa-cog"></i> 职位信息</span>
                    <button type="button" class="btn btn-primary btn-xs pull-right" data-toggle="modal" data-target="#position"
                            ng-disabled="!allotDetail.personName"
                    ><i class="fa fa-plus">选择职位</i></button>
                </div>

                <table class="nicescroll-height report-data">
                    <thead>
                    <tr>
                  <!--      <th>组织名称</th>-->
                        <th>职位<i class="red">*</i></th>
                        <th>是否部门负责人<i class="red">*</i></th>
                        <th>是否主职位 <i class="red">*</i></th>
                       <!-- <th>查看预算 <i class="red">*</i></th>
                        <th>修改预算 <i class="red">*</i></th>-->
                        <th>是否生效 <i class="red">*</i></th>
                        <th>生效日期 <i class="red">*</i></th>
                        <th>失效日期 <i class="red">*</i></th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>

                    <tr ng-repeat="row in allotDetail.personAssignData" ng-class="{'active':allotDetail.selectRow==$index}" ng-click="allotDetail.selectRow=$index">
                       <!-- <td ng-bind="row.ouName"></td>-->
                        <td class="tl" ng-bind="row.positionName"></td>
                        <td>
                            <div lookup-code="YES_OR_NO" required="true" class="form-control radius3 input-xs"
                                 ng-model="row.mgrFlag" required="true" name="mgrFlag"></div>
                        </td>
                        <td>
                            <div lookup-code="YES_OR_NO" required="true" class="form-control radius3 input-xs"
                                 ng-model="row.primaryFlag" required="true" name="primaryFlag"></div>
                        </td>
                <!--        <td>
                            <div lookup-code="BUDGET_VIEW" required="true" class="form-control radius3 input-xs"
                                 ng-model="row.budgetView" required="true" name="budgetView"></div>
                        </td>
                        <td>
                            <div lookup-code="YES_OR_NO" required="true" class="form-control radius3 input-xs"
                                 ng-model="row.budgetMaintain" required="true" name="budgetMaintain"></div>
                        </td>-->
                        <td>
                            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-change="changeEnableFlag(row.enableFlag, row)" ng-model="row.enableFlag">
                        </td>
                        <td>
                            <input class="form-control input-xs" ng-model="row.dateFrom" date-time-picker
                                   data-is-today="true" name="dateFrom" autocomplete="off"
                                   required data-enddate="{{row.dateTo}}" data-min-view="2"
                                   data-date-format="yyyy-mm-dd">
                        </td>
                        <td>
                            <input class="form-control input-xs" ng-model="row.dateTo" date-time-picker
                                   data-is-today="true" name="dateTo" autocomplete="off"
                                   required data-stratdate="{{row.dateFrom}}" data-min-view="2"
                                   data-date-format="yyyy-mm-dd">
                        </td>
                        <td>
                            <a href="javascript:" ng-if="!row.assignId" ng-click="deleteAction(row,$index)"><i
                                    class="fa fa-trash-o fa-lg"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>

                    <!--<div class="pl10 pr10 z-index-100">-->
                        <!--<div paging page="dataTable.curIndex" class="tc"-->
                             <!--page-size="dataTable.pageSize"-->
                             <!--total="dataTable.count"-->
                             <!--show-prev-next="true"-->
                             <!--hide-if-empty="true"-->
                             <!--paging-action="getDataTable(page)">-->
                        <!--</div>-->
                    <!--</div>-->
            </form>
        </div>
    </div>

    <!--<div lov-list="findPerson" role="dialog" data-title="请选择人员" id="findPerson" ng-model="findPerson" class=" "-->
         <!--data-url="orgFindPersonPagination"-->
         <!--data-auto-request="false"-->
         <!--data-dynamic-params="{responsibilityId:respId}"-->
         <!--data-pagination="{'pageIndex':'1','pageRows':'5'}"-->
         <!--data-checked-type="radio"-->
         <!--data-callback="selectPerson"-->
         <!--data-keys="{'key':'personId','value':'personName',name:'人员姓名',hide:'true'}"-->
         <!--data-show-index="false"-->
         <!--data-type="competitor"-->
         <!--data-search-key="[{'key':'personName','placeholder':'人员姓名'}]"-->
         <!--data-other-column="[{'name':'职位名称','key':'positionName'},{'name':'员工姓名','key':'personName'}]"-->
    <!--&gt;-->
    <!--</div>-->
    <div lov-list="findPerson" role="dialog" data-title="请选择人员" id="findPerson" ng-model="findPerson" class=" "
         data-url="userFind"
         data-auto-request="false"
         data-dynamic-params="{enabled:'Y'}"
         data-pagination="{'pageIndex':'1','pageRows':'10'}"
         data-checked-type="radio"
         data-callback="selectPerson"
         data-cancel-callback="clearPersonSel"
         data-keys="{'key':'personId','value':'personName',name:'人员姓名',hide:'true'}"
         data-show-index="false"
         data-type="competitor"
         data-search-key="[{'key':'employeeNumber','placeholder':'人员编码'},{'key':'personName','placeholder':'人员姓名'}]"
         data-other-column="[{'name':'人员编码','key':'employeeNumber'},{'name':'人员姓名','key':'personName'}]"
    >
    </div>


    <div lov-list role="dialog" data-title="请选择职位" id="position" ng-model="positionModel" class=""
         data-url="findBasePositionNewPagination"
         data-auto-request="false"
         data-hide-modal-reset="true"
         data-dynamic-params="{respId:respId}"
         data-pagination="{'pageIndex':'1','pageRows':'5'}"
         data-checked-type="checkbox"
         data-callback="selectPosition"
         data-keys="{'key':'positionId','value':'positionName',hide:'true'}"
         data-other-column="[{'name':'职位编码','key':'positionCode'},{'name':'职位名称',key:'positionName'}]"
         data-show-index="false"
         data-type="competitor"
         data-search-key="[{'key':'positionCode','placeholder':'职位编码'},{'key':'positionName','placeholder':'职位名称'}]"
    >
    </div>

</div>
