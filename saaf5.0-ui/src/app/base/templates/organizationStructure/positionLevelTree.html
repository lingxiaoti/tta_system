<div ng-controller="positionLevelTreeCtrl" class="gridtable">
    <div class="bg-gray-white bt">
        <div class="bg-gray-white p5">
            <div class="btn-group btn-group-xs ">
                <button class="btn btn-primary" ng-click="fullWindow($event)">
                    <i class="fa fa-square-o"></i>{{$l('数据全屏')}}
                </button>
            </div>
        </div>
    </div>
    <div main-scroll-style data-des="此节点必需－用户计算滚动区域高度">
        <div class="bg-white col col-md-3 col-xs-3 br">
            <div class="form-group  mt15" >
                <div class="input-group input-group-xs ">
                    <label class="input-group-addon bn">职责</label>
                    <select class="form-control radius3" ng-change="changeResp(respId)" ng-model="respId"
                            ng-options="item.responsibilityId as item.responsibilityName for item in dataList">
                        <!--<option ng-repeat="item in dataList" value="{{item.responsibilityId}}">{{item.responsibilityName}}-->
                        <!--</option>-->
                    </select>
                </div>
                <form class="pt10  input-group input-group-xs " ng-submit="treeSearch()">

                    <input class="form-control radius3" name="searchTreeParam" ng-keyup="treeSearch()"
                           ng-model="searchTreeParam" placeholder="请输入菜单名">
                    <span class="input-group-btn">
                            <button class="btn btn-primary"  ><i
                                    class="fa fa-search"></i></button>
                        </span>
                </form>
            </div>
            <div class="nicescroll-height " ng-nicescroll
                 nice-option="{{niceOpction}}" data-des="此节点必需-滚动内容及指令">
                <!--<div class="form-group col col-md-12 mt15" >-->
                    <!--<div class="input-group input-group-xs ">-->
                        <!--<label class="input-group-addon bn">职责</label>-->
                        <!--<select class="form-control radius3" ng-change="changeResp(respId)" ng-model="respId"-->
                                <!--ng-options="item.responsibilityId as item.responsibilityName for item in dataList">-->
                            <!--&lt;!&ndash;<option ng-repeat="item in dataList" value="{{item.responsibilityId}}">{{item.responsibilityName}}&ndash;&gt;-->
                            <!--&lt;!&ndash;</option>&ndash;&gt;-->
                        <!--</select>-->
                    <!--</div>-->
                    <!--<form class="pt10  input-group input-group-xs " ng-submit="treeSearch()">-->

                        <!--<input class="form-control radius3" name="searchTreeParam" ng-keyup="treeSearch()"-->
                               <!--ng-model="searchTreeParam" placeholder="请输入菜单名">-->
                        <!--<span class="input-group-btn">-->
                            <!--<button class="btn btn-primary"  ><i-->
                                    <!--class="fa fa-search"></i></button>-->
                        <!--</span>-->
                    <!--</form>-->
                <!--</div>-->

                <!--<div class="form-group col col-md-12">-->
                <!--<div class="input-group input-group-xs">-->
                <!--<label class="input-group-addon bn">职位</label>-->
                <!--<input type="text" class="form-control radius3" ng-model="positionName">-->
                <!--<span class="input-group-btn ng-scope">-->
                <!--<button type="button" class="btn btn-primary" ng-click="getTreeAction(respId)"><i class="fa fa-search"></i></button>-->
                <!--</span>-->
                <!--</div>-->
                <!--</div>-->
                <div main-scroll-style>
                    <div class="col col-md-12 nicescroll-height" >
                        <ul sie-ztree="positionTree" style="margin-bottom: 10px;" class="ztree pt10 pb10" id="positionTree" ng-show="!showTree"
                            data-url="{{getTreeUrl}}"
                            data-params="{{getTreeParams}}"
                            data-simpledata='{"enable":"false","idKey":"positionId","pIdKey":"parentPositionId","rootPId":0}'
                            data-keys='{"name":"allName"}'
                            data-page-rows="10000"
                            data-expand-node="true"
                            data-clear-data="true"
                            data-edit="false"
                            data-node-click="clickNode"
                            data-callback-beforedrop="updateLevel"
                        >
                        </ul>
                        <ul sie-ztree="newTree" style="margin-bottom: 10px;" class="ztree pt10 pb10" id="newTree" ng-show="showTree"
                            data-clear-data="false"
                            ng-data-source="newTreeArray"
                            data-keys='{"name":"allName"}'
                            data-simpledata='{"enable":"false","idKey":"positionId","pIdKey":"parentPositionId","rootPId":0}'
                            data-page-rows="10000"
                            data-expand-node="true"
                            data-node-click="clickNode"

                        >
                    </div>
                </div>
            </div>
        </div>
        <div class="nicescroll-height bg-white col col-md-9 col-xs-9" ng-nicescroll
             nice-option="{{niceOpction}}" data-des="此节点必需-滚动内容及指令">
            <form name="addForm" class=" mt10 pb5 oh"
                  data-des="此节点必需－用于识别输入表单的指令">
                <header class="col-xs-12 mb10">
                    <i class="fa fa-cog" aria-hidden="true"></i>
                    <span>职位信息</span>
                </header>

                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="pl10">职位编码</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="positionDetail.positionCode">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="pl10">职位名称</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="positionDetail.positionName">
                    </div>
                </div>
                <div class="form-group col-xs-4 col-md-4">
                    <div class="input-group input-group-xs">
                        <label class="input-group-addon bn"><span class="pl10">人员名称</span></label>
                        <input type="text" class="form-control radius3" readonly
                               ng-model="allotDetail.personName">
                    </div>
                </div>

                <div class="col col-md-12 mt10">
                    <ul class="nav nav-tabs" role="tablist" id="myTab">
                        <li role="presentation" class="active">
                            <a href="#allot" aria-controls="allot" role="tab" data-toggle="tab">职位分配</a>
                        </li>
                        <li role="presentation" ng-click="getLevelList()">
                            <a href="#level" aria-controls="level" role="tab" data-toggle="tab">下级职位</a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="allot">
                            <div class="data-table">
                                <div base-data-table="allotTable"
                                     data-auto-request="false"
                                     ng-params="allotParams"
                                     data-show-index="true"
                                     data-onload=""
                                     data-url="findPersonAssignPagination"
                                     data-legend="[
                                         {'value':'personName','name':'员工姓名'},
                                         {'value':'personId','name':'员工编号','style':'text-align:left'},
                                     ]"
                                ></div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="level">
                            <div class="data-table">
                                <div base-data-table="levelTable"
                                     data-auto-request="false"
                                     ng-params="levelParams"
                                     data-show-index="true"
                                     data-onload=""
                                     data-url="findPersonLevelPagination"
                                     data-legend="[
                                         {'value':'positionName','name':'下级职位名称'},
                                         {'value':'personName','name':'下级人员名称'},
                                         {'value':'enableFlag','name':'是否生效',boolean:'cn'},
                                         {'value':'dateFrom','name':'生效时间'},
                                         {'value':'dateTo','name':'失效时间'},
                                     ]"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>